---
title: Глава 1. Введение в ОСРВ Azure NetX Secure
description: В этой главе содержатся общие сведения о протоколе ОСРВ Azure NetX Secure, в том числе описываются аспекты его прикладного применения и преимущества.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 1d6b0f23d7353626f340fe0ab93ee1e04800edaaa1f00da49afd83f84339df86
ms.sourcegitcommit: 93d716cf7e3d735b18246d659ec9ec7f82c336de
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2021
ms.locfileid: "116791607"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-secure"></a>Глава 1. Введение в ОСРВ Azure NetX Secure

ОСРВ Azure NetX Secure — это высокопроизводительная реализация криптографических стандартов сетевой безопасности, включая TLS/SSL, предназначенная исключительно для внедренных приложений на основе ThreadX. В этой главе содержатся общие сведения о протоколе NetX Secure, в том числе описываются аспекты его прикладного применения и преимущества.

## <a name="netx-secure-unique-features"></a>Уникальные возможности NetX Secure

В отличие от большинства других реализаций TLS, протокол NetX Secure был разработан с нуля для поддержки широкого спектра встроенных аппаратных платформ. Он легко масштабируется от небольших приложений микроконтроллеров до самых мощных встроенных процессоров из доступных. Код написан с учетом ограниченных ресурсов встроенных систем и предоставляет ряд параметров для уменьшения объема памяти, необходимой для безопасного взаимодействия по протоколу TLS.

## <a name="rfcs-supported-by-netx-secure"></a>Документы RFC, поддерживаемые NetX Secure 

NetX Secure поддерживает приведенные ниже протоколы, связанные с протоколом TLS. Этот список не обязательно является исчерпывающим, так как существует множество документов RFC, относящихся к TLS и шифрованию. NetX Secure соответствует всем общим рекомендациям и базовым требованиям с учетом ограничений операционной системы реального времени, обусловленных небольшой занимаемой памятью и эффективным выполнением.

| RFC      | Описание                                                                                                 | Страница |
|----------|-------------------------------------------------------------------------------------------------------------|------|
| RFC 2104 | HMAC: хэширование с ключом для проверки подлинности сообщений                                                              | 33   |
| RFC 2246 | Протокол TLS версии 1.0                                                                                | 19   |
| RFC 3268 | Комплекты шифров AES для протокола TLS                          | 31   |
| RFC 3447 | Стандарты шифрования с открытым ключом (PKCS) № 1: спецификации шифрования RSA версии 2.1                    | 32   |
| RFC 4279 | Комплекты шифров с общим ключом для протокола TLS                                                                         | 39   |
| RFC 4346 | Протокол TLS версии 1.1                                                     | 19   |
| RFC 5246 | Протокол TLS версии 1.2                                                     | 19   |
| RFC 5280 | Сертификаты PKI X.509 (вер. 3)                                                                                 | 41   |
| RFC 5746 | Расширение для указания повторного согласования TLS                                           |      |
| RFC 5869 | Функция формирования ключа на основе HMAC (HKDF) (извлечение и дополнение)                                                | 19   |
| RFC 6066<sup>1</sup> | Расширения протокола TLS: определения расширений                                            | 19   |
| RFC 6234 | Безопасные хэш-алгоритмы США (SHA, HMAC на основе SHA и HKDF)                                                 | 33   |
| RFC 8443 | Комплекты шифров ECC для протокола TLS версии 1.2 и более ранних версий |      |
| RFC 8446 | Протокол TLS версии 1.3                                                     | 19   |

1. Начиная с версии 6.0 полностью поддерживается только расширение указания имени сервера (SNI), описанное в RFC 6066.

## <a name="netx-secure-requirements"></a>Требования NetX Secure

Для правильной работы библиотеки времени выполнения NetX Secure требуется, чтобы экземпляр NetX IP уже был создан. Кроме того, в зависимости от приложения, потребуется один или несколько цифровых сертификатов X.509 в кодировке DER, чтобы идентифицировать экземпляр TLS или проверять сертификаты, поступающие с удаленного узла. Дополнительные требования для пакета NetX Secure отсутствуют.

## <a name="netx-secure-constraints"></a>Ограничения NetX Secure

Протокол NetX Secure реализует требования стандартов RFC 5246 для TLS 1.2 и RFC 8446 для TLS 1.3, а также дополнительно обеспечивает обратную совместимость с RFC 4346 (TLS 1.1) и 2246 (TLS 1.0) (отключенную по умолчанию). Однако действуют следующие ограничения.

- Для протоколов TLS 1.2 и TLS 1.3 поддерживаются только комплекты шифров, использующие SHA-256. В версиях, предшествовавших TLS 1.2, для подтверждения TLS использовалась процедура фиксированного хэширования для проверки того, что сообщения подтверждения TLS не были изменены. Начиная с версии 1.2 для подтверждения используется хэш-процедура, предоставляемая вместе с комплектом шифров. Протокол TLS не знает заранее, какая именно хэш-процедура будет использоваться, и должен кэшировать сообщения подтверждения. При записи хэша в SHA-256 протокол NetX Secure TLS может занимать меньше памяти, чем другие реализации TLS. Это ограничение будет удалено в следующей версии, когда будет соответствующим образом реализовано использование памяти. *Важное замечание. Это ограничение относится **только** к выбору комплекта шифров. Оно не распространяется на подписи сертификатов X.509, и можно использовать любые поддерживаемые хэш-процедуры.
- Вследствие архитектуры встроенных устройств некоторые приложения могут не иметь ресурсов для поддержки максимального размера записи TLS в 16 КБ. NetX Secure может обрабатывать записи размером в 16 КБ на устройствах с достаточными ресурсами. При возникновении проблем совместимости для буфера повторной сборки TLS (см. описание *nx_secure_tls_session_packet_buffer_set* в справочнике по API) **можно** установить размер меньше 16 КБ. Если получена допустимая запись TLS большего размера, чем буфер повторной сборки, NetX Secure TLS прерывает сеанс TLS с ошибкой. В общем случае всегда должен быть задан размер буфера не менее 18 KB (размер записи TLS 16 КБ + 2 КБ для заполнения при шифровании), который можно уменьшить только посредством контролируемых параметров (например, если удаленный узел гарантирует максимальный размер записи TLS).
  > [!NOTE]
  > В общем случае буфер повторной сборки пакетов никогда не должен быть меньше, чем максимальный размер записи TLS. Однако если характеристики удаленного узла известны (например, в полностью закрытой системе), то размер можно уменьшить, чтобы освободить некоторый объем ОЗУ.
- Минимальная проверка сертификатов. NetX Secure выполняет базовую проверку цепочки X.509 для сертификата, чтобы убедиться, что сертификат является действительным и подписан доверенным центром сертификации, и может предоставить общее имя сертификата приложению, которое сравнит его с доменным именем верхнего уровня удаленного узла. Если доступны часы реального времени, то их можно использовать для проверки даты окончания срока действия сертификата (см. описание API nx_secure_tls_session_time_function_set). Тем не менее, ответственность за проверку расширений сертификатов и других данных несет разработчик приложения.
- Программное шифрование требует много ресурсов процессора. Программные криптографические процедуры NetX Secure оптимизированы для повышения производительности, но, в зависимости от мощности целевого процессора, эта нагрузка может привести к очень длительным операциям. Если доступно аппаратное шифрование, следует использовать его, чтобы обеспечить оптимальную производительность NetX Secure TLS.
- Фрагментация записей подтверждения TLS не поддерживается. Если сообщения записей подтверждения TLS слишком велики, они могут быть разделены на несколько записей TLS. В настоящее время NetX Secure TLS обрабатывает это как ошибку. Требования к памяти для встроенных систем означают, что сообщение подтверждения большего размера, скорее всего, не будет обработано, а ограничение может привести к ошибкам при взаимодействии с определенными узлами TLS, использующими очень большие цепочки сертификатов.
- Сервер TLS не поддерживает динамический выбор сертификатов, если в локальном хранилище доступно несколько сертификатов. 
- Значение KeyUsage сертификата X.509 не отслеживается. 
- Комплекты шифров на основе ECDH не поддерживаются. Вместо них используйте ECDHE.
