---
title: Глава 3. Параметры конфигурации сервера ОСРВ Azure NetX Duo DHCPv6
description: В этой главе описаны параметры конфигурации сервера ОСРВ Azure NetX Duo DHCPv6.
author: philmea
ms.author: philmea
ms.date: 06/08/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 30f6e1c657eb62ebec48d6bb8caafac320727146
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "104815388"
---
# <a name="chapter-3---azure-rtos-netx-duo-dhcpv6-server-configuration-options"></a>Глава 3. Параметры конфигурации сервера ОСРВ Azure NetX Duo DHCPv6

Доступно несколько параметров конфигурации для сборки серверного приложения ОСРВ Azure NetX Duo DHCPv6. Их подробное описание приведено ниже.
  
- **NX_DISABLE_ERROR_CHECKING**: этот параметр отключает проверку на ошибки DHCPv6. Обычно его включают при отладке приложения.  
  
- **NX_DHCPV6_SERVER_THREAD_STACK_SIZE**: определяет размер стека потоков DHCPv6. По умолчанию размер стека составляет 4096 байт. Этого более чем достаточно для большинства приложений NetX Duo.

- **NX_DHCPV6_SERVER_THREAD_PRIORITY**: определяет приоритет потока сервера DHCPv6. Он должен быть ниже приоритета задачи потока IP сервера DHCPv6. Значение по умолчанию — 2.

- **NX_DHCPV6_IP_LEASE_TIMER_INTERVAL**: интервал таймера (в секундах), с которым функция входа таймера аренды вызывается планировщиком ThreadX. Функция входа устанавливает флаг для сервера DHCPv6, чтобы увеличивать прошедшее время аренды для всех клиентов на интервал таймера. По умолчанию это значение равно 60.

- **NX_DHCPV6_SESSION_TIMER_INTERVAL**: интервал таймера (в секундах), с которым функция входа таймера сеанса вызывается планировщиком ThreadX. Функция входа устанавливает флаг для сервера DHCPv6, чтобы увеличивать время сеанса для всех активных клиентов на интервал таймера. По умолчанию это значение равно 3.

Ниже приведены определения для типов сообщений о параметре состояния и сообщений, настраиваемых пользователем. Параметр состояния указывает результат запроса клиента.

- **NX_DHCPV6_STATUS_MESSAGE_SUCCESS** *"IA OPTION GRANTED"*

- **NX_DHCPV6_STATUS_NO_ADDRS_AVAILABLE** *"IA OPTION NOT GRANTED-NO ADDRESSES AVAILABLE”*

- **NX_DHCPV6_STATUS_MESSAGE_NO_BINDING** *"IA OPTION NOT GRANTED-INVALID CLIENT REQUEST"*

- **NX_DHCPV6_STATUS_MESSAGE_NOT_ON_LINK** *"IA OPTION NOT GRANTED-CLIENT NOT ON LINK"*

- **NX_DHCPV6_STATUS_MESSAGE_USE_MULTICAST** *"IA OPTION NOT GRANTED-CLIENT MUST USE MULTICAST"*

- **NX_DHCPV6_STATUS_MESSAGE_NO_ADDRS_AVAILABLE** *IA OPTION NOT GRANTED-NO ADDRESSES AVAILABLE*

- **NX_DHCPV6_SERVER_DUID_VENDOR_ASSIGNED_ID**: создает значение DUID сервера по идентификатору, назначенному поставщиком. Обратите внимание на то, что в качестве типа DUID следует задать NX_DHCPV6_DUID_TYPE_VENDOR_ASSIGNED.

- **NX_DHCPV6_SERVER_DUID_VENDOR_ASSIGNED_LENGTH**: задает максимальное значение идентификатора, назначенного поставщиком. Значение по умолчанию — 48.

- **NX_DHCPV6_SERVER_DUID_VENDOR_PRIVATE_ID**: задает для DUID организации тип частного поставщика.

- **NX_DHCPV6_PACKET_WAIT_OPTION**: определяет параметр ожидания для вызова сервера *nx_udp_socket_receive*. Это формальный параметр, так как сокет использует обратный вызов для уведомления о получении от NetX Duo, поэтому, когда сервер DHCPv6 вызывает функцию receive, пакет уже поставлен в очередь. Значение по умолчанию — 1 секунда (1 * NX_IP_PERIODIC_RATE).

- **NX_DHCPV6_SERVER_DUID_TYPE**: определяет тип DUID сервера, который сервер включает во все сообщения клиентам. По умолчанию указываются канальный уровень и время (NX_DHCPV6_SERVER_DUID_TYPE_LINK_TIME).

- **NX_DHCPV6_SERVER_HW_TYPE**: определяет тип оборудования на канальном уровне DUID, а также параметры канального уровня и времени. Значение по умолчанию — NX_DHCPV6_SERVER_HARDWARE_TYPE_ETHERNET.

- **NX_DHCPV6_PREFERENCE_VALUE**: определяет значение предпочтения параметра в диапазоне от 0 до 255. Чем выше значение, тем выше предпочтение параметра DHCPv6 с тем же именем. Это указывает клиенту, какие предпочтительные параметры следует поместить в предложение для данного сервера, когда для назначения IP-адресов доступны несколько серверов DHCPv6. Значение 255 указывает клиенту выбрать данный сервер. Значение 0 указывает, что выбор остается за клиентом. Значение по умолчанию равно нулю.

- **NX_DHCPV6_MAX_OPTION_REQUEST_OPTIONS**: определяет максимальное число запросов параметров в запросе клиента, которые могут быть сохранены в записи клиента. По умолчанию используется значение 6.

- **NX_DHCPV6_DEFAULT_T1_TIME**: время в секундах, назначаемое сервером для аренды адреса клиентом, когда клиенту следует начать продление аренды своего IP-адреса. Значение по умолчанию — 2000 секунд.

- **NX_DHCPV6_DEFAULT_T2_TIME**: время в секундах, назначаемое сервером для аренды адреса клиентом, когда клиенту следует начать повторную привязку своего IP-адреса, если продлить аренду не удалось. Значение по умолчанию — 3000 секунд.

- **NX_DHCPV6_DEFAULT_PREFERRED_TIME**: определяет назначаемое сервером время (в секундах), по истечении которого аренда IP-адреса клиента считается устаревшей. Значение по умолчанию равно 2 * NX_DHCPV6_DEFAULT_T1_TIME.

- **NX_DHCPV6_DEFAULT_VALID_TIME**: этот параметр определяет срок действия в секундах, назначаемый сервером для аренды IP-адреса клиентом. По истечении этого времени IP-адрес клиента становится недопустимым. Значение по умолчанию равно 2 * NX_DHCPV6_DEFAULT_PREFERRED_TIME.

- **NX_DHCPV6_STATUS_MESSAGE_MAX**: определяет максимальный размер сообщения сервера в поле сообщения о параметре состояния. Значение по умолчанию — 100 байт.

- **NX_DHCPV6_MAX_LEASES**: определяет размер таблицы аренды IP-адресов сервера (например, максимальное число арендуемых IPv6-адресов, которое можно хранить). По умолчанию это значение равно 100.

- **NX_DHCPV6_MAX_CLIENTS**: определяет размер таблицы записей клиентов сервера (например, максимальное количество клиентов, которое может быть сохранено). Это значение должно быть меньше или равно значению NX_DHCPV6_MAX_LEASES. По умолчанию это значение равно 120.

- **NX_DHCPV6_PACKET_TIME_OUT**: определяет параметр ожидания (в тактах таймера) для сервера DHCPv6 при выделении пакетов. Значение по умолчанию равно 3 * NX_DHCPV6_SERVER_TICKS_PER_SECOND.

- **NX_DHCPV6_PACKET_RECEIVE_WAIT**: определяет параметр ожидания при вызове выделения пакетов в пуле пакетов сервера. Значение по умолчанию равно 3 * NX_DHCPV6_SERVER_TICKS_PER_SECOND, или 3 секунды.

- **NX_DHCPV6_PACKET_SIZE**: определяет полезные данные пакета в пуле пакетов сервера. Значение по умолчанию — 500 байт.

- **NX_DHCPV6_PACKET_POOL_SIZE**: определяет размер пула пакетов сервера для пакетов, которые будут выделяться сервером для отправки сообщений DHCPv6. Значение по умолчанию равно 10 * NX_DHCPV6_PACKET_SIZE.

- **NX_DHCPV6_TYPE_OF_SERVICE**: определяет тип службы для передачи пакетов UDP. По умолчанию имеет значение NX_IP_NORMAL.

- **NX_DHCPV6_FRAGMENT_OPTION**: определяет параметр фрагментирования сокетов сервера. По умолчанию имеет значение NX_DONT_FRAGMENT.

- **NX_DHCPV6_TIME_TO_LIVE**: указывает число маршрутизаторов, через которые может пройти передача пакетов DHCPv6 с сервера, прежде чем они будут удалены. Значение по умолчанию — 0x80.

- **NX_DHCPV6_QUEUE_DEPTH**: указывает число пакетов, которые могут храниться в очереди получения сокета UDP сервера, прежде чем NetX Duo начнет отклонять пакеты.