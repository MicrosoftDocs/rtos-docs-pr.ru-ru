---
title: Глава 2. Установка и использование ThreadX SMP для ОСРВ Azure
description: В этой главе описаны различные проблемы, связанные с установкой, настройкой и использованием высокопроизводительного ядра ThreadX SMP для ОСРВ Azure.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: cc352ebd7965c84c341d25dfa7bff2671dfb5e66
ms.sourcegitcommit: 60ad844b58639d88830f2660ab0c4ff86b92c10f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/07/2021
ms.locfileid: "106550258"
---
# <a name="chapter-2---installation--use-of-azure-rtos-threadx-smp"></a><span data-ttu-id="96107-103">Глава 2. Установка и использование ThreadX SMP для ОСРВ Azure</span><span class="sxs-lookup"><span data-stu-id="96107-103">Chapter 2 - Installation & Use of Azure RTOS ThreadX SMP</span></span>

<span data-ttu-id="96107-104">В этой главе описаны различные проблемы, связанные с установкой, настройкой и использованием высокопроизводительного ядра ThreadX SMP для ОСРВ Azure.</span><span class="sxs-lookup"><span data-stu-id="96107-104">This chapter contains a description of various issues related to installation, setup, and usage of the highperformance Azure RTOS ThreadX SMP kernel.</span></span>

## <a name="host-considerations"></a><span data-ttu-id="96107-105">Рекомендации по размещению</span><span class="sxs-lookup"><span data-stu-id="96107-105">Host Considerations</span></span>

<span data-ttu-id="96107-106">Встраиваемое программное обеспечение обычно разрабатывается на главных компьютерах Windows или Linux (UNIX).</span><span class="sxs-lookup"><span data-stu-id="96107-106">Embedded software is usually developed on Windows or Linux (Unix) host computers.</span></span> <span data-ttu-id="96107-107">После компиляции, связывания и размещения на главном компьютере приложение скачивается на целевое оборудование для выполнения.</span><span class="sxs-lookup"><span data-stu-id="96107-107">After the application is compiled, linked, and located on the host, it is downloaded to the target hardware for execution.</span></span>

<span data-ttu-id="96107-108">Как правило, скачивание на целевой объект запускается из отладчика средства разработки.</span><span class="sxs-lookup"><span data-stu-id="96107-108">Usually the target download is done from within the development tool debugger.</span></span> <span data-ttu-id="96107-109">После скачивания отладчик отвечает за управление выполнением на целевом объекте (запуск, остановка, точка останова и т. д.), а также за доступ к памяти и регистрам процессора.</span><span class="sxs-lookup"><span data-stu-id="96107-109">After download, the debugger is responsible for providing target execution control (go, halt, breakpoint, etc.) as well as access to memory and processor registers.</span></span>

<span data-ttu-id="96107-110">Большинство отладчиков инструментов разработки обмениваются данными с целевым оборудованием через подключения OCD (отладка на микросхеме), например JTAG (IEEE 1149.1) и BDM (режим фоновой отладки).</span><span class="sxs-lookup"><span data-stu-id="96107-110">Most development tool debuggers communicate with the target hardware via on-chip debug (OCD) connections such as JTAG (IEEE 1149.1) and Background Debug Mode (BDM).</span></span> <span data-ttu-id="96107-111">Кроме того, отладчики взаимодействуют с целевым оборудованием через подключения ICE (внутрисхемная эмуляция).</span><span class="sxs-lookup"><span data-stu-id="96107-111">Debuggers also communicate with target hardware through In-Circuit Emulation (ICE) connections.</span></span> <span data-ttu-id="96107-112">Подключения OCD и ICE обеспечивают надежную передачу данных с минимальным влиянием на резидентное ПО на целевом объекте.</span><span class="sxs-lookup"><span data-stu-id="96107-112">Both OCD and ICE connections provide robust solutions with minimal intrusion on the target resident software.</span></span>

<span data-ttu-id="96107-113">Как и в случае с ресурсами, используемыми на главном компьютере, исходный код для ThreadX SMP предоставляется в формате ASCII и требует около 1 МБ свободного пространства на жестком диске главного компьютера.</span><span class="sxs-lookup"><span data-stu-id="96107-113">As for resources used on the host, the source code for ThreadX SMP is delivered in ASCII format and requires approximately 1 MBytes of space on the host computer’s hard disk.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="96107-114">Дополнительные рекомендации и параметры системы узла см. в предоставленном файле **readme_threadx.txt**.</span><span class="sxs-lookup"><span data-stu-id="96107-114">Please review the supplied **readme_threadx.txt** file for additional host system considerations and options.</span></span>

## <a name="target-considerations"></a><span data-ttu-id="96107-115">Рекомендации по целевому оборудованию</span><span class="sxs-lookup"><span data-stu-id="96107-115">Target Considerations</span></span>

<span data-ttu-id="96107-116">ThreadX SMP требует от 2 до 20 КБ доступной только для чтения памяти в целевой системе.</span><span class="sxs-lookup"><span data-stu-id="96107-116">ThreadX SMP requires between 2 KBytes and 20 KBytes of Read Only Memory (ROM) on the target.</span></span> <span data-ttu-id="96107-117">Еще 1–2 КБ ОЗУ целевого объекта необходимо для стека системы ThreadX SMP и других глобальных структур данных.</span><span class="sxs-lookup"><span data-stu-id="96107-117">Another 1 to 2 KBytes of the target’s Random Access Memory (RAM) are required for the ThreadX SMP system stack and other global data structures.</span></span>

<span data-ttu-id="96107-118">Для использования функций, связанных с таймером, таких как время ожидания при вызовах службы, временной срез и таймеры приложений, базовое целевое оборудование должно предоставлять источник периодических прерываний.</span><span class="sxs-lookup"><span data-stu-id="96107-118">For timer-related functions like service call time-outs, time-slicing, and application timers to function, the underlying target hardware must provide a periodic interrupt source.</span></span> <span data-ttu-id="96107-119">Если процессор поддерживает такую возможность, ThreadX SMP использует ее.</span><span class="sxs-lookup"><span data-stu-id="96107-119">If the processor has this capability, it is utilized by ThreadX SMP.</span></span> <span data-ttu-id="96107-120">В противном случае, когда у целевого процессора нет возможности создавать периодические прерывания, их должно обеспечивать оборудование пользователя.</span><span class="sxs-lookup"><span data-stu-id="96107-120">Otherwise, if the target processor does not have the ability to generate a periodic interrupt, the user’s hardware must provide it.</span></span> <span data-ttu-id="96107-121">Установка и настройка прерываний по таймеру обычно выполняется в файле сборки ***tx_initialize_low_level*** из дистрибутива ThreadX SMP.</span><span class="sxs-lookup"><span data-stu-id="96107-121">Setup and configuration of the timer interrupt is typically located in the ***tx_initialize_low_level*** assembly file in the ThreadX SMP distribution.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="96107-122">ThreadX SMP работает, даже если источник периодических прерываний по таймеру недоступен.</span><span class="sxs-lookup"><span data-stu-id="96107-122">ThreadX SMP is still functional even if no periodic timer interrupt source is available.</span></span> <span data-ttu-id="96107-123">Однако ни одна из служб, связанных с таймером, работать не будет.</span><span class="sxs-lookup"><span data-stu-id="96107-123">However, none of the timer-related services are functional.</span></span> <span data-ttu-id="96107-124">Дополнительные рекомендации и параметры системы узла см. в предоставленном файле **readme_threadx.txt**.</span><span class="sxs-lookup"><span data-stu-id="96107-124">Please review the supplied **readme_threadx.txt** file for any additional host system considerations and/or options.</span></span>

## <a name="product-distribution"></a><span data-ttu-id="96107-125">Распространение продукта</span><span class="sxs-lookup"><span data-stu-id="96107-125">Product Distribution</span></span>

<span data-ttu-id="96107-126">Точное содержимое диска распространения зависит от целевого процессора, средств разработки и приобретенного пакета ThreadX SMP.</span><span class="sxs-lookup"><span data-stu-id="96107-126">The exact content of the distribution disk depends on the target processor, development tools, and the ThreadX SMP package purchased.</span></span> <span data-ttu-id="96107-127">Однако ниже приведен список ряда важных файлов, которые являются общими для большинства дистрибутивов.</span><span class="sxs-lookup"><span data-stu-id="96107-127">However, the following is a list of several important files that are common to most product distributions:</span></span>

### <a name="threadx_express_startuppdf"></a><span data-ttu-id="96107-128">ThreadX_Express_Startup.pdf</span><span class="sxs-lookup"><span data-stu-id="96107-128">ThreadX_Express_Startup.pdf</span></span>

<span data-ttu-id="96107-129">Этот PDF-файл содержит простую процедуру из четырех шагов для запуска ThreadX SMP на определенных целевых процессоре и плате и с использованием определенных средств разработки.</span><span class="sxs-lookup"><span data-stu-id="96107-129">This PDF provides a simple, four-step procedure to get ThreadX SMP running on a specific target processor/board and specific development tools.</span></span>

### <a name="readme_threadxtxt"></a><span data-ttu-id="96107-130">readme_threadx.txt</span><span class="sxs-lookup"><span data-stu-id="96107-130">readme_threadx.txt</span></span>

<span data-ttu-id="96107-131">Текстовый файл, содержащий сведения о порте ThreadX SMP, включая сведения о целевом процессоре и средствах разработки.</span><span class="sxs-lookup"><span data-stu-id="96107-131">Text file containing specific information about the ThreadX SMP port, including information about the target processor and the development tools.</span></span>

| <span data-ttu-id="96107-132">Инструмент</span><span class="sxs-lookup"><span data-stu-id="96107-132">Tool</span></span> | <span data-ttu-id="96107-133">Описание</span><span class="sxs-lookup"><span data-stu-id="96107-133">Description</span></span> |
| -------------- | ------------------------------------------------------------------------------------------------- |
| <span data-ttu-id="96107-134">**tx_api.h**</span><span class="sxs-lookup"><span data-stu-id="96107-134">**tx_api.h**</span></span>  | <span data-ttu-id="96107-135">Файл заголовка на C, содержащий все системные равенства, структуры данных и прототипы служб.</span><span class="sxs-lookup"><span data-stu-id="96107-135">C header file containing all system equates, data structures, and service prototypes.</span></span>             |
| <span data-ttu-id="96107-136">**tx_port.h**</span><span class="sxs-lookup"><span data-stu-id="96107-136">**tx_port.h**</span></span> | <span data-ttu-id="96107-137">Файл заголовка на C, содержащий все определения и структуры данных для средств разработки и целевой системы.</span><span class="sxs-lookup"><span data-stu-id="96107-137">C header file containing all development-tool and targetspecific data definitions and structures.</span></span> |
|<span data-ttu-id="96107-138">**demo_threadx.c**</span><span class="sxs-lookup"><span data-stu-id="96107-138">**demo_threadx.c**</span></span>| <span data-ttu-id="96107-139">Файл на C, содержащий небольшое демонстрационное приложение.</span><span class="sxs-lookup"><span data-stu-id="96107-139">C file containing a small demo application.</span></span>|
|<span data-ttu-id="96107-140">**tx.a (или tx.lib)**</span><span class="sxs-lookup"><span data-stu-id="96107-140">**tx.a (or tx.lib)**</span></span>| <span data-ttu-id="96107-141">Двоичная версия библиотеки ThreadX SMP на C, распространяемая со *стандартным* пакетом.</span><span class="sxs-lookup"><span data-stu-id="96107-141">Binary version of the ThreadX SMP C library that is distributed with the *standard* package.</span></span>|

> [!IMPORTANT]
> <span data-ttu-id="96107-142">Все имена файлов указаны в нижнем регистре.</span><span class="sxs-lookup"><span data-stu-id="96107-142">All file names are in lower-case.</span></span> <span data-ttu-id="96107-143">Такое соглашение об именовании упрощает преобразование команд для платформ разработки Linux (UNIX).</span><span class="sxs-lookup"><span data-stu-id="96107-143">This naming convention makes it easier to convert the commands to Linux (Unix) development platforms.</span></span>

## <a name="threadx-smp-installation"></a><span data-ttu-id="96107-144">Установка ThreadX SMP</span><span class="sxs-lookup"><span data-stu-id="96107-144">ThreadX SMP Installation</span></span>

<span data-ttu-id="96107-145">Установка ThreadX SMP осуществляется просто.</span><span class="sxs-lookup"><span data-stu-id="96107-145">Installation of ThreadX SMP is straightforward.</span></span> <span data-ttu-id="96107-146">Сведения об установке ThreadX SMP в конкретной среде см. в файлах \***ThreadX_Express_Startup.pdf** _ и _ \*_readme_threadx.txt_\*\*.</span><span class="sxs-lookup"><span data-stu-id="96107-146">Refer to the ***ThreadX_Express_Startup.pdf** _ file and the _ *_readme_threadx.txt_** file for specific information on installing ThreadX SMP for your specific environment.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="96107-147">Обязательно создайте резервную копию диска с дистрибутивом ThreadX SMP и сохраните ее в надежном месте.</span><span class="sxs-lookup"><span data-stu-id="96107-147">Be sure to back up the ThreadX SMP distribution disk and store it in a safe location.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="96107-148">Программному обеспечению требуется доступ к файлу библиотеки ThreadX SMP (обычно это **tx.a** или **tx.lib**) и к включаемым файлам на C **tx_api.h** и **tx_port.h**.</span><span class="sxs-lookup"><span data-stu-id="96107-148">Application software needs access to the ThreadX SMP library file (usually **tx.a** or **tx.lib**) and the C include files **tx_api.h** and **tx_port.h**.</span></span> <span data-ttu-id="96107-149">Для этого задайте путь к файлам в средствах разработки или скопируйте файлы в область разработки приложения.</span><span class="sxs-lookup"><span data-stu-id="96107-149">This is accomplished either by setting the appropriate path for the development tools or by copying these files into the application development area.</span></span>

## <a name="using-threadx-smp"></a><span data-ttu-id="96107-150">Использование ThreadX SMP</span><span class="sxs-lookup"><span data-stu-id="96107-150">Using ThreadX SMP</span></span>

<span data-ttu-id="96107-151">Использовать ThreadX SMP очень просто.</span><span class="sxs-lookup"><span data-stu-id="96107-151">Using ThreadX SMP is easy.</span></span> <span data-ttu-id="96107-152">Код приложения должен включить файл ***tx_api.h** _ во время компиляции и компоноваться с библиотекой ThreadX SMP времени выполнения _*_tx.a_*_ (или _*_tx.lib)_ \*\*.</span><span class="sxs-lookup"><span data-stu-id="96107-152">Basically, the application code must include ***tx_api.h** _ during compilation and link with the ThreadX SMP run-time library _*_tx.a_*_ (or _*_tx.lib)_\*\*.</span></span>

<span data-ttu-id="96107-153">Для создания приложения ThreadX SMP необходимо выполнить четыре действия.</span><span class="sxs-lookup"><span data-stu-id="96107-153">There are four steps required to build a ThreadX SMP application:</span></span>

<span data-ttu-id="96107-154">Включите файл ***tx_api.h*** во все файлы приложения, которые используют службы или структуры данных ThreadX SMP.</span><span class="sxs-lookup"><span data-stu-id="96107-154">Include the ***tx_api.h*** file in all application files that use ThreadX SMP services or data structures.</span></span>

<span data-ttu-id="96107-155">Создайте стандартную функцию \***main** _на C.</span><span class="sxs-lookup"><span data-stu-id="96107-155">Create the standard C \***main** _ function.</span></span> <span data-ttu-id="96107-156">Эта функция должна в конце выполнения вызывать _ *_tx_kernel_enter_*\* для запуска ядра ThreadX SMP.</span><span class="sxs-lookup"><span data-stu-id="96107-156">This function must eventually call _ *_tx_kernel_enter_*\* to start ThreadX SMP.</span></span> <span data-ttu-id="96107-157">Перед входом в ядро допускается выполнить инициализацию конкретного приложения, которая не имеет отношения к ThreadX SMP.</span><span class="sxs-lookup"><span data-stu-id="96107-157">Application-specific initialization that does not involve ThreadX SMP may be added prior to entering the kernel.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="96107-158">Функция **tx_kernel_enter** для входа в ThreadX SMP не возвращает управление.</span><span class="sxs-lookup"><span data-stu-id="96107-158">The ThreadX SMP entry function **tx_kernel_enter** does not return.</span></span> <span data-ttu-id="96107-159">Поэтому не размещайте после нее никакие вызовы функций и процедуры вычислений.</span><span class="sxs-lookup"><span data-stu-id="96107-159">So be sure not to place any processing or function calls after it.</span></span>

<span data-ttu-id="96107-160">Создайте функцию ***tx_application_define***.</span><span class="sxs-lookup"><span data-stu-id="96107-160">Create the ***tx_application_define*** function.</span></span> <span data-ttu-id="96107-161">Именно здесь создаются исходные системные ресурсы.</span><span class="sxs-lookup"><span data-stu-id="96107-161">This is where the initial system resources are created.</span></span> <span data-ttu-id="96107-162">К таким системным ресурсам могут относиться потоки, очереди, пулы памяти, группы флагов событий, мьютексы и семафоры.</span><span class="sxs-lookup"><span data-stu-id="96107-162">Examples of system resources include threads, queues, memory pools, event flags groups, mutexes, and semaphores.</span></span>

<span data-ttu-id="96107-163">Скомпилируйте исходный код приложения и скомпонуйте его с библиотекой ThreadX SMP времени выполнения ***tx.lib***.</span><span class="sxs-lookup"><span data-stu-id="96107-163">Compile application source and link with the ThreadX SMP run-time library ***tx.lib***.</span></span> <span data-ttu-id="96107-164">Полученный образ можно скачать в целевую систему и запустить.</span><span class="sxs-lookup"><span data-stu-id="96107-164">The resulting image can be downloaded to the target and executed!</span></span>

## <a name="small-example-system"></a><span data-ttu-id="96107-165">Пример небольшой системы</span><span class="sxs-lookup"><span data-stu-id="96107-165">Small Example System</span></span>

<span data-ttu-id="96107-166">В небольшом примере системы, который представлен на рис. 1 на стр. 28, создается один поток с приоритетом 3.</span><span class="sxs-lookup"><span data-stu-id="96107-166">The small example system in Figure 1 on page 28 shows the creation of a single thread with a priority of 3.</span></span> <span data-ttu-id="96107-167">Этот поток выполняется и увеличивает значение счетчика, а затем переходит в спящий режим и остается в нем в течение такта длительностью в один час.</span><span class="sxs-lookup"><span data-stu-id="96107-167">The thread executes, increments a counter, then sleeps for one clock tick.</span></span> <span data-ttu-id="96107-168">Этот процесс повторяется неограниченно долго.</span><span class="sxs-lookup"><span data-stu-id="96107-168">This process continues forever.</span></span>

```c
#include              "tx_api.h"

unsigned long         my_thread_counter = 0;
TX_THREAD             my_thread;

main( )
{
      /* Enter the ThreadX SMP kernel. */
      tx_kernel_enter( );
}

void tx_application_define(void *first_unused_memory)
{

      /* Create my_thread! */
      tx_thread_create(&my_thread, "My Thread",
          my_thread_entry, 0x1234, first_unused_memory, 1024,
             3, 3, TX_NO_TIME_SLICE, TX_AUTO_START);
}

void my_thread_entry(ULONG thread_input)
{
      /* Enter into a forever loop. */
      while(1)
      {

            /* Increment thread counter. */
            my_thread_counter++;

            /* Sleep for 1 tick. */
            tx_thread_sleep(1);
      }
}
```
<span data-ttu-id="96107-169">**Рис. 1. Шаблон для разработки приложения**</span><span class="sxs-lookup"><span data-stu-id="96107-169">**FIGURE 1. Template for Application Development**</span></span>

<span data-ttu-id="96107-170">Это очень простой пример, но он предоставляет хороший шаблон для разработки реальных приложений.</span><span class="sxs-lookup"><span data-stu-id="96107-170">Although this is a simple example, it provides a good template for real application development.</span></span> <span data-ttu-id="96107-171">Дополнительные сведения также см. в файле ***readme_threadx.txt***.</span><span class="sxs-lookup"><span data-stu-id="96107-171">Once again, please see the ***readme_threadx.txt*** file for additional details.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="96107-172">Устранение неполадок</span><span class="sxs-lookup"><span data-stu-id="96107-172">Troubleshooting</span></span>

<span data-ttu-id="96107-173">Версии ThreadX SMP для любой системы включают демонстрационное приложение.</span><span class="sxs-lookup"><span data-stu-id="96107-173">Each ThreadX SMP port is delivered with a demonstration application.</span></span> <span data-ttu-id="96107-174">Мы рекомендуем всегда начинать с запуска этой демонстрационной системы как на реальном оборудовании, так и в имитированной среде.</span><span class="sxs-lookup"><span data-stu-id="96107-174">It is always a good idea to first get the demonstration system running—either on actual target hardware or simulated environment.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="96107-175">Более подробные сведения о демонстрационной системе см. в файле **readme_threadx.txt**, прилагаемом к дистрибутиву.</span><span class="sxs-lookup"><span data-stu-id="96107-175">See the **readme_threadx.txt** file supplied with the distribution for more specific details regarding the demonstration system.</span></span>

<span data-ttu-id="96107-176">Если демонстрационная система не работает должным образом, воспользуйтесь приведенными ниже советами по устранению неполадок.</span><span class="sxs-lookup"><span data-stu-id="96107-176">If the demonstration system does not execute properly, the following are some troubleshooting tips:</span></span>

  - <span data-ttu-id="96107-177">Определите, на каком этапе демонстрации возникает ошибка.</span><span class="sxs-lookup"><span data-stu-id="96107-177">Determine how much of the demonstration is run-ning.</span></span>

  - <span data-ttu-id="96107-178">Увеличьте размеры стека (это с большей вероятностью принесет пользу в фактическом коде приложения, чем в демонстрации).</span><span class="sxs-lookup"><span data-stu-id="96107-178">Increase stack sizes (this is more important in actual application code than it is for the demonstration).</span></span>

  - <span data-ttu-id="96107-179">Перестройте библиотеку ThreadX SMP, определив параметр TX_ENABLE_STACK_CHECKING.</span><span class="sxs-lookup"><span data-stu-id="96107-179">Rebuild the ThreadX SMP library with TX_ENABLE_STACK_CHECKING defined.</span></span> <span data-ttu-id="96107-180">Это позволит включить встроенную проверку стека ThreadX SMP.</span><span class="sxs-lookup"><span data-stu-id="96107-180">This will enable the built-in ThreadX SMP stack checking.</span></span>

  - <span data-ttu-id="96107-181">Временно отключите все недавно внесенные изменения и проверьте, сохраняется ли проблема и изменяется ли ее проявление.</span><span class="sxs-lookup"><span data-stu-id="96107-181">Temporarily bypass any recent changes to see if the problem disappears or changes.</span></span> <span data-ttu-id="96107-182">Такая информация будет полезной специалистам поддержки.</span><span class="sxs-lookup"><span data-stu-id="96107-182">Such information should prove useful to support engineers.</span></span>

<span data-ttu-id="96107-183">Выполните инструкции, приведенные в разделе "Что нам нужно" на стр. 12, чтобы отправить собранную информацию.</span><span class="sxs-lookup"><span data-stu-id="96107-183">Follow the procedures outlined in “What We Need From You” on page 12 to send the information gathered from the troubleshooting steps.</span></span>

## <a name="configuration-options"></a><span data-ttu-id="96107-184">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="96107-184">Configuration Options</span></span>

<span data-ttu-id="96107-185">При сборке библиотеки ThreadX SMP и приложения, использующего ThreadX SMP, можно применить несколько параметров конфигурации.</span><span class="sxs-lookup"><span data-stu-id="96107-185">There are several configuration options when building the ThreadX SMP library and the application using ThreadX SMP.</span></span> <span data-ttu-id="96107-186">Указанные ниже параметры можно определить в исходном коде приложения, в командной строке или во включаемом файле ***tx_user.h***.</span><span class="sxs-lookup"><span data-stu-id="96107-186">The options below can be defined in the application source, on the command line, or within the ***tx_user.h*** include file.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="96107-187">Параметры, определенные в файле **tx_user.h**, применяются только в случае сборки библиотеки ThreadX SMP с определенным параметром **TX_INCLUDE_USER_DEFINE_FILE**.</span><span class="sxs-lookup"><span data-stu-id="96107-187">Options defined in **tx_user.h** are applied only if the application and ThreadX SMP library are built with **TX_INCLUDE_USER_DEFINE_FILE** defined.</span></span>

### <a name="smallest-configuration"></a><span data-ttu-id="96107-188">Наименьшая конфигурация</span><span class="sxs-lookup"><span data-stu-id="96107-188">Smallest Configuration</span></span>
<span data-ttu-id="96107-189">Чтобы получить код наименьшего размера, попробуйте применить следующие параметры конфигурации ThreadX SMP (без всех остальных параметров).</span><span class="sxs-lookup"><span data-stu-id="96107-189">For the smallest code size, the following ThreadX SMP configuration options should be considered (in absence of all other options):</span></span>

- <span data-ttu-id="96107-190">TX_DISABLE_ERROR_CHECKING</span><span class="sxs-lookup"><span data-stu-id="96107-190">TX_DISABLE_ERROR_CHECKING</span></span>
- <span data-ttu-id="96107-191">TX_DISABLE_PREEMPTION_THRESHOLD</span><span class="sxs-lookup"><span data-stu-id="96107-191">TX_DISABLE_PREEMPTION_THRESHOLD</span></span>
- <span data-ttu-id="96107-192">TX_DISABLE_NOTIFY_CALLBACKS</span><span class="sxs-lookup"><span data-stu-id="96107-192">TX_DISABLE_NOTIFY_CALLBACKS</span></span> 
- <span data-ttu-id="96107-193">TX_DISABLE_REDUNDANT_CLEARING</span><span class="sxs-lookup"><span data-stu-id="96107-193">TX_DISABLE_REDUNDANT_CLEARING</span></span> 
- <span data-ttu-id="96107-194">TX_DISABLE_STACK_FILLING</span><span class="sxs-lookup"><span data-stu-id="96107-194">TX_DISABLE_STACK_FILLING</span></span> 
- <span data-ttu-id="96107-195">TX_NOT_INTERRUPTABLE</span><span class="sxs-lookup"><span data-stu-id="96107-195">TX_NOT_INTERRUPTABLE</span></span> 
- <span data-ttu-id="96107-196">TX_TIMER_PROCESS_IN_ISR</span><span class="sxs-lookup"><span data-stu-id="96107-196">TX_TIMER_PROCESS_IN_ISR</span></span>

### <a name="fastest-configuration"></a><span data-ttu-id="96107-197">Самая быстрая конфигурация</span><span class="sxs-lookup"><span data-stu-id="96107-197">Fastest Configuration</span></span> 
<span data-ttu-id="96107-198">Чтобы добиться наиболее быстрого выполнения, используйте те же параметры, что и для минимальной конфигурации, но с возможным добавлением следующего параметра.</span><span class="sxs-lookup"><span data-stu-id="96107-198">For the fastest execution, the same configuration options used for the Smallest Configuration previously, but with this option also considered:</span></span>

- <span data-ttu-id="96107-199">TX_REACTIVATE_INLINE</span><span class="sxs-lookup"><span data-stu-id="96107-199">TX_REACTIVATE_INLINE</span></span>

<span data-ttu-id="96107-200">Дополнительные параметры для своей версии ThreadX SMP см. в файле ***readme_threadx.txt***.</span><span class="sxs-lookup"><span data-stu-id="96107-200">Review the ***readme_threadx.txt*** file for additional options for your specific version of ThreadX SMP.</span></span> <span data-ttu-id="96107-201">Параметры конфигурации подробно описываются, начиная со страницы 28.</span><span class="sxs-lookup"><span data-stu-id="96107-201">Detailed configuration options are described beginning on page 28.</span></span>

### <a name="global-time-source"></a><span data-ttu-id="96107-202">Глобальный источник времени</span><span class="sxs-lookup"><span data-stu-id="96107-202">Global Time Source</span></span>  
<span data-ttu-id="96107-203">Для других продуктов ОСРВ Azure (FileX, NetX, GUIX,USBX и т. д.) ThreadX SMP вычисляет количество тактов таймера ThreadX SMP, которое соответствует одной секунде.</span><span class="sxs-lookup"><span data-stu-id="96107-203">For other Azure RTOS products (FileX, NetX, GUIX, USBX, etc.), ThreadX SMP defines the number of ThreadX SMP timer ticks that represents one second.</span></span> <span data-ttu-id="96107-204">Остальные службы определяют свои требования к времени на основе этой константы.</span><span class="sxs-lookup"><span data-stu-id="96107-204">Others derive their time requirements based on this constant.</span></span> <span data-ttu-id="96107-205">По умолчанию используется значение 100, то есть одно прерывание каждые 10 мс.</span><span class="sxs-lookup"><span data-stu-id="96107-205">By default, the value is 100, assuming a 10ms periodic interrupt.</span></span> <span data-ttu-id="96107-206">Пользователь может переопределить это значение, указав нужное значение параметра TX_TIMER_TICKS_PER_SECOND в файле ***tx_port.h***, в интегрированной среде разработки или в командной строке.</span><span class="sxs-lookup"><span data-stu-id="96107-206">The user may override this value by defining TX_TIMER_TICKS_PER_SECOND with the desired value in ***tx_port.h*** or within the IDE or command line.</span></span>

### <a name="detailed-configuration-options"></a><span data-ttu-id="96107-207">Подробное описание параметров конфигурации</span><span class="sxs-lookup"><span data-stu-id="96107-207">Detailed Configuration Options</span></span>

- <span data-ttu-id="96107-208">**TX_BLOCK_POOL_ENABLE_PERFORMANCE_INFO**. Если этот параметр определен, включается сбор сведений о производительности для пулов блоков.</span><span class="sxs-lookup"><span data-stu-id="96107-208">**TX_BLOCK_POOL_ENABLE_PERFORMANCE_INFO** : When defined, enables the gathering of performance information on block pools.</span></span> <span data-ttu-id="96107-209">По умолчанию этот параметр не определен.</span><span class="sxs-lookup"><span data-stu-id="96107-209">By default, this option is not defined.</span></span>
- <span data-ttu-id="96107-210">**TX_BYTE_POOL_ENABLE_PERFORMANCE_INFO**. Если этот параметр определен, включается сбор сведений о производительности для пулов байтов.</span><span class="sxs-lookup"><span data-stu-id="96107-210">**TX_BYTE_POOL_ENABLE_PERFORMANCE_INFO** : When defined, enables the gathering of performance information on byte pools.</span></span> <span data-ttu-id="96107-211">По умолчанию этот параметр не определен.</span><span class="sxs-lookup"><span data-stu-id="96107-211">By default, this option is not defined.</span></span>
- <span data-ttu-id="96107-212">**TX_DISABLE_ERROR_CHECKING**. Пропуск базовой проверки на предмет ошибок при вызове службы.</span><span class="sxs-lookup"><span data-stu-id="96107-212">**TX_DISABLE_ERROR_CHECKING**: Bypasses basic service call error checking.</span></span> <span data-ttu-id="96107-213">Если этот параметр определен в исходном коде приложения, отключаются все базовые проверки на предмет ошибок в параметрах.</span><span class="sxs-lookup"><span data-stu-id="96107-213">When defined in the application source, all basic parameter error checking is disabled.</span></span> <span data-ttu-id="96107-214">Это может повысить производительность на 30 % и уменьшить размер образа.</span><span class="sxs-lookup"><span data-stu-id="96107-214">This may improve performance by as much as 30% and may also reduce the image size.</span></span>

> [!NOTE]
> <span data-ttu-id="96107-215">*Проверку на предмет ошибок можно отключать, только если приложение полностью гарантирует допустимые значения всех входных параметров в любых обстоятельствах, в том числе для параметров, полученных из внешних источников. Если проверку на предмет ошибок отключить и в API будут переданы недопустимые входные данные, поведение системы будет неопределенным и может привести к повреждению памяти или аварийному завершению.*</span><span class="sxs-lookup"><span data-stu-id="96107-215">*It is only safe to disable error checking if the application can absolutely guarantee all input parameters are always valid under all circumstances, including input parameters derived from external input. If invalid input is supplied to the API with error checking disabled, the resulting behavior is undefined and could result in memory corruption or system crash.*</span></span>

> [!NOTE]
> <span data-ttu-id="96107-216">*Возвращаемые из API ThreadX SMP значения, на которые не влияет отключение проверки на предмет ошибок, выделены полужирным шрифтом в разделе "Возвращаемые значения" в описании каждого API в главе 4. Возвращаемые значения, не выделенные полужирным шрифтом, всегда будут пустыми, если проверка на предмет ошибок отключена при заданном параметре TX_DISABLE_ERROR_CHECKING.*</span><span class="sxs-lookup"><span data-stu-id="96107-216">*ThreadX SMP API return values not affected by disabling error checking are listed in bold in the “Return Values” section of each API description in Chapter 4. The nonbold return values are void if error checking is disabled by using the TX_DISABLE_ERROR_CHECKING option.*</span></span>
- <span data-ttu-id="96107-217">**TX_DISABLE_NOTIFY_CALLBACKS**. Если этот параметр определен, обратные вызовы оповещения для разных объектов ThreadX SMP отключаются.</span><span class="sxs-lookup"><span data-stu-id="96107-217">**TX_DISABLE_NOTIFY_CALLBACKS** : When defined, disables the notify callbacks for various ThreadX SMP objects.</span></span> <span data-ttu-id="96107-218">Использование этого параметра немного сокращает размер кода и повышает производительность.</span><span class="sxs-lookup"><span data-stu-id="96107-218">Using this option slightly reduces code size and improves performance.</span></span> <span data-ttu-id="96107-219">По умолчанию этот параметр не определен.</span><span class="sxs-lookup"><span data-stu-id="96107-219">By default, this option is not defined.</span></span>
- <span data-ttu-id="96107-220">**TX_DISABLE_PREEMPTION_THRESHOLD**. Если этот параметр определен, отключается функция проверки порога вытеснения, что немного уменьшает размер кода и повышает производительность.</span><span class="sxs-lookup"><span data-stu-id="96107-220">**TX_DISABLE_PREEMPTION_THRESHOLD** : When defined, disables the preemption-threshold feature and slightly reduces code size and improves performance.</span></span> <span data-ttu-id="96107-221">Разумеется, при этом становится недоступной проверка порога вытеснения.</span><span class="sxs-lookup"><span data-stu-id="96107-221">Of course, the preemptionthreshold capabilities are no longer available.</span></span> <span data-ttu-id="96107-222">По умолчанию этот параметр не определен.</span><span class="sxs-lookup"><span data-stu-id="96107-222">By default, this option is not defined.</span></span>
- <span data-ttu-id="96107-223">**TX_DISABLE_REDUNDANT_CLEARING**. Если этот параметр определен, удаляется логика инициализации с обнулением для глобальных структур данных C среды ThreadX SMP.</span><span class="sxs-lookup"><span data-stu-id="96107-223">**TX_DISABLE_REDUNDANT_CLEARING** : When defined, removes the logic for initializing ThreadX SMP global C data structures to zero.</span></span> <span data-ttu-id="96107-224">Этот параметр следует использовать, только если код инициализации компилятора устанавливает значение 0 для всех неинициализированных глобальных данных C.</span><span class="sxs-lookup"><span data-stu-id="96107-224">This should only be used if the compiler’s initialization code sets all un-initialized C global data to zero.</span></span> <span data-ttu-id="96107-225">При использовании этого параметра немного сокращается размер кода и повышается производительность на этапе инициализации.</span><span class="sxs-lookup"><span data-stu-id="96107-225">Using this option slightly reduces code size and improves performance during initialization.</span></span> <span data-ttu-id="96107-226">По умолчанию этот параметр не определен.</span><span class="sxs-lookup"><span data-stu-id="96107-226">By default, this option is not defined.</span></span>
- <span data-ttu-id="96107-227">**TX_DISABLE_STACK_FILLING**. Если этот параметр определен, отключается присвоение значения 0xEF каждому байту стека каждого потока при его создании.</span><span class="sxs-lookup"><span data-stu-id="96107-227">**TX_DISABLE_STACK_FILLING** : When defined, disables placing the 0xEF value in each byte of each thread’s stack when created.</span></span> <span data-ttu-id="96107-228">По умолчанию этот параметр не определен.</span><span class="sxs-lookup"><span data-stu-id="96107-228">By default, this option is not defined.</span></span>
- <span data-ttu-id="96107-229">**TX_ENABLE_EVENT_TRACE**. Если этот параметр определен, ThreadX SMP включает код сбора событий для создания буфера трассировки TraceX.</span><span class="sxs-lookup"><span data-stu-id="96107-229">**TX_ENABLE_EVENT_TRACE** : When defined, ThreadX SMP enables the event gathering code for creating a TraceX trace buffer.</span></span> <span data-ttu-id="96107-230">Подробные сведения см. в руководстве пользователя TraceX.</span><span class="sxs-lookup"><span data-stu-id="96107-230">See the TraceX User Guide for more details.</span></span>
- <span data-ttu-id="96107-231">**TX_ENABLE_STACK_CHECKING**. Если этот параметр определен, включается проверка стека времени выполнения ThreadX SMP, в которую входит анализ объема использованного стека и изучение "ограждений" шаблона данных до и после области стека.</span><span class="sxs-lookup"><span data-stu-id="96107-231">**TX_ENABLE_STACK_CHECKING** : When defined, enables ThreadX SMP run-time stack checking, which includes analysis of how much stack has been used and examination of data pattern “fences” before and after the stack area.</span></span> <span data-ttu-id="96107-232">При обнаружении ошибки стека вызывается зарегистрированный обработчик ошибок стека приложений.</span><span class="sxs-lookup"><span data-stu-id="96107-232">If a stack error is detected, the registered application stack error handler is called.</span></span> <span data-ttu-id="96107-233">При использовании этого параметра немного увеличиваются затраты времени и размер кода.</span><span class="sxs-lookup"><span data-stu-id="96107-233">This option does result in slightly increased overhead and code size.</span></span> <span data-ttu-id="96107-234">Дополнительные сведения см. в описании функции API **_tx_- thread_stack_error_notify_** .</span><span class="sxs-lookup"><span data-stu-id="96107-234">Review the **_tx_- thread_stack_error_notify_** API for more information.</span></span> <span data-ttu-id="96107-235">По умолчанию этот параметр не определен.</span><span class="sxs-lookup"><span data-stu-id="96107-235">By default, this option is not defined.</span></span>
- <span data-ttu-id="96107-236">**TX_EVENT_FLAGS_ENABLE_PERFORMANCE_INFO**. Если этот параметр определен, включается сбор сведений о производительности для групп флагов событий.</span><span class="sxs-lookup"><span data-stu-id="96107-236">**TX_EVENT_FLAGS_ENABLE_PERFORMANCE_INFO** : When defined, enables the gathering of performance information on event flags groups.</span></span> <span data-ttu-id="96107-237">По умолчанию этот параметр не определен.</span><span class="sxs-lookup"><span data-stu-id="96107-237">By default, this option is not defined.</span></span>
- <span data-ttu-id="96107-238">**TX_INLINE_THREAD_RESUME_SUSPEND**. Если этот параметр определен, ThreadX SMP улучшает вызовы API **_tx_thread_resume_ *_ и _* _tx_thread_suspend_** путем применения встроенного кода.</span><span class="sxs-lookup"><span data-stu-id="96107-238">**TX_INLINE_THREAD_RESUME_SUSPEND** : When defined, ThreadX SMP improves the **_tx_thread_resume_*_ and _*_tx_thread_suspend_** API calls via in-line code.</span></span> <span data-ttu-id="96107-239">Это увеличивает размер кода, но повышает производительность для этих двух вызовов API.</span><span class="sxs-lookup"><span data-stu-id="96107-239">This increases code size but enhances performance of these two API calls.</span></span>
- <span data-ttu-id="96107-240">**TX_MAX_PRIORITIES**. Определяет уровни приоритета для ThreadX SMP.</span><span class="sxs-lookup"><span data-stu-id="96107-240">**TX_MAX_PRIORITIES** : Defines the priority levels for ThreadX SMP.</span></span> <span data-ttu-id="96107-241">Допускаются значения в диапазоне от 32 до 1024 (включительно), но строго кратные 32.</span><span class="sxs-lookup"><span data-stu-id="96107-241">Legal values range from 32 through 1024 (inclusive) and must be evenly divisible by 32.</span></span> <span data-ttu-id="96107-242">При увеличении числа поддерживаемых уровней приоритета увеличивается объем использования ОЗУ на 128 байт для каждой группы из 32 уровней приоритета.</span><span class="sxs-lookup"><span data-stu-id="96107-242">Increasing the number of priority levels supported increases the RAM usage by 128 bytes for every group of 32 priorities.</span></span> <span data-ttu-id="96107-243">Но это оказывает крайне несущественное влияние на производительность.</span><span class="sxs-lookup"><span data-stu-id="96107-243">However, there is only a negligible effect on performance.</span></span> <span data-ttu-id="96107-244">По умолчанию используются 32 уровня приоритета.</span><span class="sxs-lookup"><span data-stu-id="96107-244">By default, this value is set to 32 priority levels.</span></span>
- <span data-ttu-id="96107-245">**TX_MINIMUM_STACK**. Определяет минимальный размер стека (в байтах).</span><span class="sxs-lookup"><span data-stu-id="96107-245">**TX_MINIMUM_STACK** : Defines the minimum stack size (in bytes).</span></span> <span data-ttu-id="96107-246">Он используется для проверки на предмет ошибок при создании потоков.</span><span class="sxs-lookup"><span data-stu-id="96107-246">It is used for error checking when threads are created.</span></span> <span data-ttu-id="96107-247">Значение по умолчанию зависит от конкретной версии и определяется в файле **_tx_port.h_**.</span><span class="sxs-lookup"><span data-stu-id="96107-247">The default value is port-specific and is found in **_tx_port.h._**</span></span>
- <span data-ttu-id="96107-248">**TX_MISRA_ENABLE**. Если этот параметр определен, ThreadX SMP использует соглашения, совместимые с MISRA C.</span><span class="sxs-lookup"><span data-stu-id="96107-248">**TX_MISRA_ENABLE** : When defined, ThreadX SMP utilizes MISRA C compliant conventions.</span></span> <span data-ttu-id="96107-249">Дополнительные сведения см. в файле **_ThreadX_MISRA_Compliance.pdf_**.</span><span class="sxs-lookup"><span data-stu-id="96107-249">Refer to the **_ThreadX_MISRA_Compliance.pdf_** for details.</span></span>
- <span data-ttu-id="96107-250">**TX_MUTEX_ENABLE_PERFORMANCE_INFO**. Если этот параметр определен, включается сбор сведений о производительности для мьютексов.</span><span class="sxs-lookup"><span data-stu-id="96107-250">**TX_MUTEX_ENABLE_PERFORMANCE_INFO** : When defined, enables the gathering of performance information on mutexes.</span></span> <span data-ttu-id="96107-251">По умолчанию этот параметр не определен.</span><span class="sxs-lookup"><span data-stu-id="96107-251">By default, this option is not defined.</span></span>
- <span data-ttu-id="96107-252">**TX_NO_TIMER**. Если этот параметр определен, полностью отключается логика таймера ThreadX SMP.</span><span class="sxs-lookup"><span data-stu-id="96107-252">**TX_NO_TIMER** : When defined, the ThreadX SMP timer logic is completely disabled.</span></span> <span data-ttu-id="96107-253">Это полезно в тех случаях, когда функции таймера ThreadX SMP не используются (режим сна для потока, время ожидания ответов API, временной срез или таймеры приложений).</span><span class="sxs-lookup"><span data-stu-id="96107-253">This is useful in cases where the ThreadX SMP timer features (thread sleep, API timeouts, time-slicing, and application timers) are not utilized.</span></span>
- <span data-ttu-id="96107-254">**TX_NOT_INTERRUPTABLE**. Если этот параметр определен, ThreadX SMP не пытается сокращать время блокировки прерываний.</span><span class="sxs-lookup"><span data-stu-id="96107-254">**TX_NOT_INTERRUPTABLE** : When defined, ThreadX SMP does not attempt to minimize interrupt lockout time.</span></span> <span data-ttu-id="96107-255">Это приводит к ускорению выполнения, но немного увеличивает время блокировки прерываний.</span><span class="sxs-lookup"><span data-stu-id="96107-255">This results in faster execution but does slightly increase interrupt lockout time.</span></span>
- <span data-ttu-id="96107-256">**TX_QUEUE_ENABLE_PERFORMANCE_INFO**. Если этот параметр определен, включается сбор сведений о производительности для очередей.</span><span class="sxs-lookup"><span data-stu-id="96107-256">**TX_QUEUE_ENABLE_PERFORMANCE_INFO** : When defined, enables the gathering of performance information on queues.</span></span> <span data-ttu-id="96107-257">По умолчанию этот параметр не определен.</span><span class="sxs-lookup"><span data-stu-id="96107-257">By default, this option is not defined.</span></span>
- <span data-ttu-id="96107-258">**TX_REACTIVATE_INLINE**. Если этот параметр определен, повторная активация встроенных таймеров ThreadX SMP выполняется во встроенном коде, без вызова функции.</span><span class="sxs-lookup"><span data-stu-id="96107-258">**TX_REACTIVATE_INLINE** : When defined, performs reactivation of ThreadX SMP timers in-line instead of using a function call.</span></span> <span data-ttu-id="96107-259">Это повышает производительность, но немного увеличивает размер кода.</span><span class="sxs-lookup"><span data-stu-id="96107-259">This improves performance but slightly increases code size.</span></span> <span data-ttu-id="96107-260">По умолчанию этот параметр не определен.</span><span class="sxs-lookup"><span data-stu-id="96107-260">By default, this option is not defined.</span></span>
- <span data-ttu-id="96107-261">**TX_SEMAPHORE_ENABLE_PERFORMANCE_INFO**. Если этот параметр определен, включается сбор сведений о производительности для семафоров.</span><span class="sxs-lookup"><span data-stu-id="96107-261">**TX_SEMAPHORE_ENABLE_PERFORMANCE_INFO** : When defined, enables the gathering of performance information on semaphores.</span></span> <span data-ttu-id="96107-262">По умолчанию этот параметр не определен.</span><span class="sxs-lookup"><span data-stu-id="96107-262">By default, this option is not defined.</span></span>
- <span data-ttu-id="96107-263">**TX_THREAD_ENABLE_PERFORMANCE_INFO**. Если этот параметр определен, включается сбор сведений о производительности для потоков.</span><span class="sxs-lookup"><span data-stu-id="96107-263">**TX_THREAD_ENABLE_PERFORMANCE_INFO** : When defined, enables the gathering of performance information on threads.</span></span> <span data-ttu-id="96107-264">По умолчанию этот параметр не определен.</span><span class="sxs-lookup"><span data-stu-id="96107-264">By default, this option is not defined.</span></span>
- <span data-ttu-id="96107-265">**TX_THREAD_SMP_CORE_MASK**. Определяет битовую маску сопоставления для исключения CORE.</span><span class="sxs-lookup"><span data-stu-id="96107-265">**TX_THREAD_SMP_CORE_MASK** : Defines bit map mask for CORE exclusion.</span></span> <span data-ttu-id="96107-266">Например, 4-ядерная среда имеет значение 0xF для этого определения.</span><span class="sxs-lookup"><span data-stu-id="96107-266">For example, a 4-core environment has a value of 0xF for this define.</span></span>
- <span data-ttu-id="96107-267">**TX_THREAD_SMP_DEBUG_ENABLE**. Если этот параметр определен, сведения об отладке ThreadX SMP сохраняются в циклическом буфере.</span><span class="sxs-lookup"><span data-stu-id="96107-267">**TX_THREAD_SMP_DEBUG_ENABLE** : When defined, ThreadX SMP debug information is saved in a circular buffer.</span></span>
- <span data-ttu-id="96107-268">**TX_THREAD_SMP_DYNAMIC_CORE_MAX**. Если этот параметр определен, включается динамическое максимальное число ядер, которое может корректироваться во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="96107-268">**TX_THREAD_SMP_DYNAMIC_CORE_MAX** : When defined, enables the dynamic maximum number of cores that can be adjusted at run-time.</span></span>
- <span data-ttu-id="96107-269">**TX_THREAD_SMP_EQUAL_PRIORITY**. Если этот параметр определен, ThreadX SMP планирует параллельное выполнение потоков только с одинаковым приоритетом.</span><span class="sxs-lookup"><span data-stu-id="96107-269">**TX_THREAD_SMP_EQUAL_PRIORITY** : When defined, ThreadX SMP only schedules equal priority threads in parallel.</span></span> <span data-ttu-id="96107-270">Он должен быть определен до создания библиотеки ThreadX SMP.</span><span class="sxs-lookup"><span data-stu-id="96107-270">This should be defined prior to building the ThreadX SMP library.</span></span>
- <span data-ttu-id="96107-271">**TX_THREAD_SMP_INTER_CORE_INTERRUPT**. Если этот параметр определен, ThreadX SMP создает межъядерные прерывания.</span><span class="sxs-lookup"><span data-stu-id="96107-271">**TX_THREAD_SMP_INTER_CORE_INTERRUPT** : When defined, ThreadX SMP generates inter-core interrupts.</span></span>
- <span data-ttu-id="96107-272">**TX_THREAD_SMP_MAX_CORES**. Определяет максимальное число ядер.</span><span class="sxs-lookup"><span data-stu-id="96107-272">**TX_THREAD_SMP_MAX_CORES** : Defines the maximum number of cores.</span></span>
- <span data-ttu-id="96107-273">**TX_THREAD_SMP_ONLY_CORE_0_DEFAULT**. Если этот параметр определен, ThreadX SMP по умолчанию выполняет все потоки и таймеры только в ядре 0.</span><span class="sxs-lookup"><span data-stu-id="96107-273">**TX_THREAD_SMP_ONLY_CORE_0_DEFAULT** : When defined, ThreadX SMP defaults all threads and timers to execute only on core 0 by default.</span></span> <span data-ttu-id="96107-274">Приложение может переопределить это поведение, вызвав интерфейсы API исключения ядер.</span><span class="sxs-lookup"><span data-stu-id="96107-274">The application may override this by calling the core exclude APIs.</span></span> <span data-ttu-id="96107-275">Он должен быть определен до создания библиотеки ThreadX SMP.</span><span class="sxs-lookup"><span data-stu-id="96107-275">This should be defined prior to building the ThreadX SMP library.</span></span>
- <span data-ttu-id="96107-276">**TX_THREAD_SMP_WAKEUP_LOGIC**. Если этот параметр определен, запускается макрос приложения для пробуждения ядра i.</span><span class="sxs-lookup"><span data-stu-id="96107-276">**TX_THREAD_SMP_WAKEUP_LOGIC** : When defined, application macro to wakeup core "i" is invoked.</span></span> <span data-ttu-id="96107-277">Должен быть определен до включения **_tx_port.h_**.</span><span class="sxs-lookup"><span data-stu-id="96107-277">This should be defined prior to inclusion of **_tx_port.h._**</span></span>
- <span data-ttu-id="96107-278">**TX_THREAD_SMP_WAKEUP(i)** . Определяет макрос приложения для пробуждения ядра i.</span><span class="sxs-lookup"><span data-stu-id="96107-278">**TX_THREAD_SMP_WAKEUP(i)** : Defines an application macro to wakeup core "i".</span></span> <span data-ttu-id="96107-279">Должен быть определен до включения **_tx_port.h_**.</span><span class="sxs-lookup"><span data-stu-id="96107-279">This should be defined prior to inclusion of **_tx_port.h._**</span></span>
- <span data-ttu-id="96107-280">**TX_TIMER_ENABLE_PERFORMANCE_INFO**. Если этот параметр определен, включается сбор сведений о производительности для таймеров.</span><span class="sxs-lookup"><span data-stu-id="96107-280">**TX_TIMER_ENABLE_PERFORMANCE_INFO** : When defined, enables the gathering of performance information on timers.</span></span> <span data-ttu-id="96107-281">По умолчанию этот параметр не определен.</span><span class="sxs-lookup"><span data-stu-id="96107-281">By default, this option is not defined.</span></span>
- <span data-ttu-id="96107-282">**TX_TIMER_PROCESS_IN_ISR**. Если этот параметр определен, из ThreadX SMP удаляется внутренний поток системного таймера.</span><span class="sxs-lookup"><span data-stu-id="96107-282">**TX_TIMER_PROCESS_IN_ISR** : When defined, eliminates the internal system timer thread for ThreadX SMP.</span></span> <span data-ttu-id="96107-283">Это приводит к повышению производительности событий таймера и уменьшению объема требований к ОЗУ, так как стек таймера и блок управления становятся не нужны.</span><span class="sxs-lookup"><span data-stu-id="96107-283">This results in improved performance on timer events and smaller RAM requirements because the timer stack and control block are no longer needed.</span></span> <span data-ttu-id="96107-284">Но при использовании этого параметра вся обработка периодов для таймера переносится на уровень таймера ISR.</span><span class="sxs-lookup"><span data-stu-id="96107-284">However, using this option moves all the timer expiration processing to the timer ISR level.</span></span> <span data-ttu-id="96107-285">По умолчанию этот параметр не определен.</span><span class="sxs-lookup"><span data-stu-id="96107-285">By default, this option is not defined.</span></span>

    > [!NOTE]
    > <span data-ttu-id="96107-286">Службы, разрешенные в таймерах, могут быть запрещены в ISR, а значит, они не смогут работать при использовании этого параметра.</span><span class="sxs-lookup"><span data-stu-id="96107-286">That services allowed from timers may not be allowed from ISRs and thus might not be allowed when using this option.</span></span>

- <span data-ttu-id="96107-287">**TX_TIMER_THREAD_PRIORITY**. Определяет приоритет для внутреннего потока системного таймера ThreadX SMP.</span><span class="sxs-lookup"><span data-stu-id="96107-287">**TX_TIMER_THREAD_PRIORITY** : Defines the priority of the internal ThreadX SMP system timer thread.</span></span> <span data-ttu-id="96107-288">По умолчанию используется приоритет 0, то есть максимальный возможный приоритет в ThreadX SMP.</span><span class="sxs-lookup"><span data-stu-id="96107-288">The default value is priority 0—the highest priority in ThreadX SMP.</span></span> <span data-ttu-id="96107-289">Значение по умолчанию определяется в файле **_tx_port.h_**.</span><span class="sxs-lookup"><span data-stu-id="96107-289">The default value is defined in **_tx_port.h._**</span></span>
- <span data-ttu-id="96107-290">**TX_TIMER_THREAD_STACK_SIZE**. Определяет размер стека (в байтах) для внутреннего потока системного таймера ThreadX SMP.</span><span class="sxs-lookup"><span data-stu-id="96107-290">**TX_TIMER_THREAD_STACK_SIZE** : Defines the stack size (in bytes) of the internal ThreadX SMP system timer thread.</span></span> <span data-ttu-id="96107-291">Этот поток обрабатывает все запросы спящего режима и периоды ожидания для вызовов служб.</span><span class="sxs-lookup"><span data-stu-id="96107-291">This thread processes all thread sleep requests as well as all service call timeouts.</span></span> <span data-ttu-id="96107-292">Кроме того, из этого контекста вызываются все подпрограммы обратного вызова таймера приложений.</span><span class="sxs-lookup"><span data-stu-id="96107-292">In addition, all application timer callback routines are invoked from this context.</span></span> <span data-ttu-id="96107-293">Значение по умолчанию зависит от конкретной версии и определяется в файле **_tx_port.h_**.</span><span class="sxs-lookup"><span data-stu-id="96107-293">The default value is port-specific and is found in **_tx_port.h._**</span></span>

## <a name="threadx-smp-version-id"></a><span data-ttu-id="96107-294">Идентификатор версии ThreadX SMP</span><span class="sxs-lookup"><span data-stu-id="96107-294">ThreadX SMP Version ID</span></span>

<span data-ttu-id="96107-295">Идентификатор версии ThreadX SMP можно найти в файле \***readme_threadx.txt** _.</span><span class="sxs-lookup"><span data-stu-id="96107-295">The ThreadX SMP version ID can be found in the \***readme_threadx.txt** _ file.</span></span> <span data-ttu-id="96107-296">Кроме того, этот файл содержит журнал версий для соответствующей платформы.</span><span class="sxs-lookup"><span data-stu-id="96107-296">This file also contains a version history of the corresponding port.</span></span> <span data-ttu-id="96107-297">Программное обеспечение приложения может получить сведения о версии ThreadX SMP из глобальной строки _ \*_ _tx_version_id_\*\*.</span><span class="sxs-lookup"><span data-stu-id="96107-297">Application software can obtain the ThreadX SMP version by examining the global string _ *_ _tx_version_id._*\*</span></span>