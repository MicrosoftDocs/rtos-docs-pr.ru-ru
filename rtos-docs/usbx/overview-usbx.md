---
title: Основные сведения о USBX в ОСРВ Azure
description: USBX в ОСРВ Azure — это высокопроизводительный узел USB, устройство и встроенный стек оперативных средств (OTG). USBX в ОСРВ Azure полностью интегрирован с ThreadX в ОСРВ Azure и доступен для всех процессоров, поддерживаемых ThreadX в ОСРВ Azure.
author: philmea
ms.author: philmea
ms.date: 5/19/2020
ms.service: rtos
ms.topic: overview
ms.openlocfilehash: 8950e7573bf705feb16de6ac1adb5f55559ea4b04b453944c5a24baddc6ae7b9
ms.sourcegitcommit: 93d716cf7e3d735b18246d659ec9ec7f82c336de
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/07/2021
ms.locfileid: "116791454"
---
# <a name="overview-of-azure-rtos-usbx"></a>Общие сведения о USBX в ОСРВ Azure

USBX в ОСРВ Azure — это высокопроизводительный USB-узел, устройство и встроенный стек оперативных средств (OTG). Узел USBX в ОСРВ Azure полностью интегрирован с ThreadX в ОСРВ Azure и доступен для всех процессоров, поддерживаемых ThreadX. Как и ThreadX, USBX в ОСРВ Azure использует небольшой объем памяти и работает с высокой производительностью. Это делает решение идеальным для современных глубоко внедренных приложений, которым требуется интерфейс с устройствами USB.

## <a name="host-device-otg--extensive-class-support"></a>Узел, устройство, OTG и обширная поддержка классов

Встроенный стек протокола USB для узла или устройства USBX в ОСРВ Azure — это встроенное USB-решение промышленного уровня, разработанное специально для глубоко встраиваемых приложений, работающих в реальном времени, и приложений Интернета вещей. USBX в ОСРВ Azure предоставляет поддержку узла, устройства и OTG, а также обширную поддержку классов. USBX в ОСРВ Azure полностью интегрирован с высокопроизводительной, многозадачной операционной системой реального времени ThreadX, встроенной файловой системой FileX в ОСРВ Azure, совместимой с FAT, и встроенными стеками TCP/IP NetX в ОСРВ Azure и NetX Duo в Azure RTOS. В сочетании с небольшими требованиями к ресурсам, высокой производительностью и непревзойденной простотой использования USBX в Azure RTOS является идеальным выбором при использовании внедренных приложений Интернета вещей, для которых требуется подключение USB.

### <a name="usbx-memory-footprint"></a>Объем памяти USBX

USBX в ОСРВ Azure занимает минимальный объем памяти: 10,5 КБ и 5,1 КБ ОЗУ для поддержки CDC-ACM USB-устройств USBX в ОСРВ Azure. Для поддержки CDC-ACM на узле USBX в ОСРВ Azure требуется не менее 18 КБ памяти и 25 КБ ОЗУ.

Для функций TCP требуются дополнительно 10–13 КБ памяти области инструкций. USBX в ОСРВ Azure обычно занимает в ОЗУ от 2,6 до 3,6 КБ, а также некоторый объем памяти пула пакетов, который определяется приложением.

Как и в случае с ThreadX, размер USBX в Azure RTOS масштабируется автоматически в зависимости от служб, фактически применяемых приложением. Это практически полностью устраняет потребность в сложной настройке и параметрах сборки, что упрощает работу разработчика.

### <a name="usb-interoperability-verification"></a>Подтвержденная совместимость с USB

Стек устройств USBX в Azure RTOS был тщательно протестирован с помощью стандартного средства тестирования USB-IF USBCV, чтобы гарантировать полное соответствие спецификациям USB и совместимость с различными системами размещения.
Кроме того, стек OTG для USBX в Azure RTOS был проверен и сертифицирован независимой тестовой лабораторией Allion в Тайване.

### <a name="usb-host-controller-support"></a>Поддержка контроллера узла USB

USBX в Azure RTOS поддерживает основные стандарты USB, такие как OHCI и EHCI. Кроме того, USBX в Azure RTOS поддерживает частные дискретные USB-контроллеры от Atmel, Microchip, Philips, Renesas, ST, TI и других поставщиков. USBX в Azure RTOS также поддерживает несколько контроллеров узлов в одном приложении.
Поддержка контроллеров USB-устройств USBX в Azure RTOS применима к популярным контроллерам USB-устройств от Analog Devices, Atmel, Microchip, NXP, Philips, Renesas, ST, TI и других поставщиков.

### <a name="extensive-host-class-support"></a>Поддержка классов с широкими возможностями размещения

Узел USBX в Azure RTOS обеспечивает поддержку большинства популярных классов, включая ASIX, AUDIO, CDC-ACM, CDC-ECM, GSER, HID (клавиатура, мышь и удаленное управление), HUB, PIMA (PTP-MTP), PRINTER, PROLIFIC и STORAGE.

### <a name="extensive-usb-device-class-support"></a>Поддержка классов USB-устройств с широкими возможностями

Устройство USBX в Azure RTOS обеспечивает поддержку большинства популярных классов, включая CDC-ACM, CDC-ECM, DFU, HID, PIMA (PTP-MTP) (w/MTP), RNDIS и STORAGE. Кроме того, доступна поддержка пользовательских классов.

### <a name="pictbridge-support"></a>Поддержка Pictbridge

USBX в Azure RTOS поддерживает полную реализацию PictBridge как на узле, так и на устройстве. PictBridge располагается поверх класса PIMA (PTP/MTP) USBX в Azure RTOS для обеих сторон. Стандарты PictBridge обеспечивают подключение цифровой фотокамеры или смартфона непосредственно к принтеру, без компьютера в качестве посредника, и позволяют напрямую выполнять печать на принтерах, поддерживающих этот стандарт PictBridge. Когда камера или телефон подключаются к принтеру, этот принтер является USB-узлом, а камера — USB-устройством. Но при работе с PictBridge камера отображается как узел и управляет командами для печати. Камера является сервером хранилища, а принтер выполняет роль клиента хранилища. С другой стороны, принтер является сервером печати, а камера подключается к нему как клиент. PictBridge использует транспортный уровень USB и протокол связи PTP (протокол передачи изображений).

### <a name="custom-class-support"></a>Поддержка пользовательских классов

Узел и устройство USBX в Azure RTOS поддерживают пользовательские классы. Пример пользовательского класса приведен в дистрибутиве USBX в Azure RTOS. Этот простой класс генератора данных называется DPUMP и может использоваться в качестве модели для пользовательских классов приложений.
Усовершенствованные технологии узла и устройства USBX в Azure RTOS поддерживают пользовательские классы. Пример пользовательского класса приведен в дистрибутиве USBX в Azure RTOS. USBX в ОСРВ Azure — эта передовая технология, включающая следующее:

* Поддержка узла, устройства и OTG.
* Поддержка USB Low-Speed, Full-Speed и Super-Speed.
* Автоматическое масштабирование
* Полная интеграция с ThreadX, FileX в ОСРВ Azure и NetX в ОСРВ Azure.
* Дополнительные метрики производительности.
* Поддержка системного анализа TraceX для ОСРВ Azure

## <a name="azure-rtos-usbx-apis"></a>API-интерфейсы USBX в ОСРВ Azure

### <a name="azure-rtos-usbx-host-api"></a>API узла USBX в ОСРВ Azure

API узла USBX в ОСРВ Azure — это интуитивно понятный и последовательный API, который следует соглашению об именовании с использованием конструкции "существительное — глагол". Названия всех интерфейсов API начинаются с fx_, благодаря чему легко установить их принадлежность к USBX. Блокирующие API поддерживают опциональное время ожидания потоков.

* ASIX
    - Всего 0,3 КБ занимаемой флэш-памяти, 4 КБ ОЗУ
    - Автоматическое масштабирование Трассировка на уровне системы через TraceX в ОСРВ Azure
    - Интуитивно понятные API узла USBX в ОСРВ Azure в этой форме: *ux_host_class_asix_* *
* AUDIO
    - Всего 1,2 КБ занимаемой флэш-памяти, 4 КБ ОЗУ
    - Автоматическое масштабирование
    - Интуитивно понятные API узла USBX в ОСРВ Azure в этой форме: *ux_host_class_audio_* *
* CDC-ACM
    - Всего 1,4 КБ занимаемой флэш-памяти, 4 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные API узла USBX в ОСРВ Azure в этой форме: *ux_host_class_cdc_acm_* *
* HID
    - Всего 0,3 КБ занимаемой флэш-памяти, 4 КБ ОЗУ
    - Поддержка клавиатуры, мыши и удаленного управления
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные API узла USBX в ОСРВ Azure в этой форме: *ux_host_class_hid_* * 
* Концентратор
    - Всего 1,7 КБ занимаемой флэш-памяти, 2 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные API узла USBX в ОСРВ Azure в этой форме: *ux_host_class_hub_* *
* PIMA (PTP/MTP)
    - Всего 0,9 КБ занимаемой флэш-памяти, 8 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API узла USBX в ОСРВ Azure в этой форме: *ux_host_class_pima_* *
* PRINTER
    - Всего 0,8 КБ занимаемой флэш-памяти, 8 КБ ОЗУ
    - Автоматическое масштабирование
    -  Трассировка на уровне системы через TraceX для ОСРВ Azure.
    -  Интуитивно понятные интерфейсы API узла USBX в ОСРВ Azure в этой форме: *ux_host_class_printer_* *
* PROLIFIC
    - Всего 1,5 КБ занимаемой флэш-памяти, 4 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API узла USBX в ОСРВ Azure в этой форме: *ux_host_class_prolific_* *
* STORAG
    - Всего 5,6 КБ занимаемой флэш-памяти, 4 КБ ОЗУ
    - Автоматическое масштабирование<br> Интеграция с FileX в ОСРВ Azure
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API узла USBX в ОСРВ Azure в этой форме: *ux_host_class_storage_* *
* Стек узлов USB
    - Поддерживает множество контроллеров узлов
    - Всего 18 КБ занимаемой флэш-памяти, 25 КБ ОЗУ
    - Автоматическое масштабирование
    - Поддержка нескольких контроллеров узлов на одной платформе
    -  Поддержка USB Low-Speed, Full-Speed и Super-Speed.
    -  Трассировка на уровне системы через TraceX для ОСРВ Azure.
    -  Интуитивно понятные интерфейсы API узла USBX в ОСРВ Azure в этой форме: *ux_host_stack_*  * 
* OHCI, EHCI и частные контроллеры узлов 

### <a name="azure-rtos-usbx-device-api"></a>API устройства USBX в ОСРВ Azure

API устройства USBX в ОСРВ Azure — это интуитивно понятный и последовательный API, который следует соглашению об именовании с использованием конструкции "существительное — глагол". Названия всех интерфейсов API начинаются с ux_device_*, благодаря чему легко установить их принадлежность к USBX. Блокирующие интерфейсы API поддерживают опциональное время ожидания потоков. Дополнительные сведения см. в [руководстве пользователя по узлу USBX в ОСРВ Azure](usbx-host-stack-about.md).

* CDC-ACM
    - Всего 0,8 КБ занимаемой флэш-памяти, 2 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API устройства USBX в ОСРВ Azure в этой форме: *ux_device_class_cdc_acm_**.
* CDC/ECM
    - Всего 1,5 КБ занимаемой флэш-памяти, 4–8 КБ в ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.<br> Интуитивно понятные интерфейсы API устройства USBX в ОСРВ Azure в этой форме: *ux_device_class_cdc_ecm_**.
* DFU
    - Всего 1,1 КБ занимаемой флэш-памяти, 2 КБ ОЗУ
    -  Автоматическое масштабирование
    -  Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API устройства USBX в ОСРВ Azure в этой форме: *ux_device_class_dfu_* * 
* GSER
    - Всего 0,6 КБ занимаемой флэш-памяти, 4 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API устройства USBX в ОСРВ Azure в этой форме: *ux_device_class_gser_* *
* HID
    - Всего 0,9 КБ занимаемой флэш-памяти, 2 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API устройства USBX в ОСРВ Azure в этой форме: *ux_device_class_hid_* * PIMA (PTP/MTP)
    - Всего 5,2 КБ занимаемой флэш-памяти, 8 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API устройства USBX в ОСРВ Azure в этой форме: *ux_device_class_pima_* * 
* STORAGE
    - Всего 2,3 КБ занимаемой флэш-памяти, 4 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API устройства USBX в ОСРВ Azure в этой форме: *ux_device_class_storage_* *
* RNDIS
    - Всего 2,3 КБ занимаемой флэш-памяти, 4–8 КБ в ОЗУ
    - Автоматическое масштабирование
    - Интеграция с NetX в ОСРВ Azure и NetX DUO в ОСРВ Azure
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API устройства USBX в ОСРВ Azure в этой форме: *ux_device_class_rndls_* *
* Стек устройств USBX в ОСРВ Azure
    - Всего 2,3 КБ занимаемой флэш-памяти, 4 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API устройства USBX в ОСРВ Azure в этой форме: *ux_device_class_storage_* *
* Частные контроллеры узлов

## <a name="next-steps"></a>Дальнейшие действия

Начните работу с узлом и стеком устройств USBX в ОСРВ Azure, следуя инструкциям, приведенным в статьях [Руководство пользователя по стеку узлов](usbx-host-stack-about.md) или [Руководство пользователя по стеку устройств](usbx-device-stack-about.md).