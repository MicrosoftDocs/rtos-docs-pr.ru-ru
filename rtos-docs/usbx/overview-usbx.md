---
title: Основные сведения о USBX в ОСРВ Azure
description: USBX в ОСРВ Azure — это высокопроизводительный узел USB, устройство и встроенный стек оперативных средств (OTG). USBX в ОСРВ Azure полностью интегрирован с ThreadX в ОСРВ Azure и доступен для всех процессоров, поддерживаемых ThreadX в ОСРВ Azure.
author: philmea
ms.author: philmea
ms.date: 5/19/2020
ms.service: rtos
ms.topic: overview
ms.openlocfilehash: 87eb6ee9f8733db3201280d377aa832b87131871
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "104816367"
---
# <a name="overview-of-azure-rtos-usbx"></a>Общие сведения о USBX в ОСРВ Azure

USBX в ОСРВ Azure — это высокопроизводительный USB-узел, устройство и встроенный стек оперативных средств (OTG). Узел USBX в ОСРВ Azure полностью интегрирован с ThreadX в ОСРВ Azure и доступен для всех процессоров, поддерживаемых ThreadX. Как и ThreadX, USBX в ОСРВ Azure использует небольшой объем памяти и работает с высокой производительностью. Это делает решение идеальным для современных глубоко внедренных приложений, которым требуется интерфейс с устройствами USB.

## <a name="host-device-otg--extensive-class-support"></a>Узел, устройство, OTG и обширная поддержка классов

Встроенный стек протокола USB для узла или устройства USBX в ОСРВ Azure — это встроенное USB-решение промышленного уровня, разработанное специально для глубоко встраиваемых приложений, работающих в реальном времени, и приложений Интернета вещей. USBX в ОСРВ Azure предоставляет поддержку узла, устройства и OTG, а также обширную поддержку классов. USBX в ОСРВ Azure полностью интегрирован с высокопроизводительной, многозадачной операционной системой реального времени ThreadX, встроенной файловой системой FileX в ОСРВ Azure, совместимой с FAT, и встроенными стеками TCP/IP NetX в ОСРВ Azure и NetX Duo в Azure RTOS. В сочетании с небольшими требованиями к ресурсам, высокой производительностью и непревзойденной простотой использования USBX в Azure RTOS является идеальным выбором при использовании внедренных приложений Интернета вещей, для которых требуется подключение USB.

### <a name="small-footprint"></a>Небольшой объем занимаемой памяти

USBX в ОСРВ Azure занимает минимальный объем памяти: 10,5 КБ и 5,1 КБ ОЗУ для поддержки CDC-ACM USB-устройств USBX в ОСРВ Azure. Для поддержки CDC-ACM на узле USBX в ОСРВ Azure требуется не менее 18 КБ памяти и 25 КБ ОЗУ.

Для функций TCP требуются дополнительно 10–13 КБ памяти области инструкций. USBX в ОСРВ Azure обычно занимает в ОЗУ от 2,6 до 3,6 КБ, а также некоторый объем памяти пула пакетов, который определяется приложением.

Как и в случае с ThreadX, размер USBX в Azure RTOS масштабируется автоматически в зависимости от служб, фактически применяемых приложением. Это практически полностью устраняет потребность в сложной настройке и параметрах сборки, что упрощает работу разработчика.

### <a name="fast-execution"></a>Быстрое выполнение

USBX в ОСРВ Azure предназначен для ускорения и обладает минимальными уровнями внутренних вызовов функций и поддержкой использования кэша и DMA. Благодаря этому, а также проекту, ориентированному на обеспечение высокого быстродействия, USBX в ОСРВ Azure способен достигать максимально высокого уровня производительности.

### <a name="simple-easy-to-use"></a>Простота использования

USBX в ОСРВ Azure очень легко использовать. API USBX в ОСРВ Azure предоставляет интуитивно простые, но широкие функции. Названия API состоят из реальных слов, а не из набора букв или сокращенных имен, которые так часто используются в других файловых системах. Все API-интерфейсы для USBX в Azure RTOS имеют префикс ux_ и соответствуют соглашению об именовании с использованием конструкции "существительное — глагол". Более того в рамках всего API обеспечивается функциональная согласованность. Например, для всех API, которые поддерживают приостановку работы, реализовано необязательное время ожидания, работающее одинаково.

### <a name="usb-interoperability-verification"></a>Подтвержденная совместимость с USB

Стек устройств USBX в Azure RTOS был тщательно протестирован с помощью стандартного средства тестирования USB-IF USBCV, чтобы гарантировать полное соответствие спецификациям USB и совместимость с различными системами размещения.
Кроме того, стек OTG для USBX в Azure RTOS был проверен и сертифицирован независимой тестовой лабораторией Allion в Тайване.

### <a name="usb-host-controller-support"></a>Поддержка контроллера узла USB

USBX в Azure RTOS поддерживает основные стандарты USB, такие как OHCI и EHCI. Кроме того, USBX в Azure RTOS поддерживает частные дискретные USB-контроллеры от Atmel, Microchip, Philips, Renesas, ST, TI и других поставщиков. USBX в Azure RTOS также поддерживает несколько контроллеров узлов в одном приложении.
Поддержка контроллеров USB-устройств USBX в Azure RTOS применима к популярным контроллерам USB-устройств от Analog Devices, Atmel, Microchip, NXP, Philips, Renesas, ST, TI и других поставщиков.

### <a name="extensive-host-class-support"></a>Поддержка классов с широкими возможностями размещения

Узел USBX в Azure RTOS обеспечивает поддержку большинства популярных классов, включая ASIX, AUDIO, CDC-ACM, CDC-ECM, GSER, HID (клавиатура, мышь и удаленное управление), HUB, PIMA (PTP-MTP), PRINTER, PROLIFIC и STORAGE.

### <a name="extensive-usb-device-class-support"></a>Поддержка классов USB-устройств с широкими возможностями

Устройство USBX в Azure RTOS обеспечивает поддержку большинства популярных классов, включая CDC-ACM, CDC-ECM, DFU, HID, PIMA (PTP-MTP) (w/MTP), RNDIS и STORAGE. Кроме того, доступна поддержка пользовательских классов.

### <a name="pictbridge-support"></a>Поддержка Pictbridge

USBX в Azure RTOS поддерживает полную реализацию PictBridge как на узле, так и на устройстве. PictBridge располагается поверх класса PIMA (PTP/MTP) USBX в Azure RTOS для обеих сторон. Стандарты PictBridge обеспечивают подключение цифровой фотокамеры или смартфона непосредственно к принтеру, без компьютера в качестве посредника, и позволяют напрямую выполнять печать на принтерах, поддерживающих этот стандарт PictBridge. Когда камера или телефон подключаются к принтеру, этот принтер является USB-узлом, а камера — USB-устройством. Но при работе с PictBridge камера отображается как узел и управляет командами для печати. Камера является сервером хранилища, а принтер выполняет роль клиента хранилища. С другой стороны, принтер является сервером печати, а камера подключается к нему как клиент. PictBridge использует транспортный уровень USB и протокол связи PTP (протокол передачи изображений).

### <a name="custom-class-support"></a>Поддержка пользовательских классов

Узел и устройство USBX в Azure RTOS поддерживают пользовательские классы. Пример пользовательского класса приведен в дистрибутиве USBX в Azure RTOS. Этот простой класс генератора данных называется DPUMP и может использоваться в качестве модели для пользовательских классов приложений.
Усовершенствованные технологии узла и устройства USBX в Azure RTOS поддерживают пользовательские классы. Пример пользовательского класса приведен в дистрибутиве USBX в Azure RTOS. USBX в ОСРВ Azure — эта передовая технология, включающая следующее:

* Поддержка узла, устройства и OTG.
* Поддержка USB Low-Speed, Full-Speed и Super-Speed.
* Автоматическое масштабирование
* Полная интеграция с ThreadX, FileX в ОСРВ Azure и NetX в ОСРВ Azure.
* Дополнительные метрики производительности.
* Поддержка системного анализа TraceX для ОСРВ Azure.

### <a name="fastest-time-to-market"></a>Минимальное время выхода на рынок

USBX в ОСРВ Azure занимает всего 9–15 КБ при базовой поддержке IP и UDP. USBX в ОСРВ Azure легко устанавливать, изучать, использовать, отлаживать, проверять, сертифицировать и обслуживать. В результате USBX в Azure RTOS является одним из наиболее популярных решений USB для внедренных устройств Интернета вещей. Наши возможности по стабильно малому времени выхода на рынок основаны на следующих факторах:

* документация высокого качества — ознакомьтесь с нашим руководством пользователя по работе с узлом и устройством USBX в ОСРВ Azure и убедитесь в этом сами;
* полная доступность исходного кода;
* простые в использовании API;
* комплексный и широкий набор функций.

## <a name="one-simple-license"></a>Одна простая лицензия

Использование и тестирование исходного кода не требуют каких-либо затрат, как и производственные лицензии при развертывании на предварительно лицензированных устройствах. Для всех других устройств требуется лишь простая лицензия сроком на один год.

## <a name="full-highest-quality-source-code"></a>Полный и высококачественный исходный код

Уже несколько лет ОСРВ Azure NetX задает стандарт качества и простоты понимания. Кроме того, соглашение по применению отдельного файла для каждой функции упрощает навигацию по исходному коду.

### <a name="supports-most-popular-architectures"></a>Поддержка большинства популярных архитектур

USBX в ОСРВ Azure работает на большинстве популярных 32/64-разрядных микропроцессоров. Он не требует дополнительной настройки, полностью протестирован и поддерживается на разных архитектурах, включая следующие:

* **Analog Devices**: SHARC, Blackfin, CM4xx;
* **Andes Core**: RISC-V;
* **Ambiqmicro**: микроконтроллеры Apollo;
* **ARM**: ARM7, ARM9, ARM11, Cortex-M0/M3/M4/M7/A15/A5/A7/A8/A9/A5x 64-bi/A7x 64-bit/R4/R5, TrustZone ARMv8-M;
* **Cadence**: Xtensa, Diamond;
* **CEVA**: PSoC, PSoC 4, PSoC 5, PSoC 6, FM0+, FM3, MF4, WICED WiFi;
* **Cypress**: RISC-V;
* **EnSilica**: eSi-RISC;
* **Infineon**: XMC1000, XMC4000, TriCore.
* **Intel и Intel FPGA**: x36/Pentium, XScale, NIOS II, Cyclone, Arria 10.
* **Microchip**: AVR32, ARM7, ARM9, Cortex-M3/M4/M7, SAM3/4/7/9/A/C/D/E/G/L/SV, PIC24/PIC32.
* **Microsemi**: RISC-V;
* **NXP**: LPC, ARM7, ARM9, PowerPC, 68 K, i.MX, ColdFire, Kinetis Cortex-M3/M4;
* **Renesas**: SH, HS, V850, RX, RZ, Synergy Silicon Labs: EFM32
* **Synopsys**: ARC 600, 700, ARC EM, ARC HS;
* **ST**: STM32, ARM7, ARM9, Cortex-M3/M4/M7;
* **Tl**: C5xxx, C6xxx, Stellaris, Sitara, Tiva-C;
* **Wave Computing**: MIPS32 4K, 24 K, 34 K, 1004 K, MIPS64 5K, microAptiv, interAptiv, proAptiv, M-Class **Xilinx**: MicroBlaze, PowerPC 405, ZYNQ, ZYNQ UltraSCALE.

## <a name="azure-rtos-usbx-apis"></a>API-интерфейсы USBX в ОСРВ Azure

### <a name="azure-rtos-usbx-host-api"></a>API узла USBX в ОСРВ Azure

API узла USBX в ОСРВ Azure — это интуитивно понятный и последовательный API, который следует соглашению об именовании с использованием конструкции "существительное — глагол". Названия всех интерфейсов API начинаются с fx_, благодаря чему легко установить их принадлежность к USBX. Блокирующие API поддерживают опциональное время ожидания потоков.

* ASIX
    - Всего 0,3 КБ занимаемой флэш-памяти, 4 КБ ОЗУ
    - Автоматическое масштабирование Трассировка на уровне системы через TraceX в ОСРВ Azure
    - Интуитивно понятные API узла USBX в ОСРВ Azure в этой форме: *ux_host_class_asix_* *
* AUDIO
    - Всего 1,2 КБ занимаемой флэш-памяти, 4 КБ ОЗУ
    - Автоматическое масштабирование
    - Интуитивно понятные API узла USBX в ОСРВ Azure в этой форме: *ux_host_class_audio_* *
* CDC-ACM
    - Всего 1,4 КБ занимаемой флэш-памяти, 4 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные API узла USBX в ОСРВ Azure в этой форме: *ux_host_class_cdc_acm_* *
* HID
    - Всего 0,3 КБ занимаемой флэш-памяти, 4 КБ ОЗУ
    - Поддержка клавиатуры, мыши и удаленного управления
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные API узла USBX в ОСРВ Azure в этой форме: *ux_host_class_hid_* * 
* Концентратор
    - Всего 1,7 КБ занимаемой флэш-памяти, 2 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные API узла USBX в ОСРВ Azure в этой форме: *ux_host_class_hub_* *
* PIMA (PTP/MTP)
    - Всего 0,9 КБ занимаемой флэш-памяти, 8 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API узла USBX в ОСРВ Azure в этой форме: *ux_host_class_pima_* *
* PRINTER
    - Всего 0,8 КБ занимаемой флэш-памяти, 8 КБ ОЗУ
    - Автоматическое масштабирование
    -  Трассировка на уровне системы через TraceX для ОСРВ Azure.
    -  Интуитивно понятные интерфейсы API узла USBX в ОСРВ Azure в этой форме: *ux_host_class_printer_* *
* PROLIFIC
    - Всего 1,5 КБ занимаемой флэш-памяти, 4 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API узла USBX в ОСРВ Azure в этой форме: *ux_host_class_prolific_* *
* STORAG
    - Всего 5,6 КБ занимаемой флэш-памяти, 4 КБ ОЗУ
    - Автоматическое масштабирование<br> Интеграция с FileX в ОСРВ Azure
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API узла USBX в ОСРВ Azure в этой форме: *ux_host_class_storage_* *
* Стек узлов USB
    - Поддерживает множество контроллеров узлов
    - Всего 18 КБ занимаемой флэш-памяти, 25 КБ ОЗУ
    - Автоматическое масштабирование
    - Поддержка нескольких контроллеров узлов на одной платформе
    -  Поддержка USB Low-Speed, Full-Speed и Super-Speed.
    -  Трассировка на уровне системы через TraceX для ОСРВ Azure.
    -  Интуитивно понятные интерфейсы API узла USBX в ОСРВ Azure в этой форме: *ux_host_stack_*  * 
* OHCI, EHCI и частные контроллеры узлов 

### <a name="azure-rtos-usbx-device-api"></a>API устройства USBX в ОСРВ Azure

API устройства USBX в ОСРВ Azure — это интуитивно понятный и последовательный API, который следует соглашению об именовании с использованием конструкции "существительное — глагол". Названия всех интерфейсов API начинаются с ux_device_*, благодаря чему легко установить их принадлежность к USBX. Блокирующие интерфейсы API поддерживают опциональное время ожидания потоков. Дополнительные сведения см. в [руководстве пользователя по узлу USBX в ОСРВ Azure](usbx-host-stack-about.md).

* CDC-ACM
    - Всего 0,8 КБ занимаемой флэш-памяти, 2 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API устройства USBX в ОСРВ Azure в этой форме: *ux_device_class_cdc_acm_**.
* CDC/ECM
    - Всего 1,5 КБ занимаемой флэш-памяти, 4–8 КБ в ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.<br> Интуитивно понятные интерфейсы API устройства USBX в ОСРВ Azure в этой форме: *ux_device_class_cdc_ecm_**.
* DFU
    - Всего 1,1 КБ занимаемой флэш-памяти, 2 КБ ОЗУ
    -  Автоматическое масштабирование
    -  Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API устройства USBX в ОСРВ Azure в этой форме: *ux_device_class_dfu_* * 
* GSER
    - Всего 0,6 КБ занимаемой флэш-памяти, 4 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API устройства USBX в ОСРВ Azure в этой форме: *ux_device_class_gser_* *
* HID
    - Всего 0,9 КБ занимаемой флэш-памяти, 2 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API устройства USBX в ОСРВ Azure в этой форме: *ux_device_class_hid_* * PIMA (PTP/MTP)
    - Всего 5,2 КБ занимаемой флэш-памяти, 8 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API устройства USBX в ОСРВ Azure в этой форме: *ux_device_class_pima_* * 
* STORAGE
    - Всего 2,3 КБ занимаемой флэш-памяти, 4 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API устройства USBX в ОСРВ Azure в этой форме: *ux_device_class_storage_* *
* RNDIS
    - Всего 2,3 КБ занимаемой флэш-памяти, 4–8 КБ в ОЗУ
    - Автоматическое масштабирование
    - Интеграция с NetX в ОСРВ Azure и NetX DUO в ОСРВ Azure
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API устройства USBX в ОСРВ Azure в этой форме: *ux_device_class_rndls_* *
* Стек устройств USBX в ОСРВ Azure
    - Всего 2,3 КБ занимаемой флэш-памяти, 4 КБ ОЗУ
    - Автоматическое масштабирование
    - Трассировка на уровне системы через TraceX для ОСРВ Azure.
    - Интуитивно понятные интерфейсы API устройства USBX в ОСРВ Azure в этой форме: *ux_device_class_storage_* *
* Частные контроллеры узлов

## <a name="next-steps"></a>Дальнейшие действия

Начните работу с узлом и стеком устройств USBX в ОСРВ Azure, следуя инструкциям, приведенным в статьях [Руководство пользователя по стеку узлов](usbx-host-stack-about.md) или [Руководство пользователя по стеку устройств](usbx-device-stack-about.md).