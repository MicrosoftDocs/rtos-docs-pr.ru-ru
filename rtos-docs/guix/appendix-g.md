---
title: Приложение Ж. Структура шрифта GUIX
description: Узнайте о структуре шрифта GUIX.
author: philmea
ms.author: philmea
ms.date: 05/19/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: b5f0232e6c21851014b85cfe7b07795062fd1e8d
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "104815564"
---
# <a name="appendix-g---guix-font-structure"></a>Приложение Ж. Структура шрифта GUIX

Шрифты GUIX обычно создаются приложением GUIX Studio, а глифы шрифтов отображаются драйвером дисплея GUIX. Программное обеспечение приложения должно указывать только шрифт и цвета, которые должны использоваться каждым мини-приложением с текстом. Структуры данных шрифтов GUIX описаны здесь для полноты информации. Это позволит разработчикам создавать собственные методы для формирования шрифтов или преобразования других шрифтов в формат шрифта GUIX.

Каждый шрифт GUIX начинается со структуры GX_FONT. Структура GX_FONT определяет глобальные параметры шрифта, такие как символ шрифта и высота строки шрифта. Структура GX_FONT указывает на массив структур GX_GLYPH. Каждая структура GX_GLYPH определяет ширину, высоту и смещение от базовой линии для определенного глифа символа. Структура GX_GLYPH также указывает на фактические данные растрового изображения глифа (которые могут иметь значение NULL для символов пробела).

Структура GX_FONT, содержащаяся в файле gx_api.h, объявляется следующим образом:

```c
typedef struct GX_FONT_STRUCT
{
    GX_UBYTE                     gx_font_format
    GX_UBYTE                     gx_font_prespace
    GX_UBYTE                     gx_font_postspace
    GX_UBYTE                     gx_font_line_height 
    GX_UBYTE                     gx_font_baseline
    USHORT                       gx_font_first_glyph
    USHORT                       gx_font_last_glyph 
    GX_CONST GX_GLYPH           *gx_font_glyphs
    const struct GX_FONT_STRUCT *gx_font_next_page
} GX_FONT;
```

Поле gx_font_format определяет число битов на пиксель для шрифта и другие флаги, определенные в файле заголовка gx_api.h.

Поле gx_font_prespace определяет пространство в пикселях, которое будет пропускаться над каждой строкой текста при многострочном отображении.

Поле gx_font_postspace определяет пространство в пикселях, которое будет пропускаться под каждой строкой текста при многострочном отображении.

Поле gx_font_line_height определяет высоту наиболее высокого глифа в шрифте.

Поле gx_font_baseline определяет расстояние (в пикселях) от верхней строки пикселей глифа до базовой линии шрифта.

Поле gx_font_first_glyph определяет кодировку первого символа Юникода, добавленного на эту страницу шрифтов.

Поле gx_font_last_glyph определяет кодировку последнего символа Юникода, добавленного на эту страницу шрифтов.

Указатель gx_font_glyphs указывает на массив структур GX_GLYPH. Размер этого массива должен быть равен числу символов, содержащихся на данной странице шрифтов, то есть: (gx_font_last_glyph – gx_font_first_glyph) + 1.

Элемент gx_font_next_page используется для многостраничных шрифтов. Многостраничные шрифты используются для расширенных кодировок и для оптимизации размера массивов структур GX_GLYPH. Если все символы шрифта содержатся на одной странице шрифтов или если это последняя страница рассматриваемого шрифта, то для элемента gx_font_next_page задается значение GX_NULL.

Как отмечалось ранее, приведенная выше структура GX_FONT содержит указатель на массив структур GX_GLYPHS. Для каждого символа на странице шрифтов должна существовать одна структура GX_GLYPH. Структура GX_GLYPH определяется следующим образом:

```c
typedef struct GX_GLYPH_STRUCT
{
    GX_CONST GX_UBYTE *gx_glyph_map;
    GX_BYTE            gx_glyph_ascent;
    GX_BYTE            gx_glyph_descent;
    GX_BYTE            gx_glyph_advance;
    GX_BYTE            gx_glyph_leading;
    GX_UBYTE           gx_glyph_width;
    GX_UBYTE           gx_glyph_height;
} GX_GLYPH;
```

Указатель gx_glyph_map указывает на растровое изображение глифа. Этот указатель может иметь значение GX_NULL для символов пробела. Данные растрового изображения кодируются с альфа-фактором 1 бит/пкс, 2 бит/пкс, 4 бит/пкс или 8 бит/пкс. Для 1-битных данных значение 1 указывает, что пиксель должен быть записан в цвете переднего плана, а значение 0 указывает, что пиксель прозрачный. Для 8-битных данных значения находятся в диапазоне от 0 (полностью прозрачный) до 255 (полностью непрозрачный). Все промежуточные значения представляют собой значение смешения для шрифтов со сглаживанием. Данные растровых изображений глифов всегда заполняются байтами до полного выравнивания для форматов, использующих значения данных с альфа-фактором меньше 8 бит/пкс.

Значения gx_glyph_ascent и gx_glyph_descent позволяют расположить глифа вертикально относительно базовой линии шрифта.

Значения gx_glyph_width и gx_glyph_height определяют размер данных растрового изображения глифа.

Значение gx_glyph_advance задает величину смещения в пикселях позиции отрисовки после отображения глифа (она может не совпадать с шириной глифа).

Значение gx_glyph_leading указывает смещение по оси X в пикселях перед отрисовкой глифа.