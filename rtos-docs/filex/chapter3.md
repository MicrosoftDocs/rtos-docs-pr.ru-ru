---
title: Глава 3. Функциональные компоненты FileX в ОСРВ Azure
description: В этой главе содержится описание функций высокопроизводительной встроенной файловой системы FileX в ОСРВ Azure
author: philmea
ms.author: philmea
ms.date: 05/19/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 1e1e1a1dbd844d811c7ee3122113f28162639fb4
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "104814408"
---
# <a name="chapter-3---functional-components-of-azure-rtos-filex"></a><span data-ttu-id="0b337-103">Глава 3. Функциональные компоненты FileX в ОСРВ Azure</span><span class="sxs-lookup"><span data-stu-id="0b337-103">Chapter 3 - Functional components of Azure RTOS FileX</span></span>

<span data-ttu-id="0b337-104">В этой главе содержится описание функций высокопроизводительной встроенной файловой системы FileX в ОСРВ Azure.</span><span class="sxs-lookup"><span data-stu-id="0b337-104">This chapter contains a description of the high-performance Azure RTOS FileX embedded file system from a functional perspective.</span></span>

## <a name="media-description"></a><span data-ttu-id="0b337-105">Описание носителя</span><span class="sxs-lookup"><span data-stu-id="0b337-105">Media Description</span></span>

<span data-ttu-id="0b337-106">FileX — это высокопроизводительная встроенная файловая система, которая соответствует формату файловой системы FAT.</span><span class="sxs-lookup"><span data-stu-id="0b337-106">FileX is a high-performance embedded file system that conforms to the FAT file system format.</span></span> <span data-ttu-id="0b337-107">FileX рассматривает физический носитель как массив логических секторов.</span><span class="sxs-lookup"><span data-stu-id="0b337-107">FileX views the physical media as an array of logical sectors.</span></span> <span data-ttu-id="0b337-108">Способ сопоставления этих секторов с базовым физическим носителем определяется драйвером ввода-вывода, подключенным к носителю FileX во время вызова ***fx_media_open***.</span><span class="sxs-lookup"><span data-stu-id="0b337-108">How these sectors are mapped to the underlying physical media is determined by the I/O driver connected to the FileX media during the ***fx_media_open*** call.</span></span>

### <a name="fat121632-logical-sectors"></a><span data-ttu-id="0b337-109">Логические секторы FAT12/16/32</span><span class="sxs-lookup"><span data-stu-id="0b337-109">FAT12/16/32 Logical Sectors</span></span>

<span data-ttu-id="0b337-110">Точная организация логических секторов носителя определяется содержимым загрузочной записи физического носителя.</span><span class="sxs-lookup"><span data-stu-id="0b337-110">The exact organization of the media's logical sectors is determined by the contents of the physical media's boot record.</span></span> <span data-ttu-id="0b337-111">Общий макет логических секторов носителя показан на рис. 1.</span><span class="sxs-lookup"><span data-stu-id="0b337-111">The general layout of the media's logical sectors is shown in Figure 1.</span></span>

<span data-ttu-id="0b337-112">Логические сектора FileX начинаются с логического сектора 1, который указывает на первый зарезервированный сектор носителя.</span><span class="sxs-lookup"><span data-stu-id="0b337-112">FileX logical sectors start at logical sector 1, which points to the first reserved sector of the media.</span></span> <span data-ttu-id="0b337-113">Зарезервированные секторы необязательны, но в случае использования они обычно содержат системные сведения, такие как загрузочный код.</span><span class="sxs-lookup"><span data-stu-id="0b337-113">Reserved sectors are optional, but when in use they typically contain system information such as boot code.</span></span>

### <a name="fat121632-media-boot-record"></a><span data-ttu-id="0b337-114">Загрузочная запись носителя FAT12/16/32</span><span class="sxs-lookup"><span data-stu-id="0b337-114">FAT12/16/32 Media Boot Record</span></span>

<span data-ttu-id="0b337-115">Точное смещение сектора других областей в представлении логического сектора носителя является производным от содержимого *загрузочной записи носителя*.</span><span class="sxs-lookup"><span data-stu-id="0b337-115">The exact sector offset of the other areas in the logical sector view of the media is derived from the contents of the *media boot record*.</span></span> <span data-ttu-id="0b337-116">Загрузочная запись обычно находится в секторе 0.</span><span class="sxs-lookup"><span data-stu-id="0b337-116">The location of the boot record is typically at sector 0.</span></span> <span data-ttu-id="0b337-117">Однако если на носителе есть *скрытые секторы*, смещение загрузочного сектора должно учитывать их (они располагаются непосредственно ПЕРЕД загрузочным сектором).</span><span class="sxs-lookup"><span data-stu-id="0b337-117">However, if the media has *hidden sectors*, the offset to the boot sector must account for them (they are located immediately BEFORE the boot sector).</span></span> <span data-ttu-id="0b337-118">В таблице 1 перечислены компоненты загрузочной записи носителя. Их описание можно увидеть в абзацах.</span><span class="sxs-lookup"><span data-stu-id="0b337-118">Table 1 lists the media's boot record components, and the components are described in the paragraphs.</span></span>

- <span data-ttu-id="0b337-119">**Инструкция перехода** Поле *инструкции перехода* — это поле размером три байта, которое представляет собой машинную команду Intel x86 для перехода на процессор.</span><span class="sxs-lookup"><span data-stu-id="0b337-119">**Jump Instruction** The *jump instruction* field is a three-byte field that represents an Intel x86 machine instruction for a processor jump.</span></span> <span data-ttu-id="0b337-120">Это поле в большинстве случаев является устаревшим.</span><span class="sxs-lookup"><span data-stu-id="0b337-120">This is a legacy field in most situations.</span></span>

  ![Представление логического сектора для носителя FileX](./media/user-guide/filex-media-logical-sector-view.png)

  <span data-ttu-id="0b337-122">**РИСУНОК 1. Представление логического сектора для носителя FileX**</span><span class="sxs-lookup"><span data-stu-id="0b337-122">**FIGURE 1. FileX Media Logical Sector View**</span></span>

- <span data-ttu-id="0b337-123">**Имя OEM**. Поле *имени OEM* зарезервировано для размещения имени изготовителя или имени устройства.</span><span class="sxs-lookup"><span data-stu-id="0b337-123">**OEM Name** The *OEM name* field is reserved for manufacturers to place their name or a name for the device.</span></span>
- <span data-ttu-id="0b337-124">**Байт на сектор**. Поле *Байт на сектор* в загрузочной записи носителя определяет, сколько байт находится в каждом секторе (фундаментальный элемент носителя).</span><span class="sxs-lookup"><span data-stu-id="0b337-124">**Bytes Per Sector** The *bytes per sector* field in the media boot record defines how many bytes are in each sector—the fundamental element of the media.</span></span>
- <span data-ttu-id="0b337-125">**Количество секторов на кластер**. Поле *Количество секторов на кластер* в загрузочной записи носителя определяет количество секторов, назначенных кластеру.</span><span class="sxs-lookup"><span data-stu-id="0b337-125">**Sectors Per Cluster** The *sectors per cluster* field in the media boot record defines the number of sectors assigned to a cluster.</span></span> <span data-ttu-id="0b337-126">Кластер является основным элементом выделения в файловой системе, совместимой на уровне таблиц распределения файлов.</span><span class="sxs-lookup"><span data-stu-id="0b337-126">The cluster is the fundamental allocation element in an FAT compatible file system.</span></span> <span data-ttu-id="0b337-127">Все сведения о файлах и подкаталоги выделяются из доступных кластеров носителей в соответствии с определением таблицы распределения файлов (FAT).</span><span class="sxs-lookup"><span data-stu-id="0b337-127">All file information and subdirectories are allocated from the media's available clusters as determined by the File Allocation Table (FAT).</span></span>

    <span data-ttu-id="0b337-128">**ТАБЛИЦА 1. Загрузочная запись носителя FileX**</span><span class="sxs-lookup"><span data-stu-id="0b337-128">**TABLE 1. FileX Media Boot Record**</span></span>
    |<span data-ttu-id="0b337-129">Offset</span><span class="sxs-lookup"><span data-stu-id="0b337-129">Offset</span></span>  |<span data-ttu-id="0b337-130">Поле</span><span class="sxs-lookup"><span data-stu-id="0b337-130">Field</span></span>  |<span data-ttu-id="0b337-131">Число байтов</span><span class="sxs-lookup"><span data-stu-id="0b337-131">Number of Bytes</span></span>|
    |----------|-----------|------------|
    |<span data-ttu-id="0b337-132">0x00</span><span class="sxs-lookup"><span data-stu-id="0b337-132">0x00</span></span>|<span data-ttu-id="0b337-133">Инструкция перехода (e9,xx,xx или eb,xx,90)</span><span class="sxs-lookup"><span data-stu-id="0b337-133">Jump Instruction (e9,xx,xx or eb,xx,90)</span></span>|<span data-ttu-id="0b337-134">3</span><span class="sxs-lookup"><span data-stu-id="0b337-134">3</span></span>|
    |<span data-ttu-id="0b337-135">0x03</span><span class="sxs-lookup"><span data-stu-id="0b337-135">0x03</span></span>|<span data-ttu-id="0b337-136">Имя OEM</span><span class="sxs-lookup"><span data-stu-id="0b337-136">OEM Name</span></span>|<span data-ttu-id="0b337-137">8</span><span class="sxs-lookup"><span data-stu-id="0b337-137">8</span></span>|
    |<span data-ttu-id="0b337-138">0x0B</span><span class="sxs-lookup"><span data-stu-id="0b337-138">0x0B</span></span>|<span data-ttu-id="0b337-139">Байт на сектор</span><span class="sxs-lookup"><span data-stu-id="0b337-139">Bytes Per Sector</span></span>|<span data-ttu-id="0b337-140">2</span><span class="sxs-lookup"><span data-stu-id="0b337-140">2</span></span>|
    |<span data-ttu-id="0b337-141">0x0D</span><span class="sxs-lookup"><span data-stu-id="0b337-141">0x0D</span></span>|<span data-ttu-id="0b337-142">Количество секторов на кластер</span><span class="sxs-lookup"><span data-stu-id="0b337-142">Sectors Per Cluster</span></span>|<span data-ttu-id="0b337-143">1</span><span class="sxs-lookup"><span data-stu-id="0b337-143">1</span></span>|
    |<span data-ttu-id="0b337-144">0x0E</span><span class="sxs-lookup"><span data-stu-id="0b337-144">0x0E</span></span>|<span data-ttu-id="0b337-145">Число зарезервированных секторов</span><span class="sxs-lookup"><span data-stu-id="0b337-145">Number of Reserved Sectors</span></span>|<span data-ttu-id="0b337-146">2</span><span class="sxs-lookup"><span data-stu-id="0b337-146">2</span></span>|
    |<span data-ttu-id="0b337-147">0x10</span><span class="sxs-lookup"><span data-stu-id="0b337-147">0x10</span></span>|<span data-ttu-id="0b337-148">Количество таблиц распределения файлов</span><span class="sxs-lookup"><span data-stu-id="0b337-148">Number of FATs</span></span>|<span data-ttu-id="0b337-149">1</span><span class="sxs-lookup"><span data-stu-id="0b337-149">1</span></span>|
    |<span data-ttu-id="0b337-150">0x11</span><span class="sxs-lookup"><span data-stu-id="0b337-150">0x11</span></span>|<span data-ttu-id="0b337-151">Размер корневого каталога</span><span class="sxs-lookup"><span data-stu-id="0b337-151">Size of Root Directory</span></span>|<span data-ttu-id="0b337-152">2</span><span class="sxs-lookup"><span data-stu-id="0b337-152">2</span></span>|
    |<span data-ttu-id="0b337-153">0x13</span><span class="sxs-lookup"><span data-stu-id="0b337-153">0x13</span></span>|<span data-ttu-id="0b337-154">Число секторов FAT-12 и FAT-16</span><span class="sxs-lookup"><span data-stu-id="0b337-154">Number of Sectors FAT-12 &amp; FAT-16</span></span>|<span data-ttu-id="0b337-155">2</span><span class="sxs-lookup"><span data-stu-id="0b337-155">2</span></span>|
    |<span data-ttu-id="0b337-156">0x15</span><span class="sxs-lookup"><span data-stu-id="0b337-156">0x15</span></span>|<span data-ttu-id="0b337-157">Тип носителя</span><span class="sxs-lookup"><span data-stu-id="0b337-157">Media Type</span></span>|<span data-ttu-id="0b337-158">1</span><span class="sxs-lookup"><span data-stu-id="0b337-158">1</span></span>|
    |<span data-ttu-id="0b337-159">0x16</span><span class="sxs-lookup"><span data-stu-id="0b337-159">0x16</span></span>|<span data-ttu-id="0b337-160">Число секторов на FAT</span><span class="sxs-lookup"><span data-stu-id="0b337-160">Number of Sectors Per FAT</span></span>|<span data-ttu-id="0b337-161">2</span><span class="sxs-lookup"><span data-stu-id="0b337-161">2</span></span>|
    |<span data-ttu-id="0b337-162">0x18</span><span class="sxs-lookup"><span data-stu-id="0b337-162">0x18</span></span>|<span data-ttu-id="0b337-163">Сектор на дорожку</span><span class="sxs-lookup"><span data-stu-id="0b337-163">Sectors Per Track</span></span>|<span data-ttu-id="0b337-164">2</span><span class="sxs-lookup"><span data-stu-id="0b337-164">2</span></span>|
    |<span data-ttu-id="0b337-165">0x1A</span><span class="sxs-lookup"><span data-stu-id="0b337-165">0x1A</span></span>|<span data-ttu-id="0b337-166">Количество заголовков</span><span class="sxs-lookup"><span data-stu-id="0b337-166">Number of Heads</span></span>|<span data-ttu-id="0b337-167">2</span><span class="sxs-lookup"><span data-stu-id="0b337-167">2</span></span>|
    |<span data-ttu-id="0b337-168">0x1C</span><span class="sxs-lookup"><span data-stu-id="0b337-168">0x1C</span></span>|<span data-ttu-id="0b337-169">Число скрытых секторов</span><span class="sxs-lookup"><span data-stu-id="0b337-169">Number of Hidden Sectors</span></span>|<span data-ttu-id="0b337-170">4</span><span class="sxs-lookup"><span data-stu-id="0b337-170">4</span></span>|
    |<span data-ttu-id="0b337-171">0x20</span><span class="sxs-lookup"><span data-stu-id="0b337-171">0x20</span></span>|<span data-ttu-id="0b337-172">Число секторов FAT-32</span><span class="sxs-lookup"><span data-stu-id="0b337-172">Number of Sectors - FAT-32</span></span>|<span data-ttu-id="0b337-173">4</span><span class="sxs-lookup"><span data-stu-id="0b337-173">4</span></span>|
    |<span data-ttu-id="0b337-174">0x24</span><span class="sxs-lookup"><span data-stu-id="0b337-174">0x24</span></span>|<span data-ttu-id="0b337-175">Количество секторов на FAT (FAT-32)</span><span class="sxs-lookup"><span data-stu-id="0b337-175">Sectors per FAT (FAT-32)</span></span>|<span data-ttu-id="0b337-176">4</span><span class="sxs-lookup"><span data-stu-id="0b337-176">4</span></span>|
    |<span data-ttu-id="0b337-177">0x2C</span><span class="sxs-lookup"><span data-stu-id="0b337-177">0x2C</span></span>|<span data-ttu-id="0b337-178">Кластер корневого каталога</span><span class="sxs-lookup"><span data-stu-id="0b337-178">Root Directory Cluster</span></span>|<span data-ttu-id="0b337-179">4</span><span class="sxs-lookup"><span data-stu-id="0b337-179">4</span></span>|
    |<span data-ttu-id="0b337-180">0x3E</span><span class="sxs-lookup"><span data-stu-id="0b337-180">0x3E</span></span>|<span data-ttu-id="0b337-181">Загрузочный код системы</span><span class="sxs-lookup"><span data-stu-id="0b337-181">System Boot code</span></span>|<span data-ttu-id="0b337-182">448</span><span class="sxs-lookup"><span data-stu-id="0b337-182">448</span></span>
    |<span data-ttu-id="0b337-183">0x1FE</span><span class="sxs-lookup"><span data-stu-id="0b337-183">0x1FE</span></span>|<span data-ttu-id="0b337-184">0x55AA</span><span class="sxs-lookup"><span data-stu-id="0b337-184">0x55AA</span></span>|<span data-ttu-id="0b337-185">2</span><span class="sxs-lookup"><span data-stu-id="0b337-185">2</span></span>|

- <span data-ttu-id="0b337-186">**Зарезервированные секторы**. Поле *Зарезервированные секторы* в загрузочной записи носителя определяет количество секторов, зарезервированных между загрузочной записью и первым сектором в области FAT.</span><span class="sxs-lookup"><span data-stu-id="0b337-186">**Reserved Sectors** The *reserved sectors* field in the media boot record defines the number of sectors reserved between the boot record and the first sector of the FAT area.</span></span> <span data-ttu-id="0b337-187">В большинстве случаев значение этой записи равно нулю.</span><span class="sxs-lookup"><span data-stu-id="0b337-187">This entry is zero in most cases.</span></span>
- <span data-ttu-id="0b337-188">**Количество таблиц распределения файлов**. Запись *количества таблиц распределения файлов* в загрузочной записи носителя определяет количество FAT на носителе.</span><span class="sxs-lookup"><span data-stu-id="0b337-188">**Number of FATs** The *number of FATs* entry in the media boot record defines the number of FATs in the media.</span></span> <span data-ttu-id="0b337-189">На носителе всегда должна быть хотя бы одна таблица распределения файлов.</span><span class="sxs-lookup"><span data-stu-id="0b337-189">There must always be at least one FAT in a media.</span></span> <span data-ttu-id="0b337-190">Дополнительные FAT являются всего-лишь дубликатами основной (первой) FAT. Их обычно использует ПО диагностики или восстановления.</span><span class="sxs-lookup"><span data-stu-id="0b337-190">Additional FATs are merely duplicate copies of the primary (first) FAT and are typically used by diagnostic or recovery software.</span></span>
- <span data-ttu-id="0b337-191">**Размер корневого каталога**. Запись о *размере корневого каталога* в загрузочной записи носителя определяет фиксированное число записей в корневом каталоге носителя.</span><span class="sxs-lookup"><span data-stu-id="0b337-191">**Root Directory Size** The *root directory size* entry in the media boot record defines the fixed number of entries in the root directory of the media.</span></span> <span data-ttu-id="0b337-192">Это поле неприменимо к подкаталогам и корневому каталогу FAT-32, так как они оба распределяются из кластеров носителей.</span><span class="sxs-lookup"><span data-stu-id="0b337-192">This field is not applicable to subdirectories and the FAT-32 root directory because they are both allocated from the media's clusters.</span></span>
- <span data-ttu-id="0b337-193">**Число секторов FAT-12 и FAT-16**. Поле *числа секторов* в загрузочной записи носителя содержит общее количество секторов на носителе.</span><span class="sxs-lookup"><span data-stu-id="0b337-193">**Number of Sectors FAT-12 & FAT-16** The *number of sectors* field in the media boot record contains the total number of sectors in the media.</span></span> <span data-ttu-id="0b337-194">Если это поле равно нулю, общее число секторов содержится в поле *Число секторов FAT-32*, расположенном дальше в загрузочной записи.</span><span class="sxs-lookup"><span data-stu-id="0b337-194">If this field is zero, then the total number of sectors is contained in the *number of sectors FAT-32* field located later in the boot record.</span></span>
- <span data-ttu-id="0b337-195">**Тип носителя**. Поле *Тип носителя* используется для определения типа носителя в драйвере устройства.</span><span class="sxs-lookup"><span data-stu-id="0b337-195">**Media Type** The *media type* field is used to identify the type of media present to the device driver.</span></span> <span data-ttu-id="0b337-196">Это устаревшее поле.</span><span class="sxs-lookup"><span data-stu-id="0b337-196">This is a legacy field.</span></span>
- <span data-ttu-id="0b337-197">**Количество секторов на FAT**. Поле *количества секторов на FAT*, заполненное данными в загрузочной записи носителя, содержит количество секторов, связанных с каждой FAT в области FAT.</span><span class="sxs-lookup"><span data-stu-id="0b337-197">**Sectors Per FAT** The *sectors per FAT* filed in the media boot record contains the number of sectors associated with each FAT in the FAT area.</span></span> <span data-ttu-id="0b337-198">Количество секторов FAT должно быть достаточным, чтобы учитывать максимально возможное количество кластеров, которые можно выделить на носителе.</span><span class="sxs-lookup"><span data-stu-id="0b337-198">The number of FAT sectors must be large enough to account for the maximum possible number of clusters that can be allocated in the media.</span></span>
- <span data-ttu-id="0b337-199">**Количество секторов на дорожку**. Поле *количества секторов на дорожку* в загрузочной записи носителя определяет количество секторов на дорожку. Обычно это поле относится только к реальным носителям типа диска.</span><span class="sxs-lookup"><span data-stu-id="0b337-199">**Sectors Per Track** The *sectors per track* field in the media boot record defines the number of sectors per track. This is typically only pertinent to actual disk-type media.</span></span> <span data-ttu-id="0b337-200">Устройства FLASH не используют это сопоставление.</span><span class="sxs-lookup"><span data-stu-id="0b337-200">FLASH devices don't use this mapping.</span></span>
- <span data-ttu-id="0b337-201">**Число заголовков**. Поле *Число заголовков* в загрузочной записи носителя определяет количество заголовков на носителе.</span><span class="sxs-lookup"><span data-stu-id="0b337-201">**Number of Heads** The *number of heads* field in the media boot record defines the number of heads in the media.</span></span> <span data-ttu-id="0b337-202">Обычно это поле относится только к реальным носителям типа диска.</span><span class="sxs-lookup"><span data-stu-id="0b337-202">This is typically only pertinent to actual disk-type media.</span></span> <span data-ttu-id="0b337-203">Устройства FLASH не используют это сопоставление.</span><span class="sxs-lookup"><span data-stu-id="0b337-203">FLASH devices don't use this mapping.</span></span>
- <span data-ttu-id="0b337-204">**Скрытые секторы**. Поле *Скрытые секторы* в загрузочной записи носителя определяет число секторов перед загрузочной записью.</span><span class="sxs-lookup"><span data-stu-id="0b337-204">**Hidden Sectors** The *hidden sectors* field in the media boot record defines the number of sectors before the boot record.</span></span> <span data-ttu-id="0b337-205">Это поле сохраняется в блоке управления **FX_MEDIA** и его необходимо учитывать для драйвера ввода-вывода FileX во всех запросах на чтение и запись, выполняемых FileX.</span><span class="sxs-lookup"><span data-stu-id="0b337-205">This field is maintained in the **FX_MEDIA** control block and must be accounted for in FileX I/O drivers in all read and write requests made by FileX.</span></span>
- <span data-ttu-id="0b337-206">**Число секторов FAT-32**. Поле *числа секторов* в загрузочной записи носителя допустимо, только если значением поля *количества секторов* размером два байта является ноль.</span><span class="sxs-lookup"><span data-stu-id="0b337-206">**Number of Sectors FAT-32** The *number of sectors* field in the media boot record is valid only if the two-byte *number of sectors* field is zero.</span></span> <span data-ttu-id="0b337-207">В этом случае такое 4-байтовое поле будет содержать сведения о количестве секторов на носителе.</span><span class="sxs-lookup"><span data-stu-id="0b337-207">In such a case, this four-byte field contains the number of sectors in the media.</span></span>
- <span data-ttu-id="0b337-208">**Количество секторов на FAT (FAT-32)** Поле *количества секторов на FAT (FAT-32)* допустимо только в формате FAT-32 и содержит количество секторов, выделенных для каждой таблицы распределения файлов носителя.</span><span class="sxs-lookup"><span data-stu-id="0b337-208">**Sectors per FAT (FAT-32)** The *sectors per FAT (FAT-32)* field is valid only in FAT-32 format and contains the number of sectors allocated for each FAT of the media.</span></span>
- <span data-ttu-id="0b337-209">**Кластер корневого каталога** Поле *кластера корневого каталога* допустимо только в формате FAT-32 и содержит номер начального кластера корневого каталога.</span><span class="sxs-lookup"><span data-stu-id="0b337-209">**Root Directory Cluster** The *root directory cluster* field is valid only in FAT-32 format and contains the starting cluster number of the root directory.</span></span>
- <span data-ttu-id="0b337-210">**Загрузочный код системы** Поле *загрузочного кода системы* — это область, в которой хранится небольшая часть загрузочного кода.</span><span class="sxs-lookup"><span data-stu-id="0b337-210">**System Boot Code** The *system boot code* field is an area to store a small portion of boot code.</span></span> <span data-ttu-id="0b337-211">В большинстве современных устройств это поле является устаревшим.</span><span class="sxs-lookup"><span data-stu-id="0b337-211">In most devices today, this is a legacy field.</span></span>
- <span data-ttu-id="0b337-212">**Подпись 0x55AA**. Поле *подписи* — это шаблон данных, используемый для определения загрузочной записи.</span><span class="sxs-lookup"><span data-stu-id="0b337-212">**Signature 0x55AA** The *signature* field is a data pattern used to identify the boot record.</span></span> <span data-ttu-id="0b337-213">Если это поле отсутствует, загрузочная запись станет недействительной.</span><span class="sxs-lookup"><span data-stu-id="0b337-213">If this field is not present, the boot record is not valid.</span></span>

### <a name="exfat"></a><span data-ttu-id="0b337-214">exFAT</span><span class="sxs-lookup"><span data-stu-id="0b337-214">exFAT</span></span>

<span data-ttu-id="0b337-215">Максимальный размер файла в FAT32 составляет 4 ГБ, что ограничивает широкое внедрение высококачественных мультимедийных файлов.</span><span class="sxs-lookup"><span data-stu-id="0b337-215">The maximum file size in FAT32 is 4GB, which limits the wide adoption of high-definition multimedia files.</span></span> <span data-ttu-id="0b337-216">По умолчанию FAT32 поддерживает накопители емкостью до 32 ГБ.</span><span class="sxs-lookup"><span data-stu-id="0b337-216">By default FAT32 supports storage media up to 32GB.</span></span> <span data-ttu-id="0b337-217">Так как емкость флэш-памяти и SD-карт увеличивается, файловая система FAT32 становится не менее эффективной при управлении большими томами.</span><span class="sxs-lookup"><span data-stu-id="0b337-217">With increasing flash and SD card capacity, FAT32 becomes less efficient in managing large volumes.</span></span> <span data-ttu-id="0b337-218">Для преодоления этих ограничений разработана файловая система exFAT.</span><span class="sxs-lookup"><span data-stu-id="0b337-218">exFAT is designed to overcome these limitations.</span></span> <span data-ttu-id="0b337-219">exFAT поддерживает файлы размером до одного эксабайта (EB), что составляет примерно 1 миллиард ГБ.</span><span class="sxs-lookup"><span data-stu-id="0b337-219">exFAT supports file size up to one Exabyte (EB), which is approximately one billion GB.</span></span> <span data-ttu-id="0b337-220">Еще одно существенное различие между exFAT и FAT32 заключается в том, что в exFAT для управления доступным пространством в томе используется растровое изображение, что делает эту файловую систему более эффективной при поиске доступного пространства во время записи данных в файл.</span><span class="sxs-lookup"><span data-stu-id="0b337-220">Another significant difference between exFAT and FAT32 is that exFAT uses bitmap to manage available space in the volume, making exFAT more efficient in finding available space when writing data to the file.</span></span> <span data-ttu-id="0b337-221">Кроме того, для файлов, хранящихся в смежных кластерах, exFAT устраняет необходимость прохода по структуре цепочки FAT, чтобы найти все кластеры, что делает эту файловую систему более эффективной при доступе к большим файлам.</span><span class="sxs-lookup"><span data-stu-id="0b337-221">For file stored in contiguous clusters, exFAT eliminates the walking down the FAT chain to find all the clusters, making it more efficient when accessing large files.</span></span> <span data-ttu-id="0b337-222">Файловая система exFAT является обязательной для флэш-памяти и SD-карт размером более 32 ГБ.</span><span class="sxs-lookup"><span data-stu-id="0b337-222">exFAT is required for flash storage and SD cards larger than 32GB.</span></span>

### <a name="exfat-logical-sectors"></a><span data-ttu-id="0b337-223">Логические сектора exFAT</span><span class="sxs-lookup"><span data-stu-id="0b337-223">exFAT Logical Sectors</span></span>

<span data-ttu-id="0b337-224">Общий макет логических секторов носителя в exFAT показан на рис. 2.</span><span class="sxs-lookup"><span data-stu-id="0b337-224">The general layout of the media's logical sectors in exFAT is illustrated in Figure 2.</span></span> <span data-ttu-id="0b337-225">В exFAT загрузочный блок и область FAT принадлежат системной области.</span><span class="sxs-lookup"><span data-stu-id="0b337-225">In exFAT the boot block and the FAT area belong to System Area.</span></span> <span data-ttu-id="0b337-226">Остальные кластеры — это пользовательская область.</span><span class="sxs-lookup"><span data-stu-id="0b337-226">The rest of the clusters are User Area.</span></span> <span data-ttu-id="0b337-227">Хотя это требование не обязательно, стандартом exFAT рекомендуется, чтобы битовая карта распределения была расположена в начале пользовательской области, за которой должны следовать таблица массива символов Юникода и корневой каталог.</span><span class="sxs-lookup"><span data-stu-id="0b337-227">Although not required, exFAT standard does recommend that the Allocation Bitmap is at the beginning of the User Area, followed by the Up-case Table and the root directory.</span></span>

### <a name="exfat-media-boot-record"></a><span data-ttu-id="0b337-228">Загрузочная запись носителя exFAT</span><span class="sxs-lookup"><span data-stu-id="0b337-228">exFAT Media Boot Record</span></span>

<span data-ttu-id="0b337-229">Содержимое загрузочной записи носителя в exFAT отличается от содержимого в FAT12/16/32.</span><span class="sxs-lookup"><span data-stu-id="0b337-229">The content of the Media Boot Record in exFAT is different from those in FAT12/16/32.</span></span> <span data-ttu-id="0b337-230">С ними можно ознакомиться, просмотрев таблицу 2.</span><span class="sxs-lookup"><span data-stu-id="0b337-230">They are listed in Table 2.</span></span> <span data-ttu-id="0b337-231">Чтобы избежать путаницы, область между 0x0B и 0x40, которая содержит различные параметры носителя в FAT12/16/32, помечена в exFAT значением *Зарезервировано*.</span><span class="sxs-lookup"><span data-stu-id="0b337-231">To prevent confusion, the area between 0x0B and 0x40, which contains various media parameters in FAT12/16/32 is marked as *Reserved* in exFAT.</span></span> <span data-ttu-id="0b337-232">Эту зарезервированную область нужно программировать с использованием последовательности нулей, что позволит избежать неправильной интерпретации загрузочной записи носителя.</span><span class="sxs-lookup"><span data-stu-id="0b337-232">This reserved area must be programmed with zeros, avoiding any misinterpreting the Media Boot Record.</span></span>

![Логические сектора exFAT](./media/user-guide/exfat-logical-sectors.png)

<span data-ttu-id="0b337-234">**РИСУНОК 2. Логические сектора exFAT**</span><span class="sxs-lookup"><span data-stu-id="0b337-234">**FIGURE 2. exFAT Logical Sectors**</span></span>

- <span data-ttu-id="0b337-235">**Инструкция перехода** Поле *инструкции перехода* — это поле размером три байта, которое представляет собой машинную команду Intel x86 для перехода на процессор.</span><span class="sxs-lookup"><span data-stu-id="0b337-235">**Jump Instruction** The *jump instruction* field is a three-byte field that represents an Intel x86 machine instruction for a processor jump.</span></span> <span data-ttu-id="0b337-236">Это поле в большинстве случаев является устаревшим.</span><span class="sxs-lookup"><span data-stu-id="0b337-236">This is a legacy field in most situations.</span></span>

    <span data-ttu-id="0b337-237">**ТАБЛИЦА 2. Загрузочная запись носителя exFAT**</span><span class="sxs-lookup"><span data-stu-id="0b337-237">**TABLE 2. exFAT Media Boot Record**</span></span>

    |<span data-ttu-id="0b337-238">Offset</span><span class="sxs-lookup"><span data-stu-id="0b337-238">Offset</span></span>  |<span data-ttu-id="0b337-239">Поле</span><span class="sxs-lookup"><span data-stu-id="0b337-239">Field</span></span>  |<span data-ttu-id="0b337-240">Число байтов</span><span class="sxs-lookup"><span data-stu-id="0b337-240">Number of Bytes</span></span>|
    |----------|-----------|------------|
    |<span data-ttu-id="0b337-241">0x00</span><span class="sxs-lookup"><span data-stu-id="0b337-241">0x00</span></span>|<span data-ttu-id="0b337-242">Инструкция перехода</span><span class="sxs-lookup"><span data-stu-id="0b337-242">Jump Instruction</span></span>|<span data-ttu-id="0b337-243">3</span><span class="sxs-lookup"><span data-stu-id="0b337-243">3</span></span>|
    |<span data-ttu-id="0b337-244">0x03</span><span class="sxs-lookup"><span data-stu-id="0b337-244">0x03</span></span>|<span data-ttu-id="0b337-245">Имя файловой системы</span><span class="sxs-lookup"><span data-stu-id="0b337-245">File System Name</span></span>|<span data-ttu-id="0b337-246">8</span><span class="sxs-lookup"><span data-stu-id="0b337-246">8</span></span>|
    |<span data-ttu-id="0b337-247">0x0B</span><span class="sxs-lookup"><span data-stu-id="0b337-247">0x0B</span></span>|<span data-ttu-id="0b337-248">Зарезервировано</span><span class="sxs-lookup"><span data-stu-id="0b337-248">Reserved</span></span>|<span data-ttu-id="0b337-249">53</span><span class="sxs-lookup"><span data-stu-id="0b337-249">53</span></span>|
    |<span data-ttu-id="0b337-250">0x40</span><span class="sxs-lookup"><span data-stu-id="0b337-250">0x40</span></span>|<span data-ttu-id="0b337-251">Смещение секции</span><span class="sxs-lookup"><span data-stu-id="0b337-251">Partition Offset</span></span>|<span data-ttu-id="0b337-252">8</span><span class="sxs-lookup"><span data-stu-id="0b337-252">8</span></span>|
    |<span data-ttu-id="0b337-253">0x48</span><span class="sxs-lookup"><span data-stu-id="0b337-253">0x48</span></span>|<span data-ttu-id="0b337-254">Длина тома</span><span class="sxs-lookup"><span data-stu-id="0b337-254">Volume Length</span></span>|<span data-ttu-id="0b337-255">8</span><span class="sxs-lookup"><span data-stu-id="0b337-255">8</span></span>|
    |<span data-ttu-id="0b337-256">0x50</span><span class="sxs-lookup"><span data-stu-id="0b337-256">0x50</span></span>|<span data-ttu-id="0b337-257">Смещение FAT</span><span class="sxs-lookup"><span data-stu-id="0b337-257">FAT Offset</span></span>|<span data-ttu-id="0b337-258">4</span><span class="sxs-lookup"><span data-stu-id="0b337-258">4</span></span>|
    |<span data-ttu-id="0b337-259">0x54</span><span class="sxs-lookup"><span data-stu-id="0b337-259">0x54</span></span>|<span data-ttu-id="0b337-260">Длина FAT</span><span class="sxs-lookup"><span data-stu-id="0b337-260">FAT Length</span></span>|<span data-ttu-id="0b337-261">4</span><span class="sxs-lookup"><span data-stu-id="0b337-261">4</span></span>|
    |<span data-ttu-id="0b337-262">0x58</span><span class="sxs-lookup"><span data-stu-id="0b337-262">0x58</span></span>|<span data-ttu-id="0b337-263">Смещение кучи кластеров</span><span class="sxs-lookup"><span data-stu-id="0b337-263">Cluster Heap Offset</span></span>|<span data-ttu-id="0b337-264">4</span><span class="sxs-lookup"><span data-stu-id="0b337-264">4</span></span>|
    |<span data-ttu-id="0b337-265">0x5C</span><span class="sxs-lookup"><span data-stu-id="0b337-265">0x5C</span></span>|<span data-ttu-id="0b337-266">Число кластеров</span><span class="sxs-lookup"><span data-stu-id="0b337-266">Cluster Count</span></span>|<span data-ttu-id="0b337-267">4</span><span class="sxs-lookup"><span data-stu-id="0b337-267">4</span></span>|
    |<span data-ttu-id="0b337-268">0x60</span><span class="sxs-lookup"><span data-stu-id="0b337-268">0x60</span></span>|<span data-ttu-id="0b337-269">Первый кластер корневого каталога</span><span class="sxs-lookup"><span data-stu-id="0b337-269">First Cluster of Root Directory</span></span>|<span data-ttu-id="0b337-270">4</span><span class="sxs-lookup"><span data-stu-id="0b337-270">4</span></span>|
    |<span data-ttu-id="0b337-271">0x64</span><span class="sxs-lookup"><span data-stu-id="0b337-271">0x64</span></span>|<span data-ttu-id="0b337-272">Серийный номер тома</span><span class="sxs-lookup"><span data-stu-id="0b337-272">Volume Serial Number</span></span>|<span data-ttu-id="0b337-273">4</span><span class="sxs-lookup"><span data-stu-id="0b337-273">4</span></span>|
    |<span data-ttu-id="0b337-274">0x68</span><span class="sxs-lookup"><span data-stu-id="0b337-274">0x68</span></span>|<span data-ttu-id="0b337-275">Версия файловой системы</span><span class="sxs-lookup"><span data-stu-id="0b337-275">File System Revision</span></span>|<span data-ttu-id="0b337-276">2</span><span class="sxs-lookup"><span data-stu-id="0b337-276">2</span></span>|
    |<span data-ttu-id="0b337-277">0x6A</span><span class="sxs-lookup"><span data-stu-id="0b337-277">0x6A</span></span>|<span data-ttu-id="0b337-278">Флаги тома</span><span class="sxs-lookup"><span data-stu-id="0b337-278">Volume Flags</span></span>|<span data-ttu-id="0b337-279">2</span><span class="sxs-lookup"><span data-stu-id="0b337-279">2</span></span>|
    |<span data-ttu-id="0b337-280">0x6C</span><span class="sxs-lookup"><span data-stu-id="0b337-280">0x6C</span></span>|<span data-ttu-id="0b337-281">Байт на сдвиг сектора</span><span class="sxs-lookup"><span data-stu-id="0b337-281">Bytes Per Sector Shift</span></span>|<span data-ttu-id="0b337-282">1</span><span class="sxs-lookup"><span data-stu-id="0b337-282">1</span></span>|
    |<span data-ttu-id="0b337-283">0x6D</span><span class="sxs-lookup"><span data-stu-id="0b337-283">0x6D</span></span>|<span data-ttu-id="0b337-284">Сектор на сдвиг кластера</span><span class="sxs-lookup"><span data-stu-id="0b337-284">Sector Per Cluster Shift</span></span>|<span data-ttu-id="0b337-285">1</span><span class="sxs-lookup"><span data-stu-id="0b337-285">1</span></span>|
    |<span data-ttu-id="0b337-286">0x6E</span><span class="sxs-lookup"><span data-stu-id="0b337-286">0x6E</span></span>|<span data-ttu-id="0b337-287">Количество таблиц распределения файлов</span><span class="sxs-lookup"><span data-stu-id="0b337-287">Number of FATs</span></span>|<span data-ttu-id="0b337-288">1</span><span class="sxs-lookup"><span data-stu-id="0b337-288">1</span></span>|
    |<span data-ttu-id="0b337-289">0x6F</span><span class="sxs-lookup"><span data-stu-id="0b337-289">0x6F</span></span>|<span data-ttu-id="0b337-290">Выбор диска</span><span class="sxs-lookup"><span data-stu-id="0b337-290">Drive Select</span></span>|<span data-ttu-id="0b337-291">1</span><span class="sxs-lookup"><span data-stu-id="0b337-291">1</span></span>|
    |<span data-ttu-id="0b337-292">0x70</span><span class="sxs-lookup"><span data-stu-id="0b337-292">0x70</span></span>|<span data-ttu-id="0b337-293">Процент использования</span><span class="sxs-lookup"><span data-stu-id="0b337-293">Percent in Use</span></span>|<span data-ttu-id="0b337-294">7</span><span class="sxs-lookup"><span data-stu-id="0b337-294">7</span></span>|
    |<span data-ttu-id="0b337-295">0x71</span><span class="sxs-lookup"><span data-stu-id="0b337-295">0x71</span></span>|<span data-ttu-id="0b337-296">Зарезервировано</span><span class="sxs-lookup"><span data-stu-id="0b337-296">Reserved</span></span>|<span data-ttu-id="0b337-297">1</span><span class="sxs-lookup"><span data-stu-id="0b337-297">1</span></span>|
    |<span data-ttu-id="0b337-298">0x78</span><span class="sxs-lookup"><span data-stu-id="0b337-298">0x78</span></span>|<span data-ttu-id="0b337-299">Загрузочный код</span><span class="sxs-lookup"><span data-stu-id="0b337-299">Boot Code</span></span>|<span data-ttu-id="0b337-300">390</span><span class="sxs-lookup"><span data-stu-id="0b337-300">390</span></span>|
    |<span data-ttu-id="0b337-301">0x1FE</span><span class="sxs-lookup"><span data-stu-id="0b337-301">0x1FE</span></span>|<span data-ttu-id="0b337-302">Загрузочная подпись</span><span class="sxs-lookup"><span data-stu-id="0b337-302">Boot Signature</span></span>|<span data-ttu-id="0b337-303">2</span><span class="sxs-lookup"><span data-stu-id="0b337-303">2</span></span>|

- <span data-ttu-id="0b337-304">**Имя файловой системы**. Для exFAT в поле *имени файловой системы* должно быть указано значение exFAT, за которым следуют три конечных пробела.</span><span class="sxs-lookup"><span data-stu-id="0b337-304">**File System Name** For exFAT the *file system name* field must be "EXFAT" followed by three trailing white spaces.</span></span>
- <span data-ttu-id="0b337-305">**Зарезервировано**. Для поля *Зарезервировано* нужно задать значение, равное нулю.</span><span class="sxs-lookup"><span data-stu-id="0b337-305">**Reserved** The content of the *reserved* field must be zero.</span></span> <span data-ttu-id="0b337-306">Этот регион пересекается с загрузочными записями в FAT12/16/32.</span><span class="sxs-lookup"><span data-stu-id="0b337-306">This region overlaps with the boot records in FAT12/16/ 32.</span></span> <span data-ttu-id="0b337-307">Задание для этой области значения 0 позволяет избежать неправильной интерпретации этого объема файловыми системами.</span><span class="sxs-lookup"><span data-stu-id="0b337-307">Making this area zero avoids file systems from mis-interprets this volume.</span></span>
- <span data-ttu-id="0b337-308">**Смещение секции**. В поле *смещения секции* указывается начало этой секции.</span><span class="sxs-lookup"><span data-stu-id="0b337-308">**Partition Offset** The *partition offset* field indicates the starting of this partition.</span></span>
- <span data-ttu-id="0b337-309">**Длина тома**. Поле *Длина тома* определяет размер (в секторах) этой секции.</span><span class="sxs-lookup"><span data-stu-id="0b337-309">**Volume Length** The *volume length* field defines the size, in number of sectors, of this partition.</span></span>
- <span data-ttu-id="0b337-310">**Смещение FAT**. Поле *смещения FAT* определяет номер начального сектора (который относится к началу этой секции) в таблице FAT для этой секции.</span><span class="sxs-lookup"><span data-stu-id="0b337-310">**FAT Offset** The *FAT offset* field defines the starting sector number, relative to the beginning of this partition, of the FAT table for this partition.</span></span>
- <span data-ttu-id="0b337-311">**Длина FAT**. В поле *Длина FAT* определяется размер таблицы FAT (количество секторов).</span><span class="sxs-lookup"><span data-stu-id="0b337-311">**FAT Length** The *FAT length* field defines the size of the FAT table, in number of sectors.</span></span>
- <span data-ttu-id="0b337-312">**Смещение кучи кластера**. Поле *смещения кучи кластера* определяет номер начального сектора, который относится к началу секции, для кучи кластера.</span><span class="sxs-lookup"><span data-stu-id="0b337-312">**Cluster Heap Offset** The *cluster heap offset* field defines the starting sector number, relative to the beginning of the partition, of the cluster heap.</span></span> <span data-ttu-id="0b337-313">Куча кластера — это область, в которой хранятся сведения о каталогах и файловые данные.</span><span class="sxs-lookup"><span data-stu-id="0b337-313">Cluster heap is the area where the directories information and the file data are stored.</span></span>
- <span data-ttu-id="0b337-314">**Число кластеров**. В поле *Число кластеров* определяется количество кластеров в этой секции.</span><span class="sxs-lookup"><span data-stu-id="0b337-314">**Cluster Count** The *cluster count* field defines the number of cluster this partition has.</span></span>
- <span data-ttu-id="0b337-315">**Первый кластер корневого каталога**. Поле *Первый кластер корневого каталога* определяет начальную позицию корневого каталога, которая согласно рекомендациям должна находится сразу после битовой карты распределения и таблицы массива символов Юникода.</span><span class="sxs-lookup"><span data-stu-id="0b337-315">**First Cluster of Root Directory** The *first cluster of root directory* field defines the starting location of the root directory, which is recommend to be right after the allocation bitmap and the up-case table.</span></span>
- <span data-ttu-id="0b337-316">**Серийный номер тома** Поле *серийного номера тома* определяет серийный номер для этой секции.</span><span class="sxs-lookup"><span data-stu-id="0b337-316">**Volume Serial Number** The *volume serial number* field defines the serial number for this partition.</span></span>
- <span data-ttu-id="0b337-317">**Версия файловой системы**. Поле *Версия файловой системы* определяет основную и дополнительную версии exFAT.</span><span class="sxs-lookup"><span data-stu-id="0b337-317">**File System Revision** The *file system revision* field defines the major and minor version of exFAT.</span></span>
- <span data-ttu-id="0b337-318">**Флаги тома**. Поле *Флаги тома* содержит флаги, указывающие на состояние этого тома.</span><span class="sxs-lookup"><span data-stu-id="0b337-318">**Volume Flags** The *volume flags* field contains flags indicating the state of this volume.</span></span>
- <span data-ttu-id="0b337-319">**Байт на сдвиг сектора** Поле *Байт на сдвиг сектора* определяет число байтов на сектор в log2(n), где n — число байтов на сектор.</span><span class="sxs-lookup"><span data-stu-id="0b337-319">**Bytes Per Sector Shift** The *bytes per sector shift* field defines the number of bytes per sector, in log2(n), where n is the number of bytes per sector.</span></span> <span data-ttu-id="0b337-320">Например, в SD-карте размер сектора составляет 512 байт.</span><span class="sxs-lookup"><span data-stu-id="0b337-320">For example, in SD card, sector size is 512 bytes.</span></span> <span data-ttu-id="0b337-321">Поэтому это поле должно быть равно 9 (log2(512) = 9).</span><span class="sxs-lookup"><span data-stu-id="0b337-321">Therefore this field shall be 9 (log2(512) = 9).</span></span>
- <span data-ttu-id="0b337-322">**Количество секторов на сдвиг кластера** Значение поля *Количество секторов на сдвиг кластера* определяет количество секторов в кластере в log2(n), где n — число секторов на кластер.</span><span class="sxs-lookup"><span data-stu-id="0b337-322">**Sectors Per Cluster Shift** The *sectors per cluster shift* field defines the number of sectors in a cluster, in log2(n) where n is the number of sectors per cluster.</span></span>
- <span data-ttu-id="0b337-323">**Количество таблиц распределения файлов**. Поле *Количество таблиц распределения файлов* определяет количество таблиц FAT в этой секции.</span><span class="sxs-lookup"><span data-stu-id="0b337-323">**Number of FATs** The *number of FATs* field defines the number of FAT tables in this partition.</span></span> <span data-ttu-id="0b337-324">При использовании exFAT для одной таблицы FAT рекомендуется задавать значение 1.</span><span class="sxs-lookup"><span data-stu-id="0b337-324">For exFAT, the value is recommended to be 1, for one FAT table.</span></span>
- <span data-ttu-id="0b337-325">**Выбор диска**. Поле *выбора диска* определяет номер диска с расширением INT 13h.</span><span class="sxs-lookup"><span data-stu-id="0b337-325">**Drive Select** The *driver select* field defines the extended INT 13h drive number.</span></span>
- <span data-ttu-id="0b337-326">**Процент использования**. Поле *Процент использования* определяет процент выделяемых кластеров в куче кластера.</span><span class="sxs-lookup"><span data-stu-id="0b337-326">**Percent in Use** The *percent in use* field define the percentage of the clusters in the cluster heap is being allocated.</span></span> <span data-ttu-id="0b337-327">Допустимые значения — от 0 до 100 (включительно).</span><span class="sxs-lookup"><span data-stu-id="0b337-327">The valid values are between 0 and 100, inclusive.</span></span>
- <span data-ttu-id="0b337-328">**Зарезервировано**. Это поле зарезервировано для последующего использования.</span><span class="sxs-lookup"><span data-stu-id="0b337-328">**Reserved** This field is reserved for future use.</span></span>
- <span data-ttu-id="0b337-329">**Загрузочный код** Поле *загрузочный код* — это область для хранения небольшой части загрузочного кода.</span><span class="sxs-lookup"><span data-stu-id="0b337-329">**Boot Code** The *boot code* field is an area to store a small portion of the boot code.</span></span> <span data-ttu-id="0b337-330">В большинстве современных устройств это поле является устаревшим.</span><span class="sxs-lookup"><span data-stu-id="0b337-330">In most devices today, this is a legacy field.</span></span>
- <span data-ttu-id="0b337-331">**Подпись 0x55AA**. Поле *загрузочной подписи* — это шаблон данных, используемый для определения загрузочной записи.</span><span class="sxs-lookup"><span data-stu-id="0b337-331">**Signature 0x55AA** The *boot signature* field is a data pattern used to identify the boot record.</span></span> <span data-ttu-id="0b337-332">Если это поле отсутствует, загрузочная запись станет недействительной.</span><span class="sxs-lookup"><span data-stu-id="0b337-332">If this field is not present, the boot record is not valid.</span></span>

### <a name="file-allocation-table-fat"></a><span data-ttu-id="0b337-333">Таблица распределения файлов (FAT)</span><span class="sxs-lookup"><span data-stu-id="0b337-333">File Allocation Table (FAT)</span></span>

<span data-ttu-id="0b337-334">*Таблица распределения файлов (FAT)* начинается на носителе после зарезервированных секторов.</span><span class="sxs-lookup"><span data-stu-id="0b337-334">The *File Allocation Table (FAT)* starts after the reserved sectors in the media.</span></span> <span data-ttu-id="0b337-335">Область FAT — это, по сути, массив из 12-разрядных, 16-разрядных или 32-разрядных записей, которые определяют что будет выделятся: кластер или часть цепочки кластеров, составляющих подкаталог или файл.</span><span class="sxs-lookup"><span data-stu-id="0b337-335">The FAT area is basically an array of 12-bit, 16-bit, or 32-bit entries that determine if that cluster is allocated or part of a chain of clusters comprising a subdirectory or a file.</span></span> <span data-ttu-id="0b337-336">Размер каждой записи FAT определяется количеством кластеров, которые необходимо представить.</span><span class="sxs-lookup"><span data-stu-id="0b337-336">The size of each FAT entry is determined by the number of clusters that need to be represented.</span></span> <span data-ttu-id="0b337-337">Если количество кластеров (значение, полученное в результате деления общего числа секторов на секторы одного кластера) меньше или равно 4 086, будут использоваться 12-разрядные записи FAT.</span><span class="sxs-lookup"><span data-stu-id="0b337-337">If the number of clusters (derived from the total sectors divided by the sectors per cluster) is less than or equal to 4,086, 12-bit FAT entries are used.</span></span> <span data-ttu-id="0b337-338">Если общее число кластеров превышает 4 086 но меньше 65 525, используются 16-разрядные записи FAT.</span><span class="sxs-lookup"><span data-stu-id="0b337-338">If the total number of clusters is greater than 4,086 and less than 65,525, 16-bit FAT entries are used.</span></span> <span data-ttu-id="0b337-339">И, если общее число кластеров больше или равно 65 525, будут использоваться 32-разрядные системы FAT или exFAT.</span><span class="sxs-lookup"><span data-stu-id="0b337-339">Otherwise, if the total number of clusters is greater than or equal to 65,525, 32-bit FAT or exFAT are used.</span></span>

<span data-ttu-id="0b337-340">Для FAT12/16/32 таблица FAT не только поддерживает цепочку кластеров, но и предоставляет сведения о выделении кластера: независимо от того, доступен ли кластер.</span><span class="sxs-lookup"><span data-stu-id="0b337-340">For FAT12/16/32, the FAT table not only maintains the cluster chain, it also provides information on cluster allocation: whether or not a cluster is available.</span></span> <span data-ttu-id="0b337-341">В exFAT сведения о выделении кластера хранятся в записи каталога битовой карты распределения.</span><span class="sxs-lookup"><span data-stu-id="0b337-341">In exFAT, the cluster allocation information is maintained by an Allocation Bitmap Directory Entry.</span></span> <span data-ttu-id="0b337-342">Каждая секция имеет собственную битовую карту распределения.</span><span class="sxs-lookup"><span data-stu-id="0b337-342">Each partition has its own allocation bitmap.</span></span> <span data-ttu-id="0b337-343">Размер битовой карты достаточно велик, чтобы охватить все доступные кластеры.</span><span class="sxs-lookup"><span data-stu-id="0b337-343">The size of the bitmap is large enough to cover all the available clusters.</span></span> <span data-ttu-id="0b337-344">Если кластер доступен для выделения, соответствующему биту в битовой карте распределения задается значение 0.</span><span class="sxs-lookup"><span data-stu-id="0b337-344">If a cluster is available for allocation, the corresponding bit in the allocation bitmap is set to 0.</span></span> <span data-ttu-id="0b337-345">В противном случае биту задается значение 1.</span><span class="sxs-lookup"><span data-stu-id="0b337-345">Otherwise the bit is set to 1.</span></span> <span data-ttu-id="0b337-346">Если файлы размещены в последовательных кластерах, для exFAT не понадобится цепочка FAT, чтобы отслеживать все кластеры.</span><span class="sxs-lookup"><span data-stu-id="0b337-346">For a file that occupies consecutive clusters, exFAT does not require a FAT chain to keep track of all the clusters.</span></span> <span data-ttu-id="0b337-347">Тем не менее для файлов, которые не расположены в последовательных кластерах, цепочку FAT все еще нужно администрировать.</span><span class="sxs-lookup"><span data-stu-id="0b337-347">However, for a file that does not occupy consecutive clusters, a FAT chain still needs to be maintained.</span></span>

### <a name="fat-entry-contents"></a><span data-ttu-id="0b337-348">Содержимое записи FAT</span><span class="sxs-lookup"><span data-stu-id="0b337-348">FAT Entry Contents</span></span>

<span data-ttu-id="0b337-349">Первые две записи в таблице FAT не используются и обычно имеют следующее содержимое.</span><span class="sxs-lookup"><span data-stu-id="0b337-349">The first two entries in the FAT table are not used and typically have the following contents.</span></span>

|<span data-ttu-id="0b337-350">Запись FAT</span><span class="sxs-lookup"><span data-stu-id="0b337-350">FAT Entry</span></span> |<span data-ttu-id="0b337-351">12-разрядная таблица FAT</span><span class="sxs-lookup"><span data-stu-id="0b337-351">12-bit FAT</span></span>|<span data-ttu-id="0b337-352">16-разрядная таблица FAT</span><span class="sxs-lookup"><span data-stu-id="0b337-352">16-bit FAT</span></span>|<span data-ttu-id="0b337-353">32-разрядная таблица FAT</span><span class="sxs-lookup"><span data-stu-id="0b337-353">32-bit FAT</span></span>| <span data-ttu-id="0b337-354">exFAT</span><span class="sxs-lookup"><span data-stu-id="0b337-354">exFAT</span></span>|
|----------|-----------|------------|-------|------|
|<span data-ttu-id="0b337-355">Запись 0</span><span class="sxs-lookup"><span data-stu-id="0b337-355">Entry 0</span></span>|<span data-ttu-id="0b337-356">0x0F0</span><span class="sxs-lookup"><span data-stu-id="0b337-356">0x0F0</span></span>|<span data-ttu-id="0b337-357">0x00F0</span><span class="sxs-lookup"><span data-stu-id="0b337-357">0x00F0</span></span>|<span data-ttu-id="0b337-358">0x000000F0</span><span class="sxs-lookup"><span data-stu-id="0b337-358">0x000000F0</span></span>|<span data-ttu-id="0b337-359">0xF8FFFFFF</span><span class="sxs-lookup"><span data-stu-id="0b337-359">0xF8FFFFFF</span></span>|
|<span data-ttu-id="0b337-360">Запись 1</span><span class="sxs-lookup"><span data-stu-id="0b337-360">Entry 1</span></span>|<span data-ttu-id="0b337-361">0xFFF</span><span class="sxs-lookup"><span data-stu-id="0b337-361">0xFFF</span></span>|<span data-ttu-id="0b337-362">0xFFFF</span><span class="sxs-lookup"><span data-stu-id="0b337-362">0xFFFF</span></span>|<span data-ttu-id="0b337-363">0x0FFFFFFF</span><span class="sxs-lookup"><span data-stu-id="0b337-363">0x0FFFFFFF</span></span>|<span data-ttu-id="0b337-364">0xFFFFFFFF</span><span class="sxs-lookup"><span data-stu-id="0b337-364">0xFFFFFFFF</span></span>|

<span data-ttu-id="0b337-365">Запись FAT номер 2 представляет первый кластер в области данных носителя.</span><span class="sxs-lookup"><span data-stu-id="0b337-365">FAT entry number 2 represents the first cluster in the media's data area.</span></span> <span data-ttu-id="0b337-366">Содержимое каждой записи кластера определяет, является такой кластер свободным или частью связанного списка кластеров, выделенных для файла или подкаталога.</span><span class="sxs-lookup"><span data-stu-id="0b337-366">The contents of each cluster entry determines whether or not it is free or part of a linked list of clusters allocated for a file or a subdirectory.</span></span> <span data-ttu-id="0b337-367">Если запись кластера содержит другую допустимую запись кластера, то кластер выделяется, а его значение указывает на следующий кластер, выделенный в цепочке кластера.</span><span class="sxs-lookup"><span data-stu-id="0b337-367">If the cluster entry contains another valid cluster entry, then the cluster is allocated and its value points to the next cluster allocated in the cluster chain.</span></span>

<span data-ttu-id="0b337-368">Возможные записи кластера определяются следующим образом.</span><span class="sxs-lookup"><span data-stu-id="0b337-368">Possible cluster entries are defined as follows.</span></span>
|<span data-ttu-id="0b337-369">Значение</span><span class="sxs-lookup"><span data-stu-id="0b337-369">Meaning</span></span>|<span data-ttu-id="0b337-370">12-разрядная таблица FAT</span><span class="sxs-lookup"><span data-stu-id="0b337-370">12-bit FAT</span></span>|<span data-ttu-id="0b337-371">16-разрядная таблица FAT</span><span class="sxs-lookup"><span data-stu-id="0b337-371">16-bit FAT</span></span>|<span data-ttu-id="0b337-372">32-разрядная таблица FAT</span><span class="sxs-lookup"><span data-stu-id="0b337-372">32-bit FAT</span></span>| <span data-ttu-id="0b337-373">exFAT</span><span class="sxs-lookup"><span data-stu-id="0b337-373">exFAT</span></span>|
|----------|-----------|------------|-------|------|
|<span data-ttu-id="0b337-374">Свободный кластер</span><span class="sxs-lookup"><span data-stu-id="0b337-374">Free Cluster</span></span>|<span data-ttu-id="0b337-375">0x000</span><span class="sxs-lookup"><span data-stu-id="0b337-375">0x000</span></span>|<span data-ttu-id="0b337-376">0x0000</span><span class="sxs-lookup"><span data-stu-id="0b337-376">0x0000</span></span>|<span data-ttu-id="0b337-377">0x00000000</span><span class="sxs-lookup"><span data-stu-id="0b337-377">0x00000000</span></span>|<span data-ttu-id="0b337-378">0x00000000</span><span class="sxs-lookup"><span data-stu-id="0b337-378">0x00000000</span></span>|
|<span data-ttu-id="0b337-379">Не используемые</span><span class="sxs-lookup"><span data-stu-id="0b337-379">Not Used</span></span>|<span data-ttu-id="0b337-380">0x001</span><span class="sxs-lookup"><span data-stu-id="0b337-380">0x001</span></span>|<span data-ttu-id="0b337-381">0x0001</span><span class="sxs-lookup"><span data-stu-id="0b337-381">0x0001</span></span>|<span data-ttu-id="0b337-382">0x00000001</span><span class="sxs-lookup"><span data-stu-id="0b337-382">0x00000001</span></span>|<span data-ttu-id="0b337-383">0x00000001</span><span class="sxs-lookup"><span data-stu-id="0b337-383">0x00000001</span></span>|
|<span data-ttu-id="0b337-384">Зарезервировано</span><span class="sxs-lookup"><span data-stu-id="0b337-384">Reserved</span></span>|<span data-ttu-id="0b337-385">0xFF0-FF6</span><span class="sxs-lookup"><span data-stu-id="0b337-385">0xFF0-FF6</span></span>|<span data-ttu-id="0b337-386">0xFFF0-FFF6</span><span class="sxs-lookup"><span data-stu-id="0b337-386">0xFFF0-FFF6</span></span>|<span data-ttu-id="0b337-387">0x0FFFFFF0-6</span><span class="sxs-lookup"><span data-stu-id="0b337-387">0x0FFFFFF0-6</span></span>|<span data-ttu-id="0b337-388">ClusterCounter +2 к 0xFFFFFFF6</span><span class="sxs-lookup"><span data-stu-id="0b337-388">ClusterCounter +2 to 0xFFFFFFF6</span></span>|
|<span data-ttu-id="0b337-389">Неправильный кластер</span><span class="sxs-lookup"><span data-stu-id="0b337-389">Bad Cluster</span></span>|<span data-ttu-id="0b337-390">0xFF7</span><span class="sxs-lookup"><span data-stu-id="0b337-390">0xFF7</span></span>|<span data-ttu-id="0b337-391">0xFFF7</span><span class="sxs-lookup"><span data-stu-id="0b337-391">0xFFF7</span></span>|<span data-ttu-id="0b337-392">0x0FFFFFF7</span><span class="sxs-lookup"><span data-stu-id="0b337-392">0x0FFFFFF7</span></span>|<span data-ttu-id="0b337-393">0xFFFFFFF7</span><span class="sxs-lookup"><span data-stu-id="0b337-393">0xFFFFFFF7</span></span>|
|<span data-ttu-id="0b337-394">Зарезервировано</span><span class="sxs-lookup"><span data-stu-id="0b337-394">Reserved</span></span>| - | - | - | <span data-ttu-id="0b337-395">0xFFFFFFF8-E</span><span class="sxs-lookup"><span data-stu-id="0b337-395">0xFFFFFFF8-E</span></span>|
|<span data-ttu-id="0b337-396">Последний кластер</span><span class="sxs-lookup"><span data-stu-id="0b337-396">Last Cluster</span></span>| <span data-ttu-id="0b337-397">0xFF8-FFF</span><span class="sxs-lookup"><span data-stu-id="0b337-397">0xFF8-FFF</span></span>| <span data-ttu-id="0b337-398">0xFFF8-FFFF</span><span class="sxs-lookup"><span data-stu-id="0b337-398">0xFFF8-FFFF</span></span>| <span data-ttu-id="0b337-399">0x0FFFFFF8-F</span><span class="sxs-lookup"><span data-stu-id="0b337-399">0x0FFFFFF8-F</span></span>| <span data-ttu-id="0b337-400">0xFFFFFFFF</span><span class="sxs-lookup"><span data-stu-id="0b337-400">0xFFFFFFFF</span></span>|
|<span data-ttu-id="0b337-401">Ссылка на кластер</span><span class="sxs-lookup"><span data-stu-id="0b337-401">Cluster Link</span></span>| <span data-ttu-id="0b337-402">0x002-0xFEF</span><span class="sxs-lookup"><span data-stu-id="0b337-402">0x002-0xFEF</span></span>| <span data-ttu-id="0b337-403">0x0002-FFEF</span><span class="sxs-lookup"><span data-stu-id="0b337-403">0x0002-FFEF</span></span>| <span data-ttu-id="0b337-404">0x2-0x0FFFFFEF</span><span class="sxs-lookup"><span data-stu-id="0b337-404">0x2-0x0FFFFFEF</span></span> | <span data-ttu-id="0b337-405">0x2 — ClusterCount +1</span><span class="sxs-lookup"><span data-stu-id="0b337-405">0x2 - ClusterCount + 1</span></span>|

<span data-ttu-id="0b337-406">Последний кластер в выделенной цепочке кластеров содержит значение последнего кластера (определено выше).</span><span class="sxs-lookup"><span data-stu-id="0b337-406">The last cluster in an allocated chain of clusters contains the Last Cluster value (defined above).</span></span> <span data-ttu-id="0b337-407">Номер первого кластера можно найти в записи каталога файла или подкаталога.</span><span class="sxs-lookup"><span data-stu-id="0b337-407">The first cluster number is found in the file or subdirectory's directory entry.</span></span>

### <a name="internal-logical-cache"></a><span data-ttu-id="0b337-408">Внутренний логический кэш</span><span class="sxs-lookup"><span data-stu-id="0b337-408">Internal Logical Cache</span></span>

<span data-ttu-id="0b337-409">FileX поддерживает *наиболее часто используемый* кэш логического сектора для каждого открытого носителя.</span><span class="sxs-lookup"><span data-stu-id="0b337-409">FileX maintains a *most-recently-used* logical sector cache for each opened media.</span></span> <span data-ttu-id="0b337-410">Максимальный размер кэша логического сектора определяется константой **FX_MAX_SECTOR_CACHE** и находится в файле **_fx_api.h_**.</span><span class="sxs-lookup"><span data-stu-id="0b337-410">The maximum size of the logical sector cache is defined by the constant **FX_MAX_SECTOR_CACHE** and is located in **_fx_api.h_**.</span></span> <span data-ttu-id="0b337-411">Это первый фактор, определяющий размер внутреннего кэша логического сектора.</span><span class="sxs-lookup"><span data-stu-id="0b337-411">This is the first factor determining the size of the internal logical sector cache.</span></span>

<span data-ttu-id="0b337-412">Другой фактор, определяющий размер кэша логического сектора, — это объем памяти, предоставляемый приложением при вызове \***fx_media_open** _.</span><span class="sxs-lookup"><span data-stu-id="0b337-412">The other factor that determines the size of the logical sector cache is the amount of memory supplied to the \***fx_media_open** _ call by the application.</span></span> <span data-ttu-id="0b337-413">Необходимо, чтобы объем памяти был достаточным, по крайней мере для одного логического сектора.</span><span class="sxs-lookup"><span data-stu-id="0b337-413">There must be enough memory for at least one logical sector.</span></span> <span data-ttu-id="0b337-414">Если требуется больше логических секторов, чем предоставляет _ \*FX_MAX_SECTOR_CACHE\*\*, в файле **_fx_api.h_** нужно изменить константу. Кроме того, понадобится перестроить всю библиотеку FileX.</span><span class="sxs-lookup"><span data-stu-id="0b337-414">If more than _ *FX_MAX_SECTOR_CACHE*\* logical sectors are required, the constant must be changed in **_fx_api.h_** and the entire FileX library must be rebuilt.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="0b337-415">*Каждый открытый носитель в FileX может иметь разный размер кэша в зависимости от памяти, предоставляемой во время открытого вызова.*</span><span class="sxs-lookup"><span data-stu-id="0b337-415">*Each opened media in FileX may have a different cache size depending on the memory supplied during the open call.*</span></span>

### <a name="write-protect"></a><span data-ttu-id="0b337-416">Защита от записи</span><span class="sxs-lookup"><span data-stu-id="0b337-416">Write Protect</span></span>

<span data-ttu-id="0b337-417">FileX предоставляет драйверу приложения возможность динамически задавать защиту от записи на носителе.</span><span class="sxs-lookup"><span data-stu-id="0b337-417">FileX provides the application driver the ability to dynamically set write protection on the media.</span></span> <span data-ttu-id="0b337-418">Если защита от записи является обязательной, драйвер задает для поля *fx_media_driver_write_protect* значение FX_TRUE в связанной структуре FX_MEDIA.</span><span class="sxs-lookup"><span data-stu-id="0b337-418">If write protection is required, the driver sets to FX_TRUE the *fx_media_driver_write_protect* field in the associated FX_MEDIA structure.</span></span> <span data-ttu-id="0b337-419">Если задать это значение, все попытки приложения изменить носитель или открыть файлы для записи будут отклонены.</span><span class="sxs-lookup"><span data-stu-id="0b337-419">When set, all attempts by the application to modify the media are rejected as well as attempts to open files for writing.</span></span> <span data-ttu-id="0b337-420">Драйвер также может отключить защиту от записи, очистив значение этого поля.</span><span class="sxs-lookup"><span data-stu-id="0b337-420">The driver may also disable write protection by clearing this field.</span></span>

### <a name="free-sector-update"></a><span data-ttu-id="0b337-421">Обновление свободного сектора</span><span class="sxs-lookup"><span data-stu-id="0b337-421">Free Sector Update</span></span>

<span data-ttu-id="0b337-422">FileX предоставляет механизм для информирования драйвера приложения о том, что секторы больше не используются.</span><span class="sxs-lookup"><span data-stu-id="0b337-422">FileX provides a mechanism to inform the application driver when sectors are no longer in use.</span></span> <span data-ttu-id="0b337-423">Это особенно полезно для диспетчеров FLASH-памяти, которые управляют всеми логическими секторами, используемыми FileX.</span><span class="sxs-lookup"><span data-stu-id="0b337-423">This is especially useful for FLASH memory managers that manage all logical sectors being used by FileX.</span></span>

<span data-ttu-id="0b337-424">Если требуется уведомление о свободных секторах, драйвер приложения задает для поля *fx_media_driver_free_sector_update* в связанной структуре FX_MEDIA значение FX_TRUE.</span><span class="sxs-lookup"><span data-stu-id="0b337-424">If notification of free sectors is required, the application driver sets to FX_TRUE the *fx_media_driver_free_sector_update* field in the associated FX_MEDIA structure.</span></span> <span data-ttu-id="0b337-425">Это назначение обычно выполняется во время инициализации драйвера.</span><span class="sxs-lookup"><span data-stu-id="0b337-425">This assignment is typically done during driver initialization.</span></span>

<span data-ttu-id="0b337-426">Если задать значение для этого поля, FileX вызовет драйвер **FX_DRIVER_RELEASE_SECTORS**, указывающий, когда один или несколько последовательных секторов станут свободными.</span><span class="sxs-lookup"><span data-stu-id="0b337-426">Setting this field, FileX makes a **FX_DRIVER_RELEASE_SECTORS** driver call indicating when one or more consecutive sectors become free.</span></span>

### <a name="media-control-block-fx_media"></a><span data-ttu-id="0b337-427">Блок управления носителями FX_MEDIA</span><span class="sxs-lookup"><span data-stu-id="0b337-427">Media Control Block FX_MEDIA</span></span>

<span data-ttu-id="0b337-428">Характеристики каждого открытого носителя в FileX содержатся в блоке управления носителями.</span><span class="sxs-lookup"><span data-stu-id="0b337-428">The characteristics of each open media in FileX are contained in the media control block.</span></span> <span data-ttu-id="0b337-429">Эта структура определена в файле ***tx_api.h***.</span><span class="sxs-lookup"><span data-stu-id="0b337-429">This structure is defined in the file ***fx_api.h***.</span></span>

<span data-ttu-id="0b337-430">Блоки управления носителя могут размещаться в любом месте в памяти, но чаще всего они определяются вне области какой-либо функции, благодаря чему функционируют как глобальная структура.</span><span class="sxs-lookup"><span data-stu-id="0b337-430">The media control block can be located anywhere in memory, but it is most common to make the control block a global structure by defining it outside the scope of any function.</span></span>

<span data-ttu-id="0b337-431">Поиск блока управления в других областях требует больших усилий, как и в любой динамически выделяемой памяти.</span><span class="sxs-lookup"><span data-stu-id="0b337-431">Locating the control block in other areas requires a bit more care, just like all dynamically allocated memory.</span></span> <span data-ttu-id="0b337-432">Если блок управления выделяется в функции C, то связанная с ним память является частью стека вызывающего потока.</span><span class="sxs-lookup"><span data-stu-id="0b337-432">If a control block is allocated within a C function, the memory associated with it is part of the calling thread's stack.</span></span>

> [!WARNING]
><span data-ttu-id="0b337-433">*Как правило, локальное хранилище не следует использовать для блоков управления, так как после возвращения функции все пространство его стека локальных переменных освобождается, независимо от того, используется ли оно.*</span><span class="sxs-lookup"><span data-stu-id="0b337-433">*In general, avoid using local storage for control blocks because after the function returns, all of its local variable stack space is released—regardless of whether it is still in use!*</span></span>

## <a name="fat121632-directory-description"></a><span data-ttu-id="0b337-434">**Описание каталога FAT12/16/32**</span><span class="sxs-lookup"><span data-stu-id="0b337-434">**FAT12/16/32 Directory Description**</span></span>

<span data-ttu-id="0b337-435">FileX поддерживает такие форматы имен, как имена формата 8.3 и длинные имена файлов (LFN) Windows.</span><span class="sxs-lookup"><span data-stu-id="0b337-435">FileX supports both 8.3 and Windows Long File Name (LFN) name formats.</span></span> <span data-ttu-id="0b337-436">Помимо имени, каждая запись каталога содержит атрибуты записи, дату и время последнего изменения, индекс начального кластера и размер записи в байтах.</span><span class="sxs-lookup"><span data-stu-id="0b337-436">In addition to the name, each directory entry contains the entry's attributes, the last modified time and date, the starting cluster index, and the size in bytes of the entry.</span></span> <span data-ttu-id="0b337-437">В таблице 3 представлены содержимое и размер записи каталога FileX в формате 8.3.</span><span class="sxs-lookup"><span data-stu-id="0b337-437">Table 3 shows the contents and size of a FileX 8.3 directory entry.</span></span>

- <span data-ttu-id="0b337-438">**Имя каталога**</span><span class="sxs-lookup"><span data-stu-id="0b337-438">**Directory Name**</span></span>

    <span data-ttu-id="0b337-439">FileX поддерживает размер имен файлов в диапазоне от 1 до 255 символов.</span><span class="sxs-lookup"><span data-stu-id="0b337-439">FileX supports file names ranging in size from 1 to 255 characters.</span></span> <span data-ttu-id="0b337-440">Стандартные восьмисимвольные имена файлов представлены на носителе в одной записи каталога.</span><span class="sxs-lookup"><span data-stu-id="0b337-440">Standard eight-character file names are represented in a single directory entry on the media.</span></span> <span data-ttu-id="0b337-441">Они выравниваются по левому краю в поле "Имя каталога" и являются пустыми.</span><span class="sxs-lookup"><span data-stu-id="0b337-441">They are left justified in the directory name field and are blank padded.</span></span> <span data-ttu-id="0b337-442">Кроме того, символы ASCII, составляющие имя, всегда заменяются прописными буквами.</span><span class="sxs-lookup"><span data-stu-id="0b337-442">In addition, the ASCII characters that comprise the name are always capitalized.</span></span>

    <span data-ttu-id="0b337-443">Длинные имена файлов (LFN) представлены последовательными записями каталога в обратном порядке, за которыми сразу следует стандартное имя файла формата 8.3.</span><span class="sxs-lookup"><span data-stu-id="0b337-443">Long File Names (LFNs) are represented by consecutive directory entries, in reverse order, followed immediately by an 8.3 standard file name.</span></span> <span data-ttu-id="0b337-444">Созданное имя формата 8.3 содержит всю значимую информацию о каталоге, связанную с этим именем.</span><span class="sxs-lookup"><span data-stu-id="0b337-444">The created 8.3 name contains all the meaningful directory information associated with the name.</span></span> <span data-ttu-id="0b337-445">В таблице 4 представлено содержимое записей каталога, используемых для хранения сведений о длинных именах файлов, а в таблице 5 показан пример 39-символьного LFN, для которого требуется всего четыре записи каталога.</span><span class="sxs-lookup"><span data-stu-id="0b337-445">Table 4 shows the contents of the directory entries used to hold the Long File Name information, and Table 5 shows an example of a 39-character LFN that requires a total of four directory entries.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="0b337-446">*Константа **FX_MAX_LONG_NAME_LEN**, определенная в файле **fx_api.h**, содержит максимальную длину, поддерживаемую FileX.*</span><span class="sxs-lookup"><span data-stu-id="0b337-446">*The constant **FX_MAX_LONG_NAME_LEN**, defined in **fx_api.h**, contains the maximum length supported by FileX.*</span></span>

- <span data-ttu-id="0b337-447">**Расширение имени файла каталога**</span><span class="sxs-lookup"><span data-stu-id="0b337-447">**Directory Filename Extension**</span></span>

    <span data-ttu-id="0b337-448">Для стандартных имен файлов формата 8.3 FileX также поддерживает необязательное *расширение имени файла каталога* из трех символов.</span><span class="sxs-lookup"><span data-stu-id="0b337-448">For standard 8.3 file names, FileX also supports the optional three-character *directory filename extension*.</span></span> <span data-ttu-id="0b337-449">Как и имена файлов из восьми символов, расширения имен файлов выравниваются по левому краю в поле расширения имени файла каталога, заполняются пробелами и всегда заменяются прописными буквами.</span><span class="sxs-lookup"><span data-stu-id="0b337-449">Just like the eight-character file name, filename extensions are left justified in the directory filename extension field, blank padded, and always capitalized.</span></span>

    <span data-ttu-id="0b337-450">**ТАБЛИЦА 3. Запись каталога FileX формата 8.3**</span><span class="sxs-lookup"><span data-stu-id="0b337-450">**TABLE 3. FileX 8.3 Directory Entry**</span></span>

    |<span data-ttu-id="0b337-451">Offset</span><span class="sxs-lookup"><span data-stu-id="0b337-451">Offset</span></span>|<span data-ttu-id="0b337-452">Поле</span><span class="sxs-lookup"><span data-stu-id="0b337-452">Field</span></span>|<span data-ttu-id="0b337-453">Число байтов</span><span class="sxs-lookup"><span data-stu-id="0b337-453">Number of Bytes</span></span>|
    |------------|-----------|------------|
    |<span data-ttu-id="0b337-454">0x00</span><span class="sxs-lookup"><span data-stu-id="0b337-454">0x00</span></span>|<span data-ttu-id="0b337-455">Имя записи каталога</span><span class="sxs-lookup"><span data-stu-id="0b337-455">Directory Entry Name</span></span>|<span data-ttu-id="0b337-456">8</span><span class="sxs-lookup"><span data-stu-id="0b337-456">8</span></span>|
    |<span data-ttu-id="0b337-457">0x08</span><span class="sxs-lookup"><span data-stu-id="0b337-457">0x08</span></span>|<span data-ttu-id="0b337-458">Расширение каталога</span><span class="sxs-lookup"><span data-stu-id="0b337-458">Directory Extension</span></span>|<span data-ttu-id="0b337-459">3</span><span class="sxs-lookup"><span data-stu-id="0b337-459">3</span></span>|
    |<span data-ttu-id="0b337-460">0x0B</span><span class="sxs-lookup"><span data-stu-id="0b337-460">0x0B</span></span>|<span data-ttu-id="0b337-461">Атрибуты</span><span class="sxs-lookup"><span data-stu-id="0b337-461">Attributes</span></span>|<span data-ttu-id="0b337-462">1</span><span class="sxs-lookup"><span data-stu-id="0b337-462">1</span></span>|
    |<span data-ttu-id="0b337-463">0x0C</span><span class="sxs-lookup"><span data-stu-id="0b337-463">0x0C</span></span>|<span data-ttu-id="0b337-464">NT (вводится в формате длинного имени файла и является зарезервированным для NT [всегда 0])</span><span class="sxs-lookup"><span data-stu-id="0b337-464">NT (introduced by the long file name format and is reserved for NT [always 0])</span></span>|<span data-ttu-id="0b337-465">1</span><span class="sxs-lookup"><span data-stu-id="0b337-465">1</span></span>|
    |<span data-ttu-id="0b337-466">0x0D</span><span class="sxs-lookup"><span data-stu-id="0b337-466">0x0D</span></span>|<span data-ttu-id="0b337-467">Время создания (в миллисекундах) (вводится в формате длинного имени файла и представляет число миллисекунд, в течение которого был создан файл)</span><span class="sxs-lookup"><span data-stu-id="0b337-467">Created Time in milliseconds ( introduced by the long file name format and represents the number of milliseconds when the file was created.)</span></span>|<span data-ttu-id="0b337-468">1</span><span class="sxs-lookup"><span data-stu-id="0b337-468">1</span></span>|
    |<span data-ttu-id="0b337-469">0x0E</span><span class="sxs-lookup"><span data-stu-id="0b337-469">0x0E</span></span>|<span data-ttu-id="0b337-470">Время создания файла в часах и минутах (вводится в формате длинного имени файла и представляет час и минуты создания файла)</span><span class="sxs-lookup"><span data-stu-id="0b337-470">Created Time in hours &amp; minutes (introduced by the long file name format and represents the hour and minute the file was created )</span></span>|<span data-ttu-id="0b337-471">2</span><span class="sxs-lookup"><span data-stu-id="0b337-471">2</span></span>|
    |<span data-ttu-id="0b337-472">0x10</span><span class="sxs-lookup"><span data-stu-id="0b337-472">0x10</span></span>|<span data-ttu-id="0b337-473">Дата создания (вводится в формате длинного имени файла и представляет дату создания файла)</span><span class="sxs-lookup"><span data-stu-id="0b337-473">Created Date (introduced by the long file name format and represents the date the file was created.)</span></span>|<span data-ttu-id="0b337-474">2</span><span class="sxs-lookup"><span data-stu-id="0b337-474">2</span></span>|
    |<span data-ttu-id="0b337-475">0x12</span><span class="sxs-lookup"><span data-stu-id="0b337-475">0x12</span></span>|<span data-ttu-id="0b337-476">Дата последнего доступа (вводится в формате длинного имени файла и представляет дату последнего обращения к файлу)</span><span class="sxs-lookup"><span data-stu-id="0b337-476">Last Accessed Date ( introduced by the long file name format and represents the date the file was last accessed.)</span></span>|<span data-ttu-id="0b337-477">2</span><span class="sxs-lookup"><span data-stu-id="0b337-477">2</span></span>|
    |<span data-ttu-id="0b337-478">0x14</span><span class="sxs-lookup"><span data-stu-id="0b337-478">0x14</span></span>|<span data-ttu-id="0b337-479">Запуск кластера (только верхние 16 бит FAT-32)</span><span class="sxs-lookup"><span data-stu-id="0b337-479">Starting Cluster (Upper 16 bits FAT-32 only)</span></span>|<span data-ttu-id="0b337-480">2</span><span class="sxs-lookup"><span data-stu-id="0b337-480">2</span></span>|
    |<span data-ttu-id="0b337-481">0x16</span><span class="sxs-lookup"><span data-stu-id="0b337-481">0x16</span></span>|<span data-ttu-id="0b337-482">Время изменения</span><span class="sxs-lookup"><span data-stu-id="0b337-482">Modified Time</span></span>|<span data-ttu-id="0b337-483">2</span><span class="sxs-lookup"><span data-stu-id="0b337-483">2</span></span>|
    |<span data-ttu-id="0b337-484">0x18</span><span class="sxs-lookup"><span data-stu-id="0b337-484">0x18</span></span>|<span data-ttu-id="0b337-485">Дата изменения</span><span class="sxs-lookup"><span data-stu-id="0b337-485">Modified Date</span></span>|<span data-ttu-id="0b337-486">2</span><span class="sxs-lookup"><span data-stu-id="0b337-486">2</span></span>|
    |<span data-ttu-id="0b337-487">0x1A</span><span class="sxs-lookup"><span data-stu-id="0b337-487">0x1A</span></span>|<span data-ttu-id="0b337-488">Запуск кластера (нижние 16 бит FAT-32, FAT-12 или FAT-16)</span><span class="sxs-lookup"><span data-stu-id="0b337-488">Starting Cluster (Lower 16 bits FAT-32 or FAT-12 or FAT-16)</span></span>|<span data-ttu-id="0b337-489">2</span><span class="sxs-lookup"><span data-stu-id="0b337-489">2</span></span>|
    |<span data-ttu-id="0b337-490">0x1C</span><span class="sxs-lookup"><span data-stu-id="0b337-490">0x1C</span></span>|<span data-ttu-id="0b337-491">Размер файла</span><span class="sxs-lookup"><span data-stu-id="0b337-491">File Size</span></span>|<span data-ttu-id="0b337-492">4</span><span class="sxs-lookup"><span data-stu-id="0b337-492">4</span></span>|


- <span data-ttu-id="0b337-493">**Атрибуты каталога**</span><span class="sxs-lookup"><span data-stu-id="0b337-493">**Directory Attributes**</span></span>

    <span data-ttu-id="0b337-494">Запись поля однобайтового *атрибута каталога* содержит ряд битов, которые определяют различные свойства записи каталога.</span><span class="sxs-lookup"><span data-stu-id="0b337-494">The one-byte *directory attribute* field entry contains a series of bits that specify various properties of the directory entry.</span></span> <span data-ttu-id="0b337-495">Ниже приведены определения атрибутов каталога.</span><span class="sxs-lookup"><span data-stu-id="0b337-495">Directory attribute definitions are as follow:</span></span>

    |<span data-ttu-id="0b337-496">Бит атрибута</span><span class="sxs-lookup"><span data-stu-id="0b337-496">Attribute Bit</span></span>|<span data-ttu-id="0b337-497">Значение</span><span class="sxs-lookup"><span data-stu-id="0b337-497">Meaning</span></span>|
    |------------|-----------|
    |<span data-ttu-id="0b337-498">0x01</span><span class="sxs-lookup"><span data-stu-id="0b337-498">0x01</span></span>|<span data-ttu-id="0b337-499">Запись доступна только для чтения.</span><span class="sxs-lookup"><span data-stu-id="0b337-499">Entry is read-only.</span></span>|
    |<span data-ttu-id="0b337-500">0x02</span><span class="sxs-lookup"><span data-stu-id="0b337-500">0x02</span></span>|<span data-ttu-id="0b337-501">Запись скрыта.</span><span class="sxs-lookup"><span data-stu-id="0b337-501">Entry is hidden.</span></span>|
    |<span data-ttu-id="0b337-502">0x04</span><span class="sxs-lookup"><span data-stu-id="0b337-502">0x04</span></span>|<span data-ttu-id="0b337-503">Запись является системной записью.</span><span class="sxs-lookup"><span data-stu-id="0b337-503">Entry is a system entry.</span></span>|
    |<span data-ttu-id="0b337-504">0x08</span><span class="sxs-lookup"><span data-stu-id="0b337-504">0x08</span></span>|<span data-ttu-id="0b337-505">Запись является меткой тома</span><span class="sxs-lookup"><span data-stu-id="0b337-505">Entry is a volume label</span></span>|
    |<span data-ttu-id="0b337-506">0x10</span><span class="sxs-lookup"><span data-stu-id="0b337-506">0x10</span></span>|<span data-ttu-id="0b337-507">Запись является каталогом.</span><span class="sxs-lookup"><span data-stu-id="0b337-507">Entry is a directory.</span></span>|
    |<span data-ttu-id="0b337-508">0x20</span><span class="sxs-lookup"><span data-stu-id="0b337-508">0x20</span></span>|<span data-ttu-id="0b337-509">Запись изменена.</span><span class="sxs-lookup"><span data-stu-id="0b337-509">Entry has been modified.</span></span>|

    <span data-ttu-id="0b337-510">Так как все биты атрибутов являются взаимоисключающими, за один раз можно задать несколько битов атрибута.</span><span class="sxs-lookup"><span data-stu-id="0b337-510">Because all the attribute bits are mutually exclusive, there may be more than one attribute bit set at a time.</span></span>

- <span data-ttu-id="0b337-511">**Время каталога**</span><span class="sxs-lookup"><span data-stu-id="0b337-511">**Directory Time**</span></span>

    <span data-ttu-id="0b337-512">Двухбайтовое поле *времени каталога* содержит часы, минуты и секунды последнего изменения указанной записи каталога.</span><span class="sxs-lookup"><span data-stu-id="0b337-512">The two-byte *directory time* field contains the hours, minutes, and seconds of the last change to the specified directory entry.</span></span> <span data-ttu-id="0b337-513">Биты с 15 по 11 содержат часы, биты с 10 по 5 содержат минуты, а биты с 4 по 0 — половину секунд.</span><span class="sxs-lookup"><span data-stu-id="0b337-513">Bits 15 through 11 contain the hours, bits 10 though 5 contain the minutes, and bits 4 though 0 contain the half seconds.</span></span> <span data-ttu-id="0b337-514">Перед записью в это поле фактические секунды делятся на два.</span><span class="sxs-lookup"><span data-stu-id="0b337-514">Actual seconds are divided by two before being written into this field.</span></span>

- <span data-ttu-id="0b337-515">**Дата каталога**</span><span class="sxs-lookup"><span data-stu-id="0b337-515">**Directory Date**</span></span>

    <span data-ttu-id="0b337-516">Двухбайтовое поле *даты каталога* содержит год (смещение от 1980 г.), месяц и день последнего изменения указанной записи каталога.</span><span class="sxs-lookup"><span data-stu-id="0b337-516">The two-byte *directory date* field contains the year (offset from 1980), month, and day of the last change to the specified directory entry.</span></span> <span data-ttu-id="0b337-517">Биты с 15 по 9 содержат смещение года, биты с 8 по 5 содержат смещение месяца, а биты с 4 по 0 — смещение дня.</span><span class="sxs-lookup"><span data-stu-id="0b337-517">Bits 15 through 9 contain the year offset, bits 8 through 5 contain the month offset, and bits 4 through 0 contain the day.</span></span>

- <span data-ttu-id="0b337-518">**Начальный кластер каталога**</span><span class="sxs-lookup"><span data-stu-id="0b337-518">**Directory Starting Cluster**</span></span>

    <span data-ttu-id="0b337-519">Для FAT-12 и FAT-16 размер этого поля составляет 2 байта.</span><span class="sxs-lookup"><span data-stu-id="0b337-519">This field occupies 2 bytes for FAT-12 and FAT-16.</span></span> <span data-ttu-id="0b337-520">Для FAT-32 это поле занимает 4 байта.</span><span class="sxs-lookup"><span data-stu-id="0b337-520">For FAT-32 this field occupies 4 bytes.</span></span> <span data-ttu-id="0b337-521">Это поле содержит номер первого кластера, выделенного для записи (подкаталог или файл).</span><span class="sxs-lookup"><span data-stu-id="0b337-521">This field contains the first cluster number allocated to the entry (subdirectory or file).</span></span>

    > [!NOTE]
    > <span data-ttu-id="0b337-522">\*Обратите внимание, что FileX создает файлы без начального кластера (значение поля начального кластера равно нулю), что позволяет пользователям при необходимости выделять непрерывное количество кластеров для недавно созданного файла.</span><span class="sxs-lookup"><span data-stu-id="0b337-522">\*Note that FileX creates new files without an initial cluster (starting cluster field equal to zero) to allow users to optionally allocate a contiguous number of clusters for a newly created file.</span></span> *

- <span data-ttu-id="0b337-523">**Размер файла каталога**</span><span class="sxs-lookup"><span data-stu-id="0b337-523">**Directory File Size**</span></span>

    <span data-ttu-id="0b337-524">Поле *Размер файла* *каталога* размером в четыре байта содержит число байтов в файле.</span><span class="sxs-lookup"><span data-stu-id="0b337-524">The four-byte *directory* *file size* field contains the number of bytes in the file.</span></span> <span data-ttu-id="0b337-525">Если запись действительно является подкаталогом, значение поля "Размер" будет равно нулю.</span><span class="sxs-lookup"><span data-stu-id="0b337-525">If the entry is really a subdirectory, the size field is zero.</span></span>

### <a name="long-file-name-directory"></a><span data-ttu-id="0b337-526">Каталог длинных имен файлов</span><span class="sxs-lookup"><span data-stu-id="0b337-526">Long File Name Directory</span></span>

- <span data-ttu-id="0b337-527">**Порядковый номер**</span><span class="sxs-lookup"><span data-stu-id="0b337-527">**Ordinal**</span></span>

    <span data-ttu-id="0b337-528">Однобайтовое поле *Порядковый номер*, указывающее номер записи LFN.</span><span class="sxs-lookup"><span data-stu-id="0b337-528">The one-byte *ordinal* field that specifies the number of the LFN entry.</span></span> <span data-ttu-id="0b337-529">Так как записи LFN располагаются в обратном порядке, значения порядковых номеров записей каталога в формате LFN, составляющих одно LFN, уменьшаются на одну ступень.</span><span class="sxs-lookup"><span data-stu-id="0b337-529">Because LFN entries are positioned in reverse order, the ordinal values of the LFN directory entries comprising a single LFN decrease by one.</span></span> <span data-ttu-id="0b337-530">Кроме того, значением порядкового номера LFN непосредственно перед именем файла в формате 8.3 должно быть "один".</span><span class="sxs-lookup"><span data-stu-id="0b337-530">In addition, the ordinal value of the LFN directly before the 8.3 file name must be one.</span></span>

    <span data-ttu-id="0b337-531">**ТАБЛИЦА 4. Запись каталога длинных имен файлов**</span><span class="sxs-lookup"><span data-stu-id="0b337-531">**TABLE 4. Long File Name Directory Entry**</span></span>

    |<span data-ttu-id="0b337-532">Offset</span><span class="sxs-lookup"><span data-stu-id="0b337-532">Offset</span></span>|<span data-ttu-id="0b337-533">Поле</span><span class="sxs-lookup"><span data-stu-id="0b337-533">Field</span></span>|<span data-ttu-id="0b337-534">Число байтов</span><span class="sxs-lookup"><span data-stu-id="0b337-534">Number of Bytes</span></span>|
    |------------|-----------|------------|
    <span data-ttu-id="0b337-535">0x00</span><span class="sxs-lookup"><span data-stu-id="0b337-535">0x00</span></span>|<span data-ttu-id="0b337-536">Поле "Порядковый номер"</span><span class="sxs-lookup"><span data-stu-id="0b337-536">Ordinal Field</span></span>|<span data-ttu-id="0b337-537">1</span><span class="sxs-lookup"><span data-stu-id="0b337-537">1</span></span>|
    <span data-ttu-id="0b337-538">0x01</span><span class="sxs-lookup"><span data-stu-id="0b337-538">0x01</span></span>|<span data-ttu-id="0b337-539">Символ 1 Юникода</span><span class="sxs-lookup"><span data-stu-id="0b337-539">Unicode Character 1</span></span>|<span data-ttu-id="0b337-540">2</span><span class="sxs-lookup"><span data-stu-id="0b337-540">2</span></span>|
    <span data-ttu-id="0b337-541">0x03</span><span class="sxs-lookup"><span data-stu-id="0b337-541">0x03</span></span>|<span data-ttu-id="0b337-542">Символ 2 Юникода</span><span class="sxs-lookup"><span data-stu-id="0b337-542">Unicode Character 2</span></span>|<span data-ttu-id="0b337-543">2</span><span class="sxs-lookup"><span data-stu-id="0b337-543">2</span></span>|
    <span data-ttu-id="0b337-544">0x05</span><span class="sxs-lookup"><span data-stu-id="0b337-544">0x05</span></span>|<span data-ttu-id="0b337-545">Символ 3 Юникода</span><span class="sxs-lookup"><span data-stu-id="0b337-545">Unicode Character 3</span></span>|<span data-ttu-id="0b337-546">2</span><span class="sxs-lookup"><span data-stu-id="0b337-546">2</span></span>|
    <span data-ttu-id="0b337-547">0x07</span><span class="sxs-lookup"><span data-stu-id="0b337-547">0x07</span></span>|<span data-ttu-id="0b337-548">Символ 4 Юникода</span><span class="sxs-lookup"><span data-stu-id="0b337-548">Unicode Character 4</span></span>|<span data-ttu-id="0b337-549">2</span><span class="sxs-lookup"><span data-stu-id="0b337-549">2</span></span>|
    <span data-ttu-id="0b337-550">0x09</span><span class="sxs-lookup"><span data-stu-id="0b337-550">0x09</span></span>|<span data-ttu-id="0b337-551">Символ 5 Юникода</span><span class="sxs-lookup"><span data-stu-id="0b337-551">Unicode Character 5</span></span>|<span data-ttu-id="0b337-552">2</span><span class="sxs-lookup"><span data-stu-id="0b337-552">2</span></span>|
    <span data-ttu-id="0b337-553">0x0B</span><span class="sxs-lookup"><span data-stu-id="0b337-553">0x0B</span></span>|<span data-ttu-id="0b337-554">Атрибуты LFN</span><span class="sxs-lookup"><span data-stu-id="0b337-554">LFN Attributes</span></span>|<span data-ttu-id="0b337-555">1</span><span class="sxs-lookup"><span data-stu-id="0b337-555">1</span></span>|
    <span data-ttu-id="0b337-556">0x0C</span><span class="sxs-lookup"><span data-stu-id="0b337-556">0x0C</span></span>|<span data-ttu-id="0b337-557">Тип LFN (для типа "Зарезервировано" значением всегда будет 0)</span><span class="sxs-lookup"><span data-stu-id="0b337-557">LFN Type (Reserved always 0)</span></span>|<span data-ttu-id="0b337-558">1</span><span class="sxs-lookup"><span data-stu-id="0b337-558">1</span></span>|
    <span data-ttu-id="0b337-559">0x0D</span><span class="sxs-lookup"><span data-stu-id="0b337-559">0x0D</span></span>|<span data-ttu-id="0b337-560">Контрольная сумма LFN</span><span class="sxs-lookup"><span data-stu-id="0b337-560">LFN Checksum</span></span>|<span data-ttu-id="0b337-561">1</span><span class="sxs-lookup"><span data-stu-id="0b337-561">1</span></span>|
    <span data-ttu-id="0b337-562">0x0E</span><span class="sxs-lookup"><span data-stu-id="0b337-562">0x0E</span></span>|<span data-ttu-id="0b337-563">Символ 6 Юникода</span><span class="sxs-lookup"><span data-stu-id="0b337-563">Unicode Character 6</span></span>|<span data-ttu-id="0b337-564">2</span><span class="sxs-lookup"><span data-stu-id="0b337-564">2</span></span>|
    <span data-ttu-id="0b337-565">0x10</span><span class="sxs-lookup"><span data-stu-id="0b337-565">0x10</span></span>|<span data-ttu-id="0b337-566">Символ 7 Юникода</span><span class="sxs-lookup"><span data-stu-id="0b337-566">Unicode Character 7</span></span>|<span data-ttu-id="0b337-567">2</span><span class="sxs-lookup"><span data-stu-id="0b337-567">2</span></span>|
    <span data-ttu-id="0b337-568">0x12</span><span class="sxs-lookup"><span data-stu-id="0b337-568">0x12</span></span>|<span data-ttu-id="0b337-569">Символ 8 Юникода</span><span class="sxs-lookup"><span data-stu-id="0b337-569">Unicode Character 8</span></span>|<span data-ttu-id="0b337-570">2</span><span class="sxs-lookup"><span data-stu-id="0b337-570">2</span></span>|
    <span data-ttu-id="0b337-571">0x14</span><span class="sxs-lookup"><span data-stu-id="0b337-571">0x14</span></span>|<span data-ttu-id="0b337-572">Символ 9 Юникода</span><span class="sxs-lookup"><span data-stu-id="0b337-572">Unicode Character 9</span></span>|<span data-ttu-id="0b337-573">2</span><span class="sxs-lookup"><span data-stu-id="0b337-573">2</span></span>|
    <span data-ttu-id="0b337-574">0x16</span><span class="sxs-lookup"><span data-stu-id="0b337-574">0x16</span></span>|<span data-ttu-id="0b337-575">Символ 10 Юникода</span><span class="sxs-lookup"><span data-stu-id="0b337-575">Unicode Character 10</span></span>|<span data-ttu-id="0b337-576">2</span><span class="sxs-lookup"><span data-stu-id="0b337-576">2</span></span>|
    <span data-ttu-id="0b337-577">0x18</span><span class="sxs-lookup"><span data-stu-id="0b337-577">0x18</span></span>|<span data-ttu-id="0b337-578">Символ 11 Юникода</span><span class="sxs-lookup"><span data-stu-id="0b337-578">Unicode Character 11</span></span>|<span data-ttu-id="0b337-579">2</span><span class="sxs-lookup"><span data-stu-id="0b337-579">2</span></span>|
    <span data-ttu-id="0b337-580">0x1A</span><span class="sxs-lookup"><span data-stu-id="0b337-580">0x1A</span></span>|<span data-ttu-id="0b337-581">Кластер LFN (для типа "Не используется" значением всегда будет 0)</span><span class="sxs-lookup"><span data-stu-id="0b337-581">LFN Cluster (unused always 0)</span></span>|<span data-ttu-id="0b337-582">2</span><span class="sxs-lookup"><span data-stu-id="0b337-582">2</span></span>|
    <span data-ttu-id="0b337-583">0x1C</span><span class="sxs-lookup"><span data-stu-id="0b337-583">0x1C</span></span>|<span data-ttu-id="0b337-584">Символ 12 Юникода</span><span class="sxs-lookup"><span data-stu-id="0b337-584">Unicode Character 12</span></span>|<span data-ttu-id="0b337-585">2</span><span class="sxs-lookup"><span data-stu-id="0b337-585">2</span></span>|
    <span data-ttu-id="0b337-586">0x1E</span><span class="sxs-lookup"><span data-stu-id="0b337-586">0x1E</span></span>|<span data-ttu-id="0b337-587">Символьный формат Юникода</span><span class="sxs-lookup"><span data-stu-id="0b337-587">Unicode Character</span></span> |<span data-ttu-id="0b337-588">13</span><span class="sxs-lookup"><span data-stu-id="0b337-588">13</span></span>|<span data-ttu-id="0b337-589">2</span><span class="sxs-lookup"><span data-stu-id="0b337-589">2</span></span>|

- <span data-ttu-id="0b337-590">**Символьный формат Юникода**</span><span class="sxs-lookup"><span data-stu-id="0b337-590">**Unicode Character**</span></span>

    <span data-ttu-id="0b337-591">Двухбайтовые поля *Символьный формат Юникода* предназначены для поддержки символов из разных языков.</span><span class="sxs-lookup"><span data-stu-id="0b337-591">The two-byte *Unicode Character* fields are designed to support characters from many different languages.</span></span> <span data-ttu-id="0b337-592">Стандартные символы ASCII представлены с помощью символа ASCII, хранящегося в первом байте символа Юникода, за которым следует символ пробела.</span><span class="sxs-lookup"><span data-stu-id="0b337-592">Standard ASCII characters are represented with the ASCII character stored in the first byte of the Unicode character followed by a space character.</span></span>

- <span data-ttu-id="0b337-593">**Атрибуты LFN**</span><span class="sxs-lookup"><span data-stu-id="0b337-593">**LFN Attributes**</span></span>

    <span data-ttu-id="0b337-594">Однобайтовое поле *Атрибуты LFN* содержит атрибуты, которые указывают запись каталога как запись каталога LFN.</span><span class="sxs-lookup"><span data-stu-id="0b337-594">The one-byte *LFN Attributes* field contains attributes that identify the directory entry as an LFN directory entry.</span></span> <span data-ttu-id="0b337-595">Это достигается с помощью задания значений для всех атрибутов: "только для чтения", "системный", "скрытый" и "том".</span><span class="sxs-lookup"><span data-stu-id="0b337-595">This is accomplished by having the read-only, system, hidden, and volume attributes all set.</span></span>

- <span data-ttu-id="0b337-596">**Тип LFN**</span><span class="sxs-lookup"><span data-stu-id="0b337-596">**LFN Type**</span></span>

    <span data-ttu-id="0b337-597">Однобайтовое поле *Тип LFN* является зарезервированным и всегда равно 0.</span><span class="sxs-lookup"><span data-stu-id="0b337-597">The one-byte *LFN Type* field is reserved and is always 0.</span></span>

- <span data-ttu-id="0b337-598">**Контрольная сумма LFN**</span><span class="sxs-lookup"><span data-stu-id="0b337-598">**LFN Checksum**</span></span>

    <span data-ttu-id="0b337-599">Однобайтовое поле *Контрольная сумма LFN* представляет собой контрольную сумму из 11 символов имени файла связанной MS DOS в формате 8.3.</span><span class="sxs-lookup"><span data-stu-id="0b337-599">The one-byte *LFN Checksum* field represents a checksum of the 11 characters of the associated MSDOS 8.3 file name.</span></span> <span data-ttu-id="0b337-600">Эта контрольная сумма хранится в каждой записи LFN, чтобы гарантировать, что запись LFN совпадает с соответствующим именем файла в формате 8.3.</span><span class="sxs-lookup"><span data-stu-id="0b337-600">This checksum is stored in each LFN entry to help ensure the LFN entry corresponds to the appropriate 8.3 file name.</span></span>

- <span data-ttu-id="0b337-601">**Кластер LFN**</span><span class="sxs-lookup"><span data-stu-id="0b337-601">**LFN Cluster**</span></span>

    <span data-ttu-id="0b337-602">Двухбайтовое поле *Кластер LFN* не используется и всегда равно 0.</span><span class="sxs-lookup"><span data-stu-id="0b337-602">The two-byte *LFN Cluster* field is unused and is always 0.</span></span>

    <span data-ttu-id="0b337-603">**ТАБЛИЦА 5. Записи каталога, состоящие из 39-символьного LFN**</span><span class="sxs-lookup"><span data-stu-id="0b337-603">**TABLE 5. Directory Entries Comprising a 39-Character LFN**</span></span>

    |<span data-ttu-id="0b337-604">Ввод</span><span class="sxs-lookup"><span data-stu-id="0b337-604">Entry</span></span>|<span data-ttu-id="0b337-605">Значение</span><span class="sxs-lookup"><span data-stu-id="0b337-605">Meaning</span></span>|
    |------------|-----------|
    |<span data-ttu-id="0b337-606">1</span><span class="sxs-lookup"><span data-stu-id="0b337-606">1</span></span>|<span data-ttu-id="0b337-607">Запись 3 каталога LFN</span><span class="sxs-lookup"><span data-stu-id="0b337-607">LFN Directory Entry 3</span></span>|
    |<span data-ttu-id="0b337-608">2</span><span class="sxs-lookup"><span data-stu-id="0b337-608">2</span></span>|<span data-ttu-id="0b337-609">Запись 2 каталога LFN</span><span class="sxs-lookup"><span data-stu-id="0b337-609">LFN Directory Entry 2</span></span>|
    |<span data-ttu-id="0b337-610">3</span><span class="sxs-lookup"><span data-stu-id="0b337-610">3</span></span>|<span data-ttu-id="0b337-611">Запись 1 каталога LFN</span><span class="sxs-lookup"><span data-stu-id="0b337-611">LFN Directory Entry 1</span></span>|
    |<span data-ttu-id="0b337-612">4</span><span class="sxs-lookup"><span data-stu-id="0b337-612">4</span></span>|<span data-ttu-id="0b337-613">Запись каталога в формате 8.3 (ttttt~n.xx)</span><span class="sxs-lookup"><span data-stu-id="0b337-613">8.3 Directory Entry (ttttt~n.xx)</span></span>|

### <a name="exfat-directory-description"></a><span data-ttu-id="0b337-614">Описание каталога exFAT</span><span class="sxs-lookup"><span data-stu-id="0b337-614">exFAT Directory Description</span></span>

<span data-ttu-id="0b337-615">Способы хранения файловой системой exFAT записи каталога и имени файла отличаются.</span><span class="sxs-lookup"><span data-stu-id="0b337-615">exFAT file system stores directory entry and file name differently.</span></span> <span data-ttu-id="0b337-616">Запись каталога содержит атрибуты записи, различные метки времени создания, изменения записи, а также доступа к ней.</span><span class="sxs-lookup"><span data-stu-id="0b337-616">Directory entry contains the entry's attributes, various timestamps on when the entry was created, modified, and accessed.</span></span> <span data-ttu-id="0b337-617">Другие сведения, такие как размер файла и начальный кластер, хранятся в записи каталога расширения для потоковой передачи, которая следует сразу за основной записью каталога.</span><span class="sxs-lookup"><span data-stu-id="0b337-617">Other information, such as file size and starting cluster, is stored in Stream Extension Directory Entry which immediately follows the primary directory entry.</span></span> <span data-ttu-id="0b337-618">Файловая система exFAT поддерживает только формат имени длинного файла (LFN),</span><span class="sxs-lookup"><span data-stu-id="0b337-618">exFAT supports only Long File Name (LFN) name format.</span></span> <span data-ttu-id="0b337-619">который хранится в записи каталога имени файла сразу после записи каталога расширения для потоковой передачи, как показано в таблице 2.</span><span class="sxs-lookup"><span data-stu-id="0b337-619">which is stored in File Name Directory Entry immediately follows the Stream Extension Directory Entry, as shown in Table 2.</span></span>

### <a name="exfat-file-directory-entry"></a><span data-ttu-id="0b337-620">Запись каталога файлов exFAT</span><span class="sxs-lookup"><span data-stu-id="0b337-620">exFAT File Directory Entry</span></span>

<span data-ttu-id="0b337-621">Описание записи каталога файлов exFAT и ее содержимого приведены в следующих таблице и абзацах.</span><span class="sxs-lookup"><span data-stu-id="0b337-621">A description of exFAT file directory entry and its contents is included in the following table and paragraphs.</span></span>

- <span data-ttu-id="0b337-622">**Тип записи**</span><span class="sxs-lookup"><span data-stu-id="0b337-622">**Entry Type**</span></span>

    <span data-ttu-id="0b337-623">В поле "Тип записи" нужно указывать тип соответствующей записи.</span><span class="sxs-lookup"><span data-stu-id="0b337-623">The entry type field indicates the type of this entry.</span></span> <span data-ttu-id="0b337-624">Если это поле записи каталога файлов, значением должно быть 0x85.</span><span class="sxs-lookup"><span data-stu-id="0b337-624">For File Directory Entry, this field must be 0x85.</span></span>

- <span data-ttu-id="0b337-625">**Число вторичных записей**</span><span class="sxs-lookup"><span data-stu-id="0b337-625">**Secondary Entry Count**</span></span>

    <span data-ttu-id="0b337-626">В поле *Число вторичных записей* указывается количество вторичных записей, которые следуют сразу за этой первичной записью.</span><span class="sxs-lookup"><span data-stu-id="0b337-626">The *secondary entry count* field indicates the number of secondary entries immediately follows this primary entry.</span></span> <span data-ttu-id="0b337-627">Вторичные записи, связанные с записью каталога файлов, включают в себя одну запись каталога расширения для потоковой передачи и одну или несколько записей каталога имен файлов.</span><span class="sxs-lookup"><span data-stu-id="0b337-627">Secondary entries associated with the file directory entry include one stream extension directory entry and one or more file name directory entries.</span></span>

    <span data-ttu-id="0b337-628">**ТАБЛИЦА 6. Запись каталога файлов exFAT**</span><span class="sxs-lookup"><span data-stu-id="0b337-628">**TABLE 6. exFAT File Directory Entry**</span></span>

    |<span data-ttu-id="0b337-629">Offset</span><span class="sxs-lookup"><span data-stu-id="0b337-629">Offset</span></span>|<span data-ttu-id="0b337-630">Поле</span><span class="sxs-lookup"><span data-stu-id="0b337-630">Field</span></span>|<span data-ttu-id="0b337-631">Число байтов</span><span class="sxs-lookup"><span data-stu-id="0b337-631">Number of Bytes</span></span>|
    |----|-----------|-|
    |<span data-ttu-id="0b337-632">0x00</span><span class="sxs-lookup"><span data-stu-id="0b337-632">0x00</span></span>|<span data-ttu-id="0b337-633">Тип записи</span><span class="sxs-lookup"><span data-stu-id="0b337-633">Entry Type</span></span>|<span data-ttu-id="0b337-634">1</span><span class="sxs-lookup"><span data-stu-id="0b337-634">1</span></span>|
    |<span data-ttu-id="0b337-635">0x01</span><span class="sxs-lookup"><span data-stu-id="0b337-635">0x01</span></span>|<span data-ttu-id="0b337-636">Вторичная запись</span><span class="sxs-lookup"><span data-stu-id="0b337-636">Secondary Entry</span></span>|<span data-ttu-id="0b337-637">1</span><span class="sxs-lookup"><span data-stu-id="0b337-637">1</span></span>|
    |<span data-ttu-id="0b337-638">0x02</span><span class="sxs-lookup"><span data-stu-id="0b337-638">0x02</span></span>|<span data-ttu-id="0b337-639">Контрольная сумма</span><span class="sxs-lookup"><span data-stu-id="0b337-639">Checksum</span></span>|<span data-ttu-id="0b337-640">2</span><span class="sxs-lookup"><span data-stu-id="0b337-640">2</span></span>|
    |<span data-ttu-id="0b337-641">0x04</span><span class="sxs-lookup"><span data-stu-id="0b337-641">0x04</span></span>|<span data-ttu-id="0b337-642">Атрибуты файла</span><span class="sxs-lookup"><span data-stu-id="0b337-642">File Attributes</span></span>|<span data-ttu-id="0b337-643">2</span><span class="sxs-lookup"><span data-stu-id="0b337-643">2</span></span>|
    |<span data-ttu-id="0b337-644">0x06</span><span class="sxs-lookup"><span data-stu-id="0b337-644">0x06</span></span>|<span data-ttu-id="0b337-645">Зарезервировано 1</span><span class="sxs-lookup"><span data-stu-id="0b337-645">Reserved 1</span></span>|<span data-ttu-id="0b337-646">2</span><span class="sxs-lookup"><span data-stu-id="0b337-646">2</span></span>|
    |<span data-ttu-id="0b337-647">0x08</span><span class="sxs-lookup"><span data-stu-id="0b337-647">0x08</span></span>|<span data-ttu-id="0b337-648">Отметка времени создания</span><span class="sxs-lookup"><span data-stu-id="0b337-648">Create Timestamp</span></span>|<span data-ttu-id="0b337-649">4</span><span class="sxs-lookup"><span data-stu-id="0b337-649">4</span></span>|
    |<span data-ttu-id="0b337-650">0x0C</span><span class="sxs-lookup"><span data-stu-id="0b337-650">0x0C</span></span>|<span data-ttu-id="0b337-651">Метка времени последнего изменения</span><span class="sxs-lookup"><span data-stu-id="0b337-651">Last Modified Timestamp</span></span>|<span data-ttu-id="0b337-652">4</span><span class="sxs-lookup"><span data-stu-id="0b337-652">4</span></span>|
    |<span data-ttu-id="0b337-653">0x10</span><span class="sxs-lookup"><span data-stu-id="0b337-653">0x10</span></span>|<span data-ttu-id="0b337-654">Метка времени последнего доступа</span><span class="sxs-lookup"><span data-stu-id="0b337-654">Last Accessed Timestamp</span></span>|<span data-ttu-id="0b337-655">4</span><span class="sxs-lookup"><span data-stu-id="0b337-655">4</span></span>|
    |<span data-ttu-id="0b337-656">0x14</span><span class="sxs-lookup"><span data-stu-id="0b337-656">0x14</span></span>|<span data-ttu-id="0b337-657">Приращение создания на 10 мс</span><span class="sxs-lookup"><span data-stu-id="0b337-657">Create 10ms Increment</span></span>|<span data-ttu-id="0b337-658">1</span><span class="sxs-lookup"><span data-stu-id="0b337-658">1</span></span>|
    |<span data-ttu-id="0b337-659">0x15</span><span class="sxs-lookup"><span data-stu-id="0b337-659">0x15</span></span>|<span data-ttu-id="0b337-660">Приращение последнего изменения на 10 мс</span><span class="sxs-lookup"><span data-stu-id="0b337-660">Last Modified 10ms Increment</span></span>|<span data-ttu-id="0b337-661">1</span><span class="sxs-lookup"><span data-stu-id="0b337-661">1</span></span>|
    |<span data-ttu-id="0b337-662">0x16</span><span class="sxs-lookup"><span data-stu-id="0b337-662">0x16</span></span>|<span data-ttu-id="0b337-663">Создание смещения времени в формате UTC</span><span class="sxs-lookup"><span data-stu-id="0b337-663">Create UTC Offset</span></span>|<span data-ttu-id="0b337-664">1</span><span class="sxs-lookup"><span data-stu-id="0b337-664">1</span></span>|
    |<span data-ttu-id="0b337-665">0x17</span><span class="sxs-lookup"><span data-stu-id="0b337-665">0x17</span></span>|<span data-ttu-id="0b337-666">Смещение времени последнего изменения в формате UTC</span><span class="sxs-lookup"><span data-stu-id="0b337-666">Last Modified UTC Offset</span></span>|<span data-ttu-id="0b337-667">1</span><span class="sxs-lookup"><span data-stu-id="0b337-667">1</span></span>|
    |<span data-ttu-id="0b337-668">0x18</span><span class="sxs-lookup"><span data-stu-id="0b337-668">0x18</span></span>|<span data-ttu-id="0b337-669">Смещение времени последнего доступа в формате UTC</span><span class="sxs-lookup"><span data-stu-id="0b337-669">Last Access UTC Offset</span></span>|<span data-ttu-id="0b337-670">1</span><span class="sxs-lookup"><span data-stu-id="0b337-670">1</span></span>|
    |<span data-ttu-id="0b337-671">0x19</span><span class="sxs-lookup"><span data-stu-id="0b337-671">0x19</span></span>|<span data-ttu-id="0b337-672">Зарезервировано 2</span><span class="sxs-lookup"><span data-stu-id="0b337-672">Reserved 2</span></span>|<span data-ttu-id="0b337-673">7</span><span class="sxs-lookup"><span data-stu-id="0b337-673">7</span></span>|

- <span data-ttu-id="0b337-674">**Контрольная сумма**</span><span class="sxs-lookup"><span data-stu-id="0b337-674">**Checksum**</span></span>

    <span data-ttu-id="0b337-675">Поле *Контрольная сумма* содержит значение контрольной суммы по всем записям в наборе записей каталога (запись каталога файлов и его дополнительные записи).</span><span class="sxs-lookup"><span data-stu-id="0b337-675">The *checksum* field contains the value of the checksum over all entries in the directory entry set (the file directory entry and its secondary entries).</span></span>

- <span data-ttu-id="0b337-676">**Атрибуты файла**</span><span class="sxs-lookup"><span data-stu-id="0b337-676">**File Attributes**</span></span>

    <span data-ttu-id="0b337-677">Запись поля однобайтовых атрибутов содержит ряд битов, которые определяют различные свойства записи каталога.</span><span class="sxs-lookup"><span data-stu-id="0b337-677">The one-byte attributes field entry contains a series of bits that specify various properties of the directory entry.</span></span> <span data-ttu-id="0b337-678">Определение большинства битов атрибутов схоже с FAT12/16/32.</span><span class="sxs-lookup"><span data-stu-id="0b337-678">The definition of most attributes bits is identical to FAT 12/16/32.</span></span> <span data-ttu-id="0b337-679">Ниже приведены определения атрибутов каталога:</span><span class="sxs-lookup"><span data-stu-id="0b337-679">Directory attribute definitions are as follows:</span></span>

    |<span data-ttu-id="0b337-680">Бит атрибута</span><span class="sxs-lookup"><span data-stu-id="0b337-680">Attribute Bit</span></span>|<span data-ttu-id="0b337-681">Значение</span><span class="sxs-lookup"><span data-stu-id="0b337-681">Meaning</span></span>|
    |------------|-----------|
    |<span data-ttu-id="0b337-682">0x01</span><span class="sxs-lookup"><span data-stu-id="0b337-682">0x01</span></span>| <span data-ttu-id="0b337-683">Запись доступна только для чтения</span><span class="sxs-lookup"><span data-stu-id="0b337-683">Entry is read-only</span></span>|
    |<span data-ttu-id="0b337-684">0x02</span><span class="sxs-lookup"><span data-stu-id="0b337-684">0x02</span></span>|<span data-ttu-id="0b337-685">Запись скрыта</span><span class="sxs-lookup"><span data-stu-id="0b337-685">Entry is hidden</span></span>|
    |<span data-ttu-id="0b337-686">0x04</span><span class="sxs-lookup"><span data-stu-id="0b337-686">0x04</span></span>|<span data-ttu-id="0b337-687">Запись является системной записью</span><span class="sxs-lookup"><span data-stu-id="0b337-687">Entry is a system entry</span></span>|
    |<span data-ttu-id="0b337-688">0x08</span><span class="sxs-lookup"><span data-stu-id="0b337-688">0x08</span></span>|<span data-ttu-id="0b337-689">Запись зарезервирована</span><span class="sxs-lookup"><span data-stu-id="0b337-689">Entry is reserved</span></span>|
    |<span data-ttu-id="0b337-690">0x10</span><span class="sxs-lookup"><span data-stu-id="0b337-690">0x10</span></span>|<span data-ttu-id="0b337-691">Запись является каталогом</span><span class="sxs-lookup"><span data-stu-id="0b337-691">Entry is a directory</span></span>|
    |<span data-ttu-id="0b337-692">0x20</span><span class="sxs-lookup"><span data-stu-id="0b337-692">0x20</span></span>|<span data-ttu-id="0b337-693">Запись изменена</span><span class="sxs-lookup"><span data-stu-id="0b337-693">Entry has been modified</span></span>|
    |<span data-ttu-id="0b337-694">Все остальные биты</span><span class="sxs-lookup"><span data-stu-id="0b337-694">All other bits</span></span>|<span data-ttu-id="0b337-695">Зарезервировано</span><span class="sxs-lookup"><span data-stu-id="0b337-695">Reserved</span></span>|

- <span data-ttu-id="0b337-696">**Reserved1**</span><span class="sxs-lookup"><span data-stu-id="0b337-696">**Reserved1**</span></span>

    <span data-ttu-id="0b337-697">Это поле должно быть равным нулю.</span><span class="sxs-lookup"><span data-stu-id="0b337-697">This field should be zero.</span></span>

- <span data-ttu-id="0b337-698">**Отметка времени создания**</span><span class="sxs-lookup"><span data-stu-id="0b337-698">**Create Timestamp**</span></span>

    <span data-ttu-id="0b337-699">Поле *Метка времени создания*, а также сведения из поля *Приращение создания на 10 мс* описывают местные дату и время создания файла или каталога.</span><span class="sxs-lookup"><span data-stu-id="0b337-699">The *create timestamp* field, combining information from the *create 10ms Increment* field, describes the local date and time the file or the directory was created.</span></span>

- <span data-ttu-id="0b337-700">**Метка времени последнего изменения**</span><span class="sxs-lookup"><span data-stu-id="0b337-700">**Last Modified Timestamp**</span></span>

    <span data-ttu-id="0b337-701">Поле *Метка времени последнего изменения*, а также сведения из поля *Приращение последнего изменения на 10 мс* описывают местные дату и время последнего изменения файла или каталога.</span><span class="sxs-lookup"><span data-stu-id="0b337-701">The *last modified timestamp* field, combining information from the *last modified 10ms increment* field, describe the local date and time the file or the directory was last modified.</span></span> <span data-ttu-id="0b337-702">См. ниже примечания к каждой метке времени.</span><span class="sxs-lookup"><span data-stu-id="0b337-702">See notes below on timestamps.</span></span>

- <span data-ttu-id="0b337-703">**Метка времени последнего доступа**</span><span class="sxs-lookup"><span data-stu-id="0b337-703">**Last Accessed Timestamp**</span></span>

    <span data-ttu-id="0b337-704">Поле *Метка времени последнего доступа* описывает местные дату и время последнего доступа к файлу или каталогу.</span><span class="sxs-lookup"><span data-stu-id="0b337-704">The *last accessed timestamp* field describes the local date and time the file or the directory was last accessed.</span></span> <span data-ttu-id="0b337-705">См. ниже примечания к каждой метке времени.</span><span class="sxs-lookup"><span data-stu-id="0b337-705">See notes below on timestamps.</span></span>

- <span data-ttu-id="0b337-706">**Приращение создания на 10 мс**</span><span class="sxs-lookup"><span data-stu-id="0b337-706">**Create 10ms Increment**</span></span>

    <span data-ttu-id="0b337-707">Поле *Приращение создания на 10 мс*, а также сведения из поля *Метка времени создания* описывают местные дату и время создания файла или каталога.</span><span class="sxs-lookup"><span data-stu-id="0b337-707">The *create 10ms increment* field, combining information from the *create timestamp* field, describes the local date and time the file or the directory was created.</span></span> <span data-ttu-id="0b337-708">См. ниже примечания к каждой метке времени.</span><span class="sxs-lookup"><span data-stu-id="0b337-708">See notes below on timestamps.</span></span>

- <span data-ttu-id="0b337-709">**Приращение последнего изменения на 10 мс**</span><span class="sxs-lookup"><span data-stu-id="0b337-709">**Last Modified 10ms Increment**</span></span>

    <span data-ttu-id="0b337-710">Поле *Приращение последнего изменения на 10 мс*, а также сведения из поля *Метка времени последнего изменения* описывают местные дату и время последнего изменения файла или каталога.</span><span class="sxs-lookup"><span data-stu-id="0b337-710">The *last modified 10ms increment* field, combining information from the *last modified timestamp* field, describe the local date and time the file or the directory was last modified.</span></span> <span data-ttu-id="0b337-711">См. ниже примечания к каждой метке времени.</span><span class="sxs-lookup"><span data-stu-id="0b337-711">See notes below on timestamps.</span></span>

- <span data-ttu-id="0b337-712">**Создание смещения времени в формате UTC**</span><span class="sxs-lookup"><span data-stu-id="0b337-712">**Create UTC Offset**</span></span>

    <span data-ttu-id="0b337-713">В поле *Создание смещения времени в формате UTC* описывается разница между местным временем и временем в формате UTC при создании файла или каталога.</span><span class="sxs-lookup"><span data-stu-id="0b337-713">The *create UTC offset* field describes the difference between the local time and the UTC time, when the file or the directory was created.</span></span> <span data-ttu-id="0b337-714">См. ниже примечания к каждой метке времени.</span><span class="sxs-lookup"><span data-stu-id="0b337-714">See notes below on timestamps.</span></span>

- <span data-ttu-id="0b337-715">**Смещение времени последнего изменения в формате UTC**</span><span class="sxs-lookup"><span data-stu-id="0b337-715">**Last Modified UTC Offset**</span></span>

    <span data-ttu-id="0b337-716">В поле *Смещение времени последнего изменения в формате UTC* описывается разница между местным временем и временем в формате UTC при последнем изменении файла или каталога.</span><span class="sxs-lookup"><span data-stu-id="0b337-716">The *last modified UTC offset* field describes the difference between the local time and the UTC time, when the file or the directory was last modified.</span></span> <span data-ttu-id="0b337-717">См. ниже примечания к каждой метке времени.</span><span class="sxs-lookup"><span data-stu-id="0b337-717">See notes below on timestamps.</span></span>

- <span data-ttu-id="0b337-718">**Смещение времени последнего доступа в формате UTC**</span><span class="sxs-lookup"><span data-stu-id="0b337-718">**Last Accessed UTC Offset**</span></span>

    <span data-ttu-id="0b337-719">В поле *Смещение времени последнего доступа в формате UTC* описывается разница между местным временем и временем в формате UTC при последнем доступе к файлу или каталогу.</span><span class="sxs-lookup"><span data-stu-id="0b337-719">The *last accessed UTC offset* field describes the difference between the local time and the UTC time, when the file or the directory was last accessed.</span></span> <span data-ttu-id="0b337-720">См. ниже примечания к каждой метке времени.</span><span class="sxs-lookup"><span data-stu-id="0b337-720">See notes below on timestamps.</span></span>

- <span data-ttu-id="0b337-721">**Зарезервировано 2**</span><span class="sxs-lookup"><span data-stu-id="0b337-721">**Reserved2**</span></span>

    <span data-ttu-id="0b337-722">Это поле должно быть равным нулю.</span><span class="sxs-lookup"><span data-stu-id="0b337-722">This field should be zero.</span></span>

### <a name="notes-on-timestamps"></a><span data-ttu-id="0b337-723">Примечания к меткам времени</span><span class="sxs-lookup"><span data-stu-id="0b337-723">Notes on Timestamps</span></span>

- <span data-ttu-id="0b337-724">**Запись метки времени**. Поля метки времени интерпретируются следующим образом:</span><span class="sxs-lookup"><span data-stu-id="0b337-724">**Timestamp Entry** The timestamp fields are interpreted as follows:</span></span>

- <span data-ttu-id="0b337-725">**Поля с приращением 10 мс**. Значение, предоставляемое для полей с приращением 10 мс, обеспечивает большую детализацию для значения меток времени.</span><span class="sxs-lookup"><span data-stu-id="0b337-725">**10ms Increment Fields** The value in the 10ms increment field provides finer granularity to the timestamp value.</span></span> <span data-ttu-id="0b337-726">Допустимые значения: от 0 (0 мс) до 199 (1990 мс).</span><span class="sxs-lookup"><span data-stu-id="0b337-726">The valid values are between 0 (0ms) and 199 (1990ms).</span></span>

     ![Поля с приращением 10 мс](./media/user-guide/10ms-increment-fields.png)

- <span data-ttu-id="0b337-728">**Поле смещения времени в формате UTC**</span><span class="sxs-lookup"><span data-stu-id="0b337-728">**UTC Offset Field**</span></span>

     ![Поле смещения времени в формате UTC](./media/user-guide/utc-offset-field.png)

- <span data-ttu-id="0b337-730">**Значение смещения**</span><span class="sxs-lookup"><span data-stu-id="0b337-730">**Offset Value**</span></span>

    <span data-ttu-id="0b337-731">7-битовое целое число со знаком представляет собой смещение от времени в формате UTC с приращением 15 минут.</span><span class="sxs-lookup"><span data-stu-id="0b337-731">7-bit signed integer represents offset from UTC time, in 15 minutes increments.</span></span>

- <span data-ttu-id="0b337-732">**Допустимо**</span><span class="sxs-lookup"><span data-stu-id="0b337-732">**Valid**</span></span>

    <span data-ttu-id="0b337-733">Действительно ли значение в поле смещения.</span><span class="sxs-lookup"><span data-stu-id="0b337-733">Whether or not the value in the offset field is valid.</span></span> <span data-ttu-id="0b337-734">0 значит, что значение в поле "Значение смещения" недопустимо.</span><span class="sxs-lookup"><span data-stu-id="0b337-734">0 indicates the value in the offset value field is invalid.</span></span> <span data-ttu-id="0b337-735">1 указывает на то, что значение является допустимым.</span><span class="sxs-lookup"><span data-stu-id="0b337-735">1 indicates the value is valid.</span></span>

### <a name="stream-extension-directory-entry"></a><span data-ttu-id="0b337-736">Запись каталога расширения для потоковой передачи</span><span class="sxs-lookup"><span data-stu-id="0b337-736">Stream Extension Directory Entry</span></span>

<span data-ttu-id="0b337-737">Описание записи каталога файлов расширения для потоковой передачи и ее содержимого приведены в следующих таблице и абзацах.</span><span class="sxs-lookup"><span data-stu-id="0b337-737">A description of Stream Extension Directory Entry and its contents is included in the following table.</span></span>

<span data-ttu-id="0b337-738">**ТАБЛИЦА 7. Запись каталога расширения для потоковой передачи**</span><span class="sxs-lookup"><span data-stu-id="0b337-738">**TABLE 7. Stream Extension Directory Entry**</span></span>

|<span data-ttu-id="0b337-739">Offset</span><span class="sxs-lookup"><span data-stu-id="0b337-739">Offset</span></span>|<span data-ttu-id="0b337-740">Поле</span><span class="sxs-lookup"><span data-stu-id="0b337-740">Field</span></span>| <span data-ttu-id="0b337-741">Число байтов</span><span class="sxs-lookup"><span data-stu-id="0b337-741">Number of Bytes</span></span>|
|------------|-----------|-------|
|<span data-ttu-id="0b337-742">0x00</span><span class="sxs-lookup"><span data-stu-id="0b337-742">0x00</span></span>|<span data-ttu-id="0b337-743">Тип записи</span><span class="sxs-lookup"><span data-stu-id="0b337-743">Entry Type</span></span>|<span data-ttu-id="0b337-744">1</span><span class="sxs-lookup"><span data-stu-id="0b337-744">1</span></span>|
|<span data-ttu-id="0b337-745">0x01</span><span class="sxs-lookup"><span data-stu-id="0b337-745">0x01</span></span>|<span data-ttu-id="0b337-746">Флаги</span><span class="sxs-lookup"><span data-stu-id="0b337-746">Flags</span></span>|<span data-ttu-id="0b337-747">1</span><span class="sxs-lookup"><span data-stu-id="0b337-747">1</span></span>|
|<span data-ttu-id="0b337-748">0x02</span><span class="sxs-lookup"><span data-stu-id="0b337-748">0x02</span></span>|<span data-ttu-id="0b337-749">Зарезервировано 1</span><span class="sxs-lookup"><span data-stu-id="0b337-749">Reserved 1</span></span>|<span data-ttu-id="0b337-750">1</span><span class="sxs-lookup"><span data-stu-id="0b337-750">1</span></span>|
|<span data-ttu-id="0b337-751">0x03</span><span class="sxs-lookup"><span data-stu-id="0b337-751">0x03</span></span>|<span data-ttu-id="0b337-752">Длина имени</span><span class="sxs-lookup"><span data-stu-id="0b337-752">Name Length</span></span>|<span data-ttu-id="0b337-753">1</span><span class="sxs-lookup"><span data-stu-id="0b337-753">1</span></span>|
|<span data-ttu-id="0b337-754">0x04</span><span class="sxs-lookup"><span data-stu-id="0b337-754">0x04</span></span>|<span data-ttu-id="0b337-755">Хэш имени</span><span class="sxs-lookup"><span data-stu-id="0b337-755">Name Hash</span></span>|<span data-ttu-id="0b337-756">2</span><span class="sxs-lookup"><span data-stu-id="0b337-756">2</span></span>|
|<span data-ttu-id="0b337-757">0x06</span><span class="sxs-lookup"><span data-stu-id="0b337-757">0x06</span></span>|<span data-ttu-id="0b337-758">Зарезервировано 2</span><span class="sxs-lookup"><span data-stu-id="0b337-758">Reserved 2</span></span>|<span data-ttu-id="0b337-759">2</span><span class="sxs-lookup"><span data-stu-id="0b337-759">2</span></span>|
|<span data-ttu-id="0b337-760">0x08</span><span class="sxs-lookup"><span data-stu-id="0b337-760">0x08</span></span>|<span data-ttu-id="0b337-761">Допустимая длина данных</span><span class="sxs-lookup"><span data-stu-id="0b337-761">Valid Data Length</span></span>|<span data-ttu-id="0b337-762">8</span><span class="sxs-lookup"><span data-stu-id="0b337-762">8</span></span>|
|<span data-ttu-id="0b337-763">0x10</span><span class="sxs-lookup"><span data-stu-id="0b337-763">0x10</span></span>|<span data-ttu-id="0b337-764">Зарезервировано 3</span><span class="sxs-lookup"><span data-stu-id="0b337-764">Reserved 3</span></span>|<span data-ttu-id="0b337-765">4</span><span class="sxs-lookup"><span data-stu-id="0b337-765">4</span></span>|
|<span data-ttu-id="0b337-766">0x14</span><span class="sxs-lookup"><span data-stu-id="0b337-766">0x14</span></span>|<span data-ttu-id="0b337-767">Первый кластер</span><span class="sxs-lookup"><span data-stu-id="0b337-767">First Cluster</span></span>|<span data-ttu-id="0b337-768">4</span><span class="sxs-lookup"><span data-stu-id="0b337-768">4</span></span>|
|<span data-ttu-id="0b337-769">0x18</span><span class="sxs-lookup"><span data-stu-id="0b337-769">0x18</span></span>|<span data-ttu-id="0b337-770">Длина данных</span><span class="sxs-lookup"><span data-stu-id="0b337-770">Data Length</span></span>|<span data-ttu-id="0b337-771">8</span><span class="sxs-lookup"><span data-stu-id="0b337-771">8</span></span>|

- <span data-ttu-id="0b337-772">**Тип записи**</span><span class="sxs-lookup"><span data-stu-id="0b337-772">**Entry Type**</span></span>

    <span data-ttu-id="0b337-773">В поле *Тип записи* нужно указывать тип соответствующей записи.</span><span class="sxs-lookup"><span data-stu-id="0b337-773">The *entry type* field indicates the type of this entry.</span></span> <span data-ttu-id="0b337-774">Для записи каталога расширения для потоковой передачи это поле должно иметь значение 0xC0.</span><span class="sxs-lookup"><span data-stu-id="0b337-774">For streaming extension Directory Entry, this field must be 0xC0.</span></span>

- <span data-ttu-id="0b337-775">**Флаги**</span><span class="sxs-lookup"><span data-stu-id="0b337-775">**Flags**</span></span>

    <span data-ttu-id="0b337-776">Это поле содержит ряд битов, задающих различные свойства:</span><span class="sxs-lookup"><span data-stu-id="0b337-776">This field contains a series of bits that specify various properties:</span></span>
    |<span data-ttu-id="0b337-777">Бит флага</span><span class="sxs-lookup"><span data-stu-id="0b337-777">Flag Bit</span></span>|<span data-ttu-id="0b337-778">Значение</span><span class="sxs-lookup"><span data-stu-id="0b337-778">Meaning</span></span>    |
    |-----------------|-----------|
    |<span data-ttu-id="0b337-779">0x01</span><span class="sxs-lookup"><span data-stu-id="0b337-779">0x01</span></span>            |<span data-ttu-id="0b337-780">Это поле указывает, возможно ли выделение кластеров.</span><span class="sxs-lookup"><span data-stu-id="0b337-780">This field indicates whether or not allocation of clusters is possible.</span></span> <span data-ttu-id="0b337-781">Для этого поля нужно задавать значение 1.</span><span class="sxs-lookup"><span data-stu-id="0b337-781">This field should be 1.</span></span>|
    |<span data-ttu-id="0b337-782">0x02</span><span class="sxs-lookup"><span data-stu-id="0b337-782">0x02</span></span>            |<span data-ttu-id="0b337-783">Это поле указывает, являются ли связанные кластеры непрерывными.</span><span class="sxs-lookup"><span data-stu-id="0b337-783">This field indicates whether or not the associated clusters are contiguous.</span></span> <span data-ttu-id="0b337-784">Значение 0 значит, что запись FAT является допустимой и файловая система FileX должна следовать по цепочке FAT.</span><span class="sxs-lookup"><span data-stu-id="0b337-784">A value 0 means the FAT entry is valid and FileX shall follow the FAT chain.</span></span> <span data-ttu-id="0b337-785">Значение 1 значит, что запись FAT недопустима и кластеры непрерывны.</span><span class="sxs-lookup"><span data-stu-id="0b337-785">A value 1 means the FAT entry is invalid and the clusters are contiguous.</span></span>|
    |<span data-ttu-id="0b337-786">Все остальные биты</span><span class="sxs-lookup"><span data-stu-id="0b337-786">All other bits</span></span>    |<span data-ttu-id="0b337-787">Зарезервировано.</span><span class="sxs-lookup"><span data-stu-id="0b337-787">Reserved.</span></span>|

- <span data-ttu-id="0b337-788">**Зарезервировано 1**</span><span class="sxs-lookup"><span data-stu-id="0b337-788">**Reserved 1**</span></span>

    <span data-ttu-id="0b337-789">Для этого поля нужно задавать значение 0.</span><span class="sxs-lookup"><span data-stu-id="0b337-789">This field should be 0.</span></span>

- <span data-ttu-id="0b337-790">**Длина имени**</span><span class="sxs-lookup"><span data-stu-id="0b337-790">**Name Length**</span></span>

    <span data-ttu-id="0b337-791">Поле *Длина имени* содержит длину строки в Юникоде в записях каталога имен файлов, содержащихся вместе.</span><span class="sxs-lookup"><span data-stu-id="0b337-791">The *name length* field contains the length of the unicode string in the file name directory entries collectively contain.</span></span> <span data-ttu-id="0b337-792">Записи каталога имен файлов должны следовать сразу после записи каталога расширения потоковой передачи.</span><span class="sxs-lookup"><span data-stu-id="0b337-792">The file name directory entries shall immediately follow this stream extension directory entry.</span></span>

- <span data-ttu-id="0b337-793">**Хэш имени**</span><span class="sxs-lookup"><span data-stu-id="0b337-793">**Name Hash**</span></span>

    <span data-ttu-id="0b337-794">Поле *Хэш имени* — это 2-байтовая запись, содержащая значение хэша имени файла с учетом регистра.</span><span class="sxs-lookup"><span data-stu-id="0b337-794">The *name hash* field is a 2-byte entry, containing the hash value of the up-cased file name.</span></span> <span data-ttu-id="0b337-795">Значение хэша позволяет ускорить поиск по имени файла или каталога: если значения хэша не совпадают, имя файла, связанное с этой записью, не считается соответствием.</span><span class="sxs-lookup"><span data-stu-id="0b337-795">The hash value allows faster file/directory name lookup: if the hash values don't match, the file name associated with this entry is not a match.</span></span>

- <span data-ttu-id="0b337-796">**Зарезервировано 2**</span><span class="sxs-lookup"><span data-stu-id="0b337-796">**Reserved 2**</span></span>

    <span data-ttu-id="0b337-797">Для этого поля нужно задавать значение 0.</span><span class="sxs-lookup"><span data-stu-id="0b337-797">This field should be 0.</span></span>

- <span data-ttu-id="0b337-798">**Допустимая длина данных**</span><span class="sxs-lookup"><span data-stu-id="0b337-798">**Valid Data Length**</span></span>

    <span data-ttu-id="0b337-799">Поле *Допустимая длина данных* указывает на объем допустимых данных в файле.</span><span class="sxs-lookup"><span data-stu-id="0b337-799">The *valid data length* field indicates the amount of valid data in the file.</span></span>

- <span data-ttu-id="0b337-800">**Зарезервировано 3**</span><span class="sxs-lookup"><span data-stu-id="0b337-800">**Reserved 3**</span></span>

    <span data-ttu-id="0b337-801">Это значение должно быть равным 0.</span><span class="sxs-lookup"><span data-stu-id="0b337-801">This filed should be 0.</span></span>

- <span data-ttu-id="0b337-802">**Первый кластер**</span><span class="sxs-lookup"><span data-stu-id="0b337-802">**First Cluster**</span></span>

    <span data-ttu-id="0b337-803">Поле *Первый кластер* содержит индекс первого кластера потока данных.</span><span class="sxs-lookup"><span data-stu-id="0b337-803">The *first cluster* field contains index of the first cluster of the data stream.</span></span>

- <span data-ttu-id="0b337-804">**Длина данных**</span><span class="sxs-lookup"><span data-stu-id="0b337-804">**Data Length**</span></span>

    <span data-ttu-id="0b337-805">Поле *Длина данных* содержит общее число байтов в выделенных кластерах.</span><span class="sxs-lookup"><span data-stu-id="0b337-805">The *data length* field contains the total number of bytes in the allocated clusters.</span></span> <span data-ttu-id="0b337-806">Это значение может быть больше значения поля *Допустимая длина данных*, так как exFAT допускает предварительное выделение кластеров данных.</span><span class="sxs-lookup"><span data-stu-id="0b337-806">This value may be larger than *Valid Data Length*, since exFAT allows pre-allocation of data clusters.</span></span>

### <a name="root-directory"></a><span data-ttu-id="0b337-807">Корневой каталог</span><span class="sxs-lookup"><span data-stu-id="0b337-807">Root Directory</span></span>

<span data-ttu-id="0b337-808">В 12- и 16-битных форматах FAT *корневой каталог* расположен сразу после всех секторов FAT на носителе, и его можно найти, проверив \***fx_media_root_sector_start** _ в открытом блоке управления \*FX_MEDIA\*\*.</span><span class="sxs-lookup"><span data-stu-id="0b337-808">In FAT 12- and 16-bit formats, the *root directory* is located immediately after all the FAT sectors in the media and can be located by examining the ***fx_media_root_sector_start** _ in an opened _ *FX_MEDIA** control block.</span></span> <span data-ttu-id="0b337-809">Размер корневого каталога, если говорить о количестве записей каталога (размер каждого 32 байта), определяется соответствующей записью в загрузочной записи носителя.</span><span class="sxs-lookup"><span data-stu-id="0b337-809">The size of the root directory, in terms of number of directory entries (each 32 bytes in size), is determined by the corresponding entry in the media's boot record.</span></span>

<span data-ttu-id="0b337-810">Корневой каталог в FAT-32 и exFAT можно найти в любом месте доступных кластеров.</span><span class="sxs-lookup"><span data-stu-id="0b337-810">The root directory in FAT-32 and exFAT can be located anywhere in the available clusters.</span></span> <span data-ttu-id="0b337-811">Его расположение и размер определяются на основе загрузочной записи при открытии носителя.</span><span class="sxs-lookup"><span data-stu-id="0b337-811">Its location and size are determined from the boot record when the media is opened.</span></span> <span data-ttu-id="0b337-812">Открыв носитель, вы можете использовать поле ***fx_media_root_sector_start***, чтобы найти начальный кластер корневого каталога FAT-32 или exFAT.</span><span class="sxs-lookup"><span data-stu-id="0b337-812">After the media is opened, the ***fx_media_root_sector_start*** field can be used to find the starting cluster of the FAT-32 or exFAT root directory.</span></span>

### <a name="subdirectories"></a><span data-ttu-id="0b337-813">Подкаталоги</span><span class="sxs-lookup"><span data-stu-id="0b337-813">Subdirectories</span></span>

<span data-ttu-id="0b337-814">В системе FAT может находиться любое количество подкаталогов.</span><span class="sxs-lookup"><span data-stu-id="0b337-814">There is any number of subdirectories in an FAT system.</span></span> <span data-ttu-id="0b337-815">Имя подкаталога содержится в записи каталога так же, как имя файла.</span><span class="sxs-lookup"><span data-stu-id="0b337-815">The name of the subdirectory resides in a directory entry just like a file name.</span></span> <span data-ttu-id="0b337-816">Однако спецификация атрибута каталога (0x10) задана таким образом, чтобы указывать, что запись является подкаталогом, а размер файла всегда равен нулю.</span><span class="sxs-lookup"><span data-stu-id="0b337-816">However, the directory attribute specification (0x10) is set to indicate the entry is a subdirectory and the file size is always zero.</span></span>
<span data-ttu-id="0b337-817">На рисунке 3 показано, как выглядит типичная структура подкаталогов для нового подкаталога одного кластера ***SAMPLE.DIR** _ с одним файлом с именем _*_FILE.TXT_\*\*.</span><span class="sxs-lookup"><span data-stu-id="0b337-817">Figure 3 shows what a typical subdirectory structure looks like for a new singlecluster subdirectory named ***SAMPLE.DIR** _ with one file called _*_FILE.TXT_\*\*.</span></span>
<span data-ttu-id="0b337-818">В большинстве случаев подкаталоги очень похожи на записи файлов.</span><span class="sxs-lookup"><span data-stu-id="0b337-818">In most ways, subdirectories are very similar to file entries.</span></span> <span data-ttu-id="0b337-819">Первое поле кластера указывает на первый кластер связанного списка кластеров.</span><span class="sxs-lookup"><span data-stu-id="0b337-819">The first cluster field points to the first cluster of a linked list of clusters.</span></span> <span data-ttu-id="0b337-820">При создании подкаталога первые две записи каталога содержат каталоги по умолчанию, а именно каталог "." и каталог "..".</span><span class="sxs-lookup"><span data-stu-id="0b337-820">When a subdirectory is created, the first two directory entries contain default directories, namely the "." directory and the ".." directory.</span></span> <span data-ttu-id="0b337-821">Каталог "." указывает на сам подкаталог, а каталог ".." — на предыдущий или родительский каталог.</span><span class="sxs-lookup"><span data-stu-id="0b337-821">The "." directory points to the subdirectory itself, while the ".." directory points to the previous or parent directory.</span></span>

### <a name="global-default-path"></a><span data-ttu-id="0b337-822">Глобальный путь по умолчанию</span><span class="sxs-lookup"><span data-stu-id="0b337-822">Global Default Path</span></span>

<span data-ttu-id="0b337-823">FileX предоставляет глобальный путь по умолчанию для носителя.</span><span class="sxs-lookup"><span data-stu-id="0b337-823">FileX provides a global default path for the media.</span></span> <span data-ttu-id="0b337-824">Путь по умолчанию используется в любом файле или службе каталогов, в которых полный путь не указан явно.</span><span class="sxs-lookup"><span data-stu-id="0b337-824">The default path is used in any file or directory service that does not explicitly specify a full path.</span></span>

<span data-ttu-id="0b337-825">Изначально в качестве значения глобального каталога по умолчанию задается корневой каталог носителя.</span><span class="sxs-lookup"><span data-stu-id="0b337-825">Initially, the global default directory is set to the media's root directory.</span></span> <span data-ttu-id="0b337-826">Приложение может изменить это значение путем вызова ***fx_directory_default_set***.</span><span class="sxs-lookup"><span data-stu-id="0b337-826">This may be changed by the application by calling ***fx_directory_default_set***.</span></span>

<span data-ttu-id="0b337-827">Текущий путь по умолчанию для носителя можно проверить, вызвав \***fx_directory_default_get** _.</span><span class="sxs-lookup"><span data-stu-id="0b337-827">The current default path for the media may be examined by calling \***fx_directory_default_get** _.</span></span> <span data-ttu-id="0b337-828">Эта подпрограмма предоставляет указатель строки на строку пути по умолчанию, администрируемую в блоке управления _ \*FX_MEDIA\*\*.</span><span class="sxs-lookup"><span data-stu-id="0b337-828">This routine provides a string pointer to the default path string maintained inside of the _ *FX_MEDIA*\* control block.</span></span>

### <a name="local-default-path"></a><span data-ttu-id="0b337-829">Локальный путь по умолчанию</span><span class="sxs-lookup"><span data-stu-id="0b337-829">Local Default Path</span></span>

<span data-ttu-id="0b337-830">FileX также предоставляет путь по умолчанию для конкретного потока, что позволяет различным потокам иметь уникальные пути, а также помогает избежать конфликтов.</span><span class="sxs-lookup"><span data-stu-id="0b337-830">FileX also provides a thread-specific default path that allows different threads to have unique paths without conflict.</span></span> <span data-ttu-id="0b337-831">Структура **FX_LOCAL_PATH** предоставляется приложением во время вызовов **_fx_directory_local_path_set_ *_ и _* _fx_directory_local_path_restore_** для изменения локального пути вызывающего потока.</span><span class="sxs-lookup"><span data-stu-id="0b337-831">The **FX_LOCAL_PATH** structure is supplied  by the application during calls to **_fx_directory_local_path_set_*_ and _*_fx_directory_local_path_restore_** to modify the local path for the calling thread.</span></span>

<span data-ttu-id="0b337-832">При наличии локальный путь имеет приоритет над глобальным путем по умолчанию носителя.</span><span class="sxs-lookup"><span data-stu-id="0b337-832">If a local path is present, the local path takes precedence over the global default media path.</span></span> <span data-ttu-id="0b337-833">Если локальный путь не настроен или если его удалили с помощью службы ***fx_directory_local_path_clear***, то глобальный путь по умолчанию носителя будет использован еще раз.</span><span class="sxs-lookup"><span data-stu-id="0b337-833">If the local path is not setup or if it is cleared with the ***fx_directory_local_path_clear*** service, the media's global default path is used once again.</span></span>

## <a name="file-description"></a><span data-ttu-id="0b337-834">Описание файла</span><span class="sxs-lookup"><span data-stu-id="0b337-834">File Description</span></span>

<span data-ttu-id="0b337-835">FileX поддерживает стандартные символы формата 8.3 и длинные имена файлов с расширениями, содержащими три символа.</span><span class="sxs-lookup"><span data-stu-id="0b337-835">FileX supports standard 8.3 character and long file names with three-character extensions.</span></span> <span data-ttu-id="0b337-836">Помимо имени ASCII, каждая запись каталога содержит атрибуты записи, дату и время последнего изменения, индекс начального кластера и размер записи в байтах.</span><span class="sxs-lookup"><span data-stu-id="0b337-836">In addition to the ASCII name, each file entry contains the entry's attributes, the last modified time and date, the starting cluster index, and the size in bytes of the entry.</span></span>

### <a name="file-allocation"></a><span data-ttu-id="0b337-837">Выделение файлов</span><span class="sxs-lookup"><span data-stu-id="0b337-837">File Allocation</span></span>

<span data-ttu-id="0b337-838">FileX поддерживает стандартную схему выделения кластеров в формате FAT.</span><span class="sxs-lookup"><span data-stu-id="0b337-838">FileX supports the standard cluster allocation scheme of the FAT format.</span></span> <span data-ttu-id="0b337-839">Кроме того, FileX поддерживает предварительное выделение непрерывных кластеров.</span><span class="sxs-lookup"><span data-stu-id="0b337-839">In addition, FileX supports pre-cluster allocation of contiguous clusters.</span></span> <span data-ttu-id="0b337-840">Для этого каждый файл FileX создается без выделенных кластеров.</span><span class="sxs-lookup"><span data-stu-id="0b337-840">To accommodate this, each FileX file is created with no allocated clusters.</span></span> <span data-ttu-id="0b337-841">Кластеры выделяются при последующих запросах на запись или запросах ***fx_file_allocate*** для предварительного выделения непрерывных кластеров.</span><span class="sxs-lookup"><span data-stu-id="0b337-841">Clusters are allocated on subsequent write requests or on ***fx_file_allocate*** requests to pre-allocate contiguous clusters.</span></span>

<span data-ttu-id="0b337-842">На рисунке 4 с названием "Пример файла FAT-16 FileX" показан файл с именем ***FILE.TXT*** с двумя последовательными кластерами, выделенными начиная с кластера 101 размером 26 и алфавитом в качестве данных в первом кластере данных с номером 101 файла.</span><span class="sxs-lookup"><span data-stu-id="0b337-842">Figure 4, "FileX FAT-16 File Example," shows a file named ***FILE.TXT*** with two sequential clusters allocated starting at cluster 101, a size of 26, and the alphabet as the data in the file's first data cluster number 101.</span></span>

### <a name="file-access"></a><span data-ttu-id="0b337-843">Доступ к файлам</span><span class="sxs-lookup"><span data-stu-id="0b337-843">File Access</span></span>

<span data-ttu-id="0b337-844">Файл FileX можно открывать несколько раз одновременно для доступа на чтение.</span><span class="sxs-lookup"><span data-stu-id="0b337-844">A FileX file may be opened multiple times simultaneously for read access.</span></span> <span data-ttu-id="0b337-845">И лишь один раз для записи.</span><span class="sxs-lookup"><span data-stu-id="0b337-845">However, a file can only be opened once for writing.</span></span> <span data-ttu-id="0b337-846">Сведения, используемые для поддержки доступа к файлам, содержатся в блоке управления файлами ***FX_FILE***.</span><span class="sxs-lookup"><span data-stu-id="0b337-846">The information used to support the file access is contained in the ***FX_FILE*** file control block.</span></span>

> [!NOTE]
> <span data-ttu-id="0b337-847">*Обратите внимание, что драйвер носителя может динамически устанавливать защиту от записи. В этом случае все запросы на запись, а также попытки открыть файл для записи будут отклонены.*</span><span class="sxs-lookup"><span data-stu-id="0b337-847">*Note that the media driver can dynamically set write protection. If this happens all write requests are rejected as well as attempts to open a file for writing.*</span></span>

### <a name="file-layout-in-exfat"></a><span data-ttu-id="0b337-848">Макет файла в exFAT</span><span class="sxs-lookup"><span data-stu-id="0b337-848">File Layout in exFAT</span></span>

<span data-ttu-id="0b337-849">По умолчанию файловая система exFAT не требует администрирования цепочки FAT для файла, если данные хранятся в связанных кластерах.</span><span class="sxs-lookup"><span data-stu-id="0b337-849">The design of exFAT does not require FAT chain to be maintained for a file if data is stored in contagious clusters.</span></span> <span data-ttu-id="0b337-850">Бит *NoFATChain* в записи каталога расширения потоковой передачи указывает, следует ли использовать цепочку FAT при считывании данных из файла.</span><span class="sxs-lookup"><span data-stu-id="0b337-850">The *NoFATChain* bit in the Stream Extension Directory Entry indicates whether or not the FAT chain should be used when reading data from the file.</span></span> <span data-ttu-id="0b337-851">Если задать параметр *NoFATChain*, FileX будет последовательно считывать данные из кластера, указанного в поле *Первый кластер* в записи каталога расширения потоковой передачи.</span><span class="sxs-lookup"><span data-stu-id="0b337-851">If the *NoFATChain* is set, FileX reads sequentially from the cluster indicated in the *First Cluster* field in the Stream Extension Directory Entry.</span></span>

<span data-ttu-id="0b337-852">С другой стороны, если для *NoFATChain* не задать значение, FileX будет следовать цепочкой FAT, чтобы исследовать весь файл, как в цепочке FAT в FAT12/16/32.</span><span class="sxs-lookup"><span data-stu-id="0b337-852">On the other hand, if the *NoFATChain* is clear, FileX will follow the FAT chain in order to traverse the entire file, similar to the FAT chain in FAT12/16/32.</span></span>

<span data-ttu-id="0b337-853">На рисунке 3 показаны два примера файлов, один из которых не требует цепочки FAT, когда же другому такая цепочка FAT нужна.</span><span class="sxs-lookup"><span data-stu-id="0b337-853">Figure 3 shows two sample files, one does not require FAT chain, and the other one requires a FAT chain.</span></span>

## <a name="system-information"></a><span data-ttu-id="0b337-854">Сведения о системе</span><span class="sxs-lookup"><span data-stu-id="0b337-854">System Information</span></span>

<span data-ttu-id="0b337-855">Сведения о системе FileX состоят из отслеживания экземпляров открытого носителя и администрирования глобальных системных времени и даты.</span><span class="sxs-lookup"><span data-stu-id="0b337-855">FileX system information consists of keeping track of the open media instances and maintaining the global system time and date.</span></span>

![Файл со связанными кластерами по сравнению с файлами, которым необходима ссылка на FAT](./media/user-guide/system-information.png)

<span data-ttu-id="0b337-857">**РИСУНОК 3. Файл со связанными кластерами по сравнению с файлами, которым необходима ссылка на FAT**</span><span class="sxs-lookup"><span data-stu-id="0b337-857">**FIGURE 3. File with Contiguous Clusters vs. File Requiring FAT Link**</span></span>

<span data-ttu-id="0b337-858">По умолчанию в качестве системных даты и времени задается дата последнего выпуска FileX.</span><span class="sxs-lookup"><span data-stu-id="0b337-858">By default, the system date and time are set to the last release date of FileX.</span></span> <span data-ttu-id="0b337-859">Чтобы иметь точные системные дату и время, приложение должно вызвать ***fx_system_time_set** _ и _ *_fx_system_date_set_** во время инициализации.</span><span class="sxs-lookup"><span data-stu-id="0b337-859">To have accurate system date and time, the application must call ***fx_system_time_set** _ and _ *_fx_system_date_set_** during initialization.</span></span>

### <a name="system-date"></a><span data-ttu-id="0b337-860">Системная дата</span><span class="sxs-lookup"><span data-stu-id="0b337-860">System Date</span></span>

<span data-ttu-id="0b337-861">Системная дата FileX сохраняется в глобальной переменной ***_fx_system_time***.</span><span class="sxs-lookup"><span data-stu-id="0b337-861">The FileX system date is maintained in the global ***_fx_system_date*** variable.</span></span> <span data-ttu-id="0b337-862">Биты с 15 по 9 содержат смещение года (начиная с 1980 года), биты с 8 по 5 содержат смещение месяца, а биты с 4 по 0 — смещение дня.</span><span class="sxs-lookup"><span data-stu-id="0b337-862">Bits 15 through 9 contain the year offset from 1980, bits 8 through 5 contain the month offset, and bits 4 through 0 contain the day.</span></span> |

### <a name="system-time"></a><span data-ttu-id="0b337-863">Системное время</span><span class="sxs-lookup"><span data-stu-id="0b337-863">System Time</span></span>

<span data-ttu-id="0b337-864">Системное время FileX сохраняется в глобальной переменной ***_fx_system_time***.</span><span class="sxs-lookup"><span data-stu-id="0b337-864">The FileX system time is maintained in the global ***_fx_system_time*** variable.</span></span> <span data-ttu-id="0b337-865">Биты с 15 по 11 содержат часы, биты с 10 по 5 содержат минуты, а биты с 4 по 0 — половину секунд.</span><span class="sxs-lookup"><span data-stu-id="0b337-865">Bits 15 through 11 contain the hours, bits 10 though 5 contain the minutes, and bits 4 though 0 contain the half seconds.</span></span>

### <a name="periodic-time-update"></a><span data-ttu-id="0b337-866">Периодическое обновление времени</span><span class="sxs-lookup"><span data-stu-id="0b337-866">Periodic Time Update</span></span>

<span data-ttu-id="0b337-867">Во время инициализации системы FileX создает таймер приложения ThreadX для периодического обновления системных даты и времени.</span><span class="sxs-lookup"><span data-stu-id="0b337-867">During system initialization, FileX creates a ThreadX application timer to periodically update the system date and time.</span></span> <span data-ttu-id="0b337-868">Скорость обновления системных даты и времени определяется двумя константами, используемыми функцией ***_fx_system_initialize***.</span><span class="sxs-lookup"><span data-stu-id="0b337-868">The rate at which the system date and time update is determined by two constants used by the ***_fx_system_initialize*** function.</span></span>

<span data-ttu-id="0b337-869">Константы **FX_UPDATE_RATE_IN_SECONDS** и **FX_UPDATE_RATE_IN_TICKS** представляют собой один и тот же период времени.</span><span class="sxs-lookup"><span data-stu-id="0b337-869">The constants **FX_UPDATE_RATE_IN_SECONDS** and **FX_UPDATE_RATE_IN_TICKS** represent the same period of time.</span></span> <span data-ttu-id="0b337-870">Константа **FX_UPDATE_RATE_IN_TICKS** — число тактов таймера ThreadX, представляющее количество секунд, заданное константой **FX_UPDATE_RATE_IN_SECONDS**.</span><span class="sxs-lookup"><span data-stu-id="0b337-870">The constant **FX_UPDATE_RATE_IN_TICKS** is the number of ThreadX timer ticks that represents the number of seconds specified by the constant **FX_UPDATE_RATE_IN_SECONDS**.</span></span> <span data-ttu-id="0b337-871">Константа **FX_UPDATE_RATE_IN_SECONDS** указывает количество секунд между каждым обновлением времени FileX.</span><span class="sxs-lookup"><span data-stu-id="0b337-871">The **FX_UPDATE_RATE_IN_SECONDS** constant specifies how many seconds between each FileX time update.</span></span> <span data-ttu-id="0b337-872">Таким образом, внутреннее время FileX увеличивается с учетом интервалов **FX_UPDATE_RATE_IN_SECONDS**.</span><span class="sxs-lookup"><span data-stu-id="0b337-872">Therefore, the internal FileX time increments in intervals of **FX_UPDATE_RATE_IN_SECONDS**.</span></span> <span data-ttu-id="0b337-873">Эти константы можно указать во время компиляции **_fx_system_initialize_ *_ или же разработчик может изменить значения по умолчанию, находящиеся в файле _* _fx_port.h_** выпуска FileX.</span><span class="sxs-lookup"><span data-stu-id="0b337-873">These constants may be supplied during compilation of **_fx_system_initialize_*_, or the developer may modify the defaults found in the _*_fx_port.h_** file of the FileX release.</span></span>

<span data-ttu-id="0b337-874">Таймер периодического действия FileX используется только для обновления глобальных системных даты и времени, применимых исключительно к созданию меток времени файла.</span><span class="sxs-lookup"><span data-stu-id="0b337-874">The periodic FileX timer is used only for updating the global system date and time, which is used solely for file time-stamping.</span></span> <span data-ttu-id="0b337-875">Если создание меток времени не требуется, просто определите **FX_NO_TIMER** при компиляции **_fx_system_initialize.c_**, чтобы исключить возможность создания таймера периодического действия FileX.</span><span class="sxs-lookup"><span data-stu-id="0b337-875">If time-stamping is not necessary, simply define **FX_NO_TIMER** when compiling **_fx_system_initialize.c_** to eliminate the creation of the FileX periodic timer.</span></span>

![Пример файла FAT-16 FileX](./media/user-guide/fat-16-file-example.png)

<span data-ttu-id="0b337-877">**РИСУНОК 4. Пример файла FAT-16 FileX**</span><span class="sxs-lookup"><span data-stu-id="0b337-877">**FIGURE 4. FileX FAT-16 File Example**</span></span>
