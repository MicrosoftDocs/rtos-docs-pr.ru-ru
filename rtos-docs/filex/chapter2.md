---
title: Глава 2. Установка и использование FileX для ОСРВ Azure
description: Эта глава содержит вводные сведения о FileX в ОСРВ Azure, а также описание условий установки, процедур и способов использования, включая указанные ниже.
author: philmea
ms.author: philmea
ms.date: 05/19/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 6703b10d8e0895984bb92d74d5dff809dca1a7f8
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "104814392"
---
# <a name="chapter-2---installation-and-use-of-azure-rtos-filex"></a><span data-ttu-id="ba921-103">Глава 2. Установка и использование FileX для ОСРВ Azure</span><span class="sxs-lookup"><span data-stu-id="ba921-103">Chapter 2 - Installation and use of Azure RTOS FileX</span></span>

<span data-ttu-id="ba921-104">Эта глава содержит вводные сведения о FileX в ОСРВ Azure, а также описание условий установки, процедур и способов использования.</span><span class="sxs-lookup"><span data-stu-id="ba921-104">This chapter contains an introduction to Azure RTOS FileX and a description of installation conditions, procedures, and use.</span></span> 

## <a name="host-considerations"></a><span data-ttu-id="ba921-105">Рекомендации по размещению</span><span class="sxs-lookup"><span data-stu-id="ba921-105">Host Considerations</span></span>

### <a name="computer-type"></a><span data-ttu-id="ba921-106">Тип компьютера</span><span class="sxs-lookup"><span data-stu-id="ba921-106">Computer Type</span></span>

<span data-ttu-id="ba921-107">Разработка внедряемых решений обычно выполняется на главных компьютерах Windows или Linux (Unix).</span><span class="sxs-lookup"><span data-stu-id="ba921-107">Embedded development is usually performed on Windows or Linux (Unix) host computers.</span></span> <span data-ttu-id="ba921-108">После компиляции, компоновки и размещения на главном компьютере приложение скачивается на целевое оборудование для выполнения.</span><span class="sxs-lookup"><span data-stu-id="ba921-108">After the application is compiled, linked, and located on the host, it is downloaded to the target hardware for execution.</span></span>

### <a name="download-interfaces"></a><span data-ttu-id="ba921-109">Интерфейсы скачивания</span><span class="sxs-lookup"><span data-stu-id="ba921-109">Download Interfaces</span></span>

<span data-ttu-id="ba921-110">Как правило, скачивание на целевое оборудование запускается из отладчика инструмента для разработки.</span><span class="sxs-lookup"><span data-stu-id="ba921-110">Usually the target download is done from within the development tool's debugger.</span></span> <span data-ttu-id="ba921-111">После скачивания отладчик отвечает за управление выполнением на целевом оборудовании (запуск, остановка, точка останова и т. д.), а также за доступ к памяти и регистрам процессора.</span><span class="sxs-lookup"><span data-stu-id="ba921-111">After download, the debugger is responsible for providing target execution control (go, halt, breakpoint, etc.) as well as access to memory and processor registers.</span></span>

### <a name="debugging-tools"></a><span data-ttu-id="ba921-112">Инструменты отладки</span><span class="sxs-lookup"><span data-stu-id="ba921-112">Debugging Tools</span></span>

<span data-ttu-id="ba921-113">Большинство отладчиков инструментов разработки обмениваются данными с целевым оборудованием через подключения OCD (отладка на микросхеме), например JTAG (IEEE 1149.1) и BDM (режим фоновой отладки).</span><span class="sxs-lookup"><span data-stu-id="ba921-113">Most development tool debuggers communicate with the target hardware via on-chip debug (OCD) connections such as JTAG (IEEE 1149.1) and Background Debug Mode (BDM).</span></span> <span data-ttu-id="ba921-114">Кроме того, отладчики взаимодействуют с целевым оборудованием через подключения ICE (внутрисхемная эмуляция).</span><span class="sxs-lookup"><span data-stu-id="ba921-114">Debuggers also communicate with target hardware through In-Circuit Emulation (ICE) connections.</span></span> <span data-ttu-id="ba921-115">Подключения OCD и ICE обеспечивают надежную передачу данных с минимальным влиянием на резидентное ПО на целевом оборудовании.</span><span class="sxs-lookup"><span data-stu-id="ba921-115">Both OCD and ICE connections provide robust solutions with minimal intrusion on the target resident software.</span></span>

### <a name="required-hard-disk-space"></a><span data-ttu-id="ba921-116">Требуемое место на жестком диске</span><span class="sxs-lookup"><span data-stu-id="ba921-116">Required Hard Disk Space</span></span>

<span data-ttu-id="ba921-117">Исходный код FileX поставляется в формате ASCII и требует примерно 500 КБ пространства на жестком диске главного компьютера.</span><span class="sxs-lookup"><span data-stu-id="ba921-117">The source code for FileX is delivered in ASCII format and requires approximately 500 KBytes of space on the host computer's hard disk</span></span>

## <a name="target-considerations"></a><span data-ttu-id="ba921-118">Рекомендации по целевому оборудованию</span><span class="sxs-lookup"><span data-stu-id="ba921-118">Target Considerations</span></span>

<span data-ttu-id="ba921-119">FileX требует 6–30 КБ доступной только для чтения памяти (ПЗУ) на целевом оборудовании.</span><span class="sxs-lookup"><span data-stu-id="ba921-119">FileX requires between 6 KBytes and 30 KBytes of  Read-Only Memory (ROM) on the target.</span></span> <span data-ttu-id="ba921-120">Еще 100 КБ ОЗУ на целевом оборудовании необходимо для глобальных структур данных FileX.</span><span class="sxs-lookup"><span data-stu-id="ba921-120">Another  100 bytes of the target's Random Access Memory (RAM) are required for FileX global data structures.</span></span> <span data-ttu-id="ba921-121">На каждый открытый носитель также требуется 1,5 КБ ОЗУ для блока управления в дополнение к памяти ОЗУ для хранения данных одного сектора (обычно 512 байт).</span><span class="sxs-lookup"><span data-stu-id="ba921-121">Each opened media also requires 1.5 KBytes of RAM for the control block in addition to RAM for storing data for one sector (typically 512 bytes).</span></span>

<span data-ttu-id="ba921-122">Для правильной работы меток даты и времени FileX полагается на функции таймера ThreadX.</span><span class="sxs-lookup"><span data-stu-id="ba921-122">For date/time stamping to function properly, FileX relies on ThreadX timer facilities.</span></span> <span data-ttu-id="ba921-123">Это реализуется за счет создания для FileX отдельного таймера во время инициализации FileX.</span><span class="sxs-lookup"><span data-stu-id="ba921-123">This is implemented by creating a FileX-specific timer during FileX initialization.</span></span> <span data-ttu-id="ba921-124">FileX также использует семафоры ThreadX для защиты многопоточности, а также приостановку ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="ba921-124">FileX also relies on ThreadX semaphores for multiple thread protection and I/O suspension.</span></span>

## <a name="product-distribution"></a><span data-ttu-id="ba921-125">Распространение продукта</span><span class="sxs-lookup"><span data-stu-id="ba921-125">Product Distribution</span></span>

<span data-ttu-id="ba921-126">FileX для ОСРВ Azure можно получить из нашего репозитория общедоступного исходного кода по адресу <https://github.com/azure-rtos/filex/>.</span><span class="sxs-lookup"><span data-stu-id="ba921-126">Azure RTOS FileX can be obtained from our public source code repository at <https://github.com/azure-rtos/filex/>.</span></span>

<span data-ttu-id="ba921-127">Ниже приведен список основных файлов в этом репозитории.</span><span class="sxs-lookup"><span data-stu-id="ba921-127">The following is a list of several important files in the repository:</span></span>

- <span data-ttu-id="ba921-128">***fx_api.h*** — этот файл заголовка C содержит все системные равенства, структуры данных и прототипы служб.</span><span class="sxs-lookup"><span data-stu-id="ba921-128">***fx_api.h*** : This C header file contains all system equates, data structures, and service prototypes.</span></span>
- <span data-ttu-id="ba921-129">***fx_port.h*** — этот файл заголовка C содержит все определения и структуры данных, относящиеся к конкретным инструментам разработки.</span><span class="sxs-lookup"><span data-stu-id="ba921-129">***fx_port.h*** : This C header file contains all development-tool-specific data definitions and structures.</span></span>
- <span data-ttu-id="ba921-130">***demo_filex.c*** — этот файл на C содержит небольшое демонстрационное приложение.</span><span class="sxs-lookup"><span data-stu-id="ba921-130">***demo_filex.c*** : This C file contains a small demo application.</span></span>
- <span data-ttu-id="ba921-131">***fx.a (или fx.lib)*** — это двоичная версия библиотеки C для FileX.</span><span class="sxs-lookup"><span data-stu-id="ba921-131">***fx.a (or fx.lib)*** : This is the binary version of the FileX C library.</span></span> <span data-ttu-id="ba921-132">Она распространяется с помощью стандартного пакета.</span><span class="sxs-lookup"><span data-stu-id="ba921-132">It is distributed with the standard package.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ba921-133">*Все имена файлов содержат только строчные буквы. Это соглашение об именовании упрощает преобразование команд для использования на платформах разработки в среде Linux (UNIX).*</span><span class="sxs-lookup"><span data-stu-id="ba921-133">*All file names are in lower-case. This naming convention makes it easier to convert the commands to Linux (Unix) development platforms.*</span></span>

## <a name="filex-installation"></a><span data-ttu-id="ba921-134">Установка FileX</span><span class="sxs-lookup"><span data-stu-id="ba921-134">FileX Installation</span></span>

<span data-ttu-id="ba921-135">FileX устанавливается путем клонирования репозитория GitHub на локальный компьютер.</span><span class="sxs-lookup"><span data-stu-id="ba921-135">FileX is installed by cloning the GitHub repository to your local machine.</span></span> <span data-ttu-id="ba921-136">Ниже приведен типичный синтаксис для создания клона репозитория FileX на вашем компьютере:</span><span class="sxs-lookup"><span data-stu-id="ba921-136">The following is typical syntax for creating a clone of the FileX repository on your PC:</span></span>

```c
    git clone https://github.com/azure-rtos/filex
```

<span data-ttu-id="ba921-137">Также вы можете скачать копию репозитория с помощью соответствующей кнопки на главной странице GitHub.</span><span class="sxs-lookup"><span data-stu-id="ba921-137">Alternatively you can download a copy of the repository using the download button on the GitHub main page.</span></span>

<span data-ttu-id="ba921-138">Кроме того, вы можете найти инструкции по созданию библиотеки FileX на главной странице веб-репозитория.</span><span class="sxs-lookup"><span data-stu-id="ba921-138">You will also find instructions for building the FileX library on the front page of the online repository.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ba921-139">Прикладному программному обеспечению требуется доступ к файлу библиотеки FileX (обычно он называется\* ***fx.a** _ или _*_fx.lib_\*_) _и включаемым файлам C **fx_api.h** и **fx_port.h**.</span><span class="sxs-lookup"><span data-stu-id="ba921-139">Application software needs access to the FileX library file (usually called\* usually ***fx.a** _ or _*_fx.lib_\*_) _and the C include files **fx_api.h** and **fx_port.h**.</span></span> <span data-ttu-id="ba921-140">Для этого задайте путь к файлам в средствах разработки или скопируйте файлы в область разработки приложения.</span><span class="sxs-lookup"><span data-stu-id="ba921-140">This is accomplished either by setting the appropriate path for the development tools or by copying these files into the application development area.</span></span>

## <a name="using-filex"></a><span data-ttu-id="ba921-141">Использование FileX</span><span class="sxs-lookup"><span data-stu-id="ba921-141">Using FileX</span></span>

<span data-ttu-id="ba921-142">Использовать FileX довольно просто.</span><span class="sxs-lookup"><span data-stu-id="ba921-142">Using FileX is easy.</span></span> <span data-ttu-id="ba921-143">Код приложения должен включить файл ***fx_api.h** _ во время компиляции и компоноваться с библиотекой времени выполнения FileX _*_fx.a_*_ (или _*_fx.lib_\*_).</span><span class="sxs-lookup"><span data-stu-id="ba921-143">Basically, the application code must include ***fx_api.h** _ during compilation and link with the FileX run-time library _*_fx.a_*_ (or _*_fx.lib_\*_).</span></span> <span data-ttu-id="ba921-144">Конечно, нужны и файлы ThreadX, а именно _*_tx_api.h_*_ и _*_tx.a_*_ (или _*_tx.lib_*_)_\*.</span><span class="sxs-lookup"><span data-stu-id="ba921-144">Of course, the ThreadX files, namely _*_tx_api.h_*_ and _*_tx.a_*_ (or _*_tx.lib_*_)_,\* are also required.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ba921-145">При использовании FileX в автономном режиме (должен быть задан параметр **FX_STANDALONE_ENABLE**) файлы и библиотеки ThreadX не требуются.</span><span class="sxs-lookup"><span data-stu-id="ba921-145">When using FileX in Standalone mode (**FX_STANDALONE_ENABLE** must be defined), ThreadX files/libraries are not required.</span></span>

<span data-ttu-id="ba921-146">Если вы уже используете ThreadX, то для создания приложения FileX необходимо выполнить четыре шага:</span><span class="sxs-lookup"><span data-stu-id="ba921-146">Assuming you are already using ThreadX, there are four steps required to build a FileX application:</span></span>

1. <span data-ttu-id="ba921-147">Включите файл ***fx_api.h*** во все файлы приложения, которые используют службы или структуры данных FileX.</span><span class="sxs-lookup"><span data-stu-id="ba921-147">Include the ***fx_api.h*** file in all application files that use FileX services or data structures.</span></span>
1. <span data-ttu-id="ba921-148">Инициализируйте систему FileX, вызвав ***fx_system_initialize** _ из функции _ *_tx_application_define_** или потока приложения.</span><span class="sxs-lookup"><span data-stu-id="ba921-148">Initialize the FileX system by calling ***fx_system_initialize** _ from the _ *_tx_application_define_** function or an application thread.</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="ba921-149">При использовании FileX в автономном режиме вызов ***fx_system_initialize*** должен осуществляться напрямую из кода приложения.</span><span class="sxs-lookup"><span data-stu-id="ba921-149">When using FileX in Standalone mode, ***fx_system_initialize*** should be directly called from application code.</span></span>

1. <span data-ttu-id="ba921-150">Добавьте один или несколько вызовов ***fx_media_open***, чтобы настроить носитель FileX.</span><span class="sxs-lookup"><span data-stu-id="ba921-150">Add one or more calls to ***fx_media_open*** to set up the FileX media.</span></span> <span data-ttu-id="ba921-151">Этот вызов должен выполняться из контекста потока приложения.</span><span class="sxs-lookup"><span data-stu-id="ba921-151">This call must be made from the context of an application thread.</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="ba921-152">*Помните, что для вызова **fx_media_open** требуется достаточно ОЗУ для хранения данных одного сектора.*</span><span class="sxs-lookup"><span data-stu-id="ba921-152">*Remember that the **fx_media_open** call requires enough RAM to store data for one sector.*</span></span>

1. <span data-ttu-id="ba921-153">Скомпилируйте исходный код приложения и скомпонуйте его с библиотеками времени выполнения FileX и ThreadX — ***fx.a** _ (или _*_fx.lib_*_) и _*_tx.a_*_ (или _*_tx.lib_\*\*).</span><span class="sxs-lookup"><span data-stu-id="ba921-153">Compile application source and link with the FileX and ThreadX run-time libraries, ***fx.a** _ (or _*_fx.lib_*_) and _*_tx.a_*_ (or _*_tx.lib_\*\*).</span></span> <span data-ttu-id="ba921-154">Полученный образ можно скачать в целевую систему и запустить.</span><span class="sxs-lookup"><span data-stu-id="ba921-154">The resulting image can be downloaded to the target and executed!</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="ba921-155">Устранение неполадок</span><span class="sxs-lookup"><span data-stu-id="ba921-155">Troubleshooting</span></span>

<span data-ttu-id="ba921-156">Версии FileX для любой системы включают демонстрационное приложение.</span><span class="sxs-lookup"><span data-stu-id="ba921-156">Each FileX port is delivered with a demonstration application.</span></span> <span data-ttu-id="ba921-157">Рекомендуется сначала запустить демонстрационную систему — на целевом оборудовании или в соответствующей демонстрационной среде.</span><span class="sxs-lookup"><span data-stu-id="ba921-157">It is always a good idea to get the demonstration system running first—either on the target hardware or a specific demonstration environment.</span></span>

<span data-ttu-id="ba921-158">Если демонстрационная система не работает, попробуйте выполнить следующие действия, чтобы выявить проблему.</span><span class="sxs-lookup"><span data-stu-id="ba921-158">If the demonstration system does not work, try the following things to narrow the problem:</span></span>

1. <span data-ttu-id="ba921-159">Определите, на каком этапе демонстрации возникает ошибка.</span><span class="sxs-lookup"><span data-stu-id="ba921-159">Determine how much of the demonstration is running.</span></span>
1. <span data-ttu-id="ba921-160">Увеличьте размеры стека (это с большей вероятностью принесет пользу в фактическом коде приложения, чем в демонстрации).</span><span class="sxs-lookup"><span data-stu-id="ba921-160">Increase stack sizes (this is more important in actual application code than it is for the demonstration).</span></span>
1. <span data-ttu-id="ba921-161">Убедитесь в наличии достаточного объема ОЗУ для размера электронного диска по умолчанию, равного 32 КБ.</span><span class="sxs-lookup"><span data-stu-id="ba921-161">Ensure there is enough RAM for the 32KBytes default RAM disk size.</span></span> <span data-ttu-id="ba921-162">Базовая система будет использовать гораздо меньше ОЗУ, однако по мере использования все большего объема электронного диска при отсутствии достаточного объема памяти возникнут проблемы.</span><span class="sxs-lookup"><span data-stu-id="ba921-162">The basic system will operate on much less RAM; however, as more of the RAM disk is used, problems will surface if there is not enough memory.</span></span>
1. <span data-ttu-id="ba921-163">Временно отключите все недавно внесенные изменения и проверьте, сохраняется ли проблема и изменяется ли ее проявление.</span><span class="sxs-lookup"><span data-stu-id="ba921-163">Temporarily bypass any recent changes to see if the problem disappears or changes.</span></span> <span data-ttu-id="ba921-164">Такая информация будет полезной специалистам службы поддержки Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="ba921-164">Such information should prove useful to Microsoft support engineers.</span></span> <span data-ttu-id="ba921-165">Выполните инструкции, приведенные в разделе "Центр поддержки клиентов", чтобы отправить сведения, собранные на этапах устранения неполадок.</span><span class="sxs-lookup"><span data-stu-id="ba921-165">Follow the procedures outlined in "Customer Support Center" to send the information gathered from the troubleshooting steps.</span></span>

## <a name="configuration-options"></a><span data-ttu-id="ba921-166">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="ba921-166">Configuration Options</span></span>

<span data-ttu-id="ba921-167">При сборке библиотеки FileX и приложения, использующего FileX, доступно несколько параметров конфигурации.</span><span class="sxs-lookup"><span data-stu-id="ba921-167">There are several configuration options when building the FileX library and the application using FileX.</span></span> <span data-ttu-id="ba921-168">Указанные ниже параметры можно определить в исходном коде приложения, в командной строке или во включаемом файле ***fx_user. h***.</span><span class="sxs-lookup"><span data-stu-id="ba921-168">The options below can be defined in the application source, on the command line, or within the ***fx_user.h*** include file.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ba921-169">\*Параметры, определенные в файле **fx_user.h**, применяются только в случае сборки приложения и библиотеки ThreadX с определенным параметром **_FX_INCLUDE_USER_DEFINE_FILE_\*_._При использовании FileX в автономном режиме (должен быть задан параметр** FX_STANDALONE_ENABLE\*\*) файлы и библиотеки ThreadX не требуются.</span><span class="sxs-lookup"><span data-stu-id="ba921-169">*Options defined in **fx_user.h** are applied only if the application and ThreadX library are built with **_FX_INCLUDE_USER_DEFINE_FILE_\*_ defined._ When using FileX in Standalone mode (** FX_STANDALONE_ENABLE*\* must be defined), ThreadX files/libraries are not required.</span></span>

<span data-ttu-id="ba921-170">Подробное описание каждого из параметров конфигурации приведено ниже:</span><span class="sxs-lookup"><span data-stu-id="ba921-170">The following list describes each configuration option in detail:</span></span>

|<span data-ttu-id="ba921-171">Определение</span><span class="sxs-lookup"><span data-stu-id="ba921-171">Define</span></span>|<span data-ttu-id="ba921-172">Значение</span><span class="sxs-lookup"><span data-stu-id="ba921-172">Meaning</span></span>|
|----------    |-----------|
|<span data-ttu-id="ba921-173">FX_MAX_LAST_NAME_LEN</span><span class="sxs-lookup"><span data-stu-id="ba921-173">FX_MAX_LAST_NAME_LEN</span></span>        |<span data-ttu-id="ba921-174">Это значение определяет максимальную длину имени файла, включая полное имя пути.</span><span class="sxs-lookup"><span data-stu-id="ba921-174">This value defines the maximum file name length, which includes full path name.</span></span> <span data-ttu-id="ba921-175">По умолчанию это значение равно 256.</span><span class="sxs-lookup"><span data-stu-id="ba921-175">By default, this value is 256.</span></span>|
|<span data-ttu-id="ba921-176">FX_DONT_UPDATE_OPEN_FILES</span><span class="sxs-lookup"><span data-stu-id="ba921-176">FX_DONT_UPDATE_OPEN_FILES</span></span>    |<span data-ttu-id="ba921-177">Когда параметр задан, FileX не изменяет уже открытые файлы.</span><span class="sxs-lookup"><span data-stu-id="ba921-177">Defined, FileX does not update already opened files.</span></span>|
|<span data-ttu-id="ba921-178">FX_MEDIA_DISABLE_SEARCH_CACHE</span><span class="sxs-lookup"><span data-stu-id="ba921-178">FX_MEDIA_DISABLE_SEARCH_CACHE</span></span>    |<span data-ttu-id="ba921-179">Когда параметр задан, оптимизация кэша поиска файлов отключена.</span><span class="sxs-lookup"><span data-stu-id="ba921-179">Defined, the file search cache optimization is disabled.</span></span>|
|<span data-ttu-id="ba921-180">FX_MEDIA_DISABLE_SEARCH_CACHE</span><span class="sxs-lookup"><span data-stu-id="ba921-180">FX_MEDIA_DISABLE_SEARCH_CACHE</span></span>    |<span data-ttu-id="ba921-181">Когда параметр задан, оптимизация кэша поиска файлов отключена.</span><span class="sxs-lookup"><span data-stu-id="ba921-181">Defined, the file search cache optimization is disabled.</span></span>|
|<span data-ttu-id="ba921-182">FX_DISABLE_DIRECT_DATA_READ_CACHE_FILL</span><span class="sxs-lookup"><span data-stu-id="ba921-182">FX_DISABLE_DIRECT_DATA_READ_CACHE_FILL</span></span> |<span data-ttu-id="ba921-183">Когда параметр задан, прямое обновление сектора чтения в кэше отключено.</span><span class="sxs-lookup"><span data-stu-id="ba921-183">Defined, the direct read sector update of cache is disabled.</span></span>|
|<span data-ttu-id="ba921-184">FX_MEDIA_STATISTICS_DISABLE</span><span class="sxs-lookup"><span data-stu-id="ba921-184">FX_MEDIA_STATISTICS_DISABLE</span></span> |<span data-ttu-id="ba921-185">Когда параметр задан, сбор статистики по носителям отключен.</span><span class="sxs-lookup"><span data-stu-id="ba921-185">Defined, gathering of media statistics is disabled.</span></span>|
|<span data-ttu-id="ba921-186">FX_SINGLE_OPEN_LEGACY</span><span class="sxs-lookup"><span data-stu-id="ba921-186">FX_SINGLE_OPEN_LEGACY</span></span> |<span data-ttu-id="ba921-187">Когда параметр задан, включена устаревшая логика одиночного открытия для одного файла.</span><span class="sxs-lookup"><span data-stu-id="ba921-187">Defined, legacy single open logic for the same file is enabled.</span></span>|
|<span data-ttu-id="ba921-188">FX_RENAME_PATH_INHERIT</span><span class="sxs-lookup"><span data-stu-id="ba921-188">FX_RENAME_PATH_INHERIT</span></span>    |<span data-ttu-id="ba921-189">Когда параметр задан, переименование наследует сведения о пути.</span><span class="sxs-lookup"><span data-stu-id="ba921-189">Defined, renaming inherits path information.</span></span>|
|<span data-ttu-id="ba921-190">FX_DISABLE_ERROR_CHECKING</span><span class="sxs-lookup"><span data-stu-id="ba921-190">FX_DISABLE_ERROR_CHECKING</span></span>    |<span data-ttu-id="ba921-191">Удаляет базовый API проверки ошибок FileX, что повышает производительность (до 30 %) и уменьшает размер кода.</span><span class="sxs-lookup"><span data-stu-id="ba921-191">Removes the basic FileX error checking API and results in improved performance (as much as 30%) and smaller code size.</span></span>|
|<span data-ttu-id="ba921-192">FX_MAX_LONG_NAME_LEN</span><span class="sxs-lookup"><span data-stu-id="ba921-192">FX_MAX_LONG_NAME_LEN</span></span>    |<span data-ttu-id="ba921-193">Задает максимальный размер имени файла для FileX.</span><span class="sxs-lookup"><span data-stu-id="ba921-193">Specifies the maximum file name size for FileX.</span></span> <span data-ttu-id="ba921-194">Значение по умолчанию — 256, но его можно переопределить в командной строке.</span><span class="sxs-lookup"><span data-stu-id="ba921-194">The default value is 256, but this can be overridden with a command-line define.</span></span> <span data-ttu-id="ba921-195">Допустимые значения находятся в диапазоне от 13 до 256.</span><span class="sxs-lookup"><span data-stu-id="ba921-195">Legal values range between 13 and 256.</span></span>|
|<span data-ttu-id="ba921-196">FX_MAX_SECTOR_CACHE</span><span class="sxs-lookup"><span data-stu-id="ba921-196">FX_MAX_SECTOR_CACHE</span></span>|<span data-ttu-id="ba921-197">Задает максимальное число логических секторов, которые могут быть кэшированы FileX.</span><span class="sxs-lookup"><span data-stu-id="ba921-197">Specifies the maximum number of logical sectors that can be cached by FileX.</span></span> <span data-ttu-id="ba921-198">Фактическое количество секторов, которые могут быть кэшированы, меньше этой константы и определяет, сколько секторов может уместиться в объеме памяти, предоставляемом в fx_media_open.</span><span class="sxs-lookup"><span data-stu-id="ba921-198">The actual number of sectors that can be cached is lesser of this constant and how many sectors can fit in the amount of memory supplied at fx_media_open.</span></span> <span data-ttu-id="ba921-199">Значение по умолчанию — 256.</span><span class="sxs-lookup"><span data-stu-id="ba921-199">The default value is 256.</span></span> <span data-ttu-id="ba921-200">Все значения должны быть степенью числа 2.</span><span class="sxs-lookup"><span data-stu-id="ba921-200">All values must be a power of 2.</span></span>|
|<span data-ttu-id="ba921-201">FX_FAT_MAP_SIZE</span><span class="sxs-lookup"><span data-stu-id="ba921-201">FX_FAT_MAP_SIZE</span></span>    |<span data-ttu-id="ba921-202">Указывает число секторов, которые могут быть представлены в карте обновления FAT.</span><span class="sxs-lookup"><span data-stu-id="ba921-202">Specifies the number of sectors that can be represented in the FAT update map.</span></span> <span data-ttu-id="ba921-203">Значение по умолчанию — 256, но его можно переопределить в командной строке.</span><span class="sxs-lookup"><span data-stu-id="ba921-203">The default value is 256, but this can be overridden with a command-line define.</span></span> <span data-ttu-id="ba921-204">Увеличенные значения позволяют сократить число ненужных обновлений вторичных секторов FAT.</span><span class="sxs-lookup"><span data-stu-id="ba921-204">Larger values help reduce unneeded updates of secondary FAT sectors.</span></span>|
|<span data-ttu-id="ba921-205">FX_MAX_FAT_CACHE</span><span class="sxs-lookup"><span data-stu-id="ba921-205">FX_MAX_FAT_CACHE</span></span>    |<span data-ttu-id="ba921-206">Указывает число записей во внутреннем кэше FAT.</span><span class="sxs-lookup"><span data-stu-id="ba921-206">Specifies the number of entries in the internal FAT cache.</span></span> <span data-ttu-id="ba921-207">Значение по умолчанию — 16, но его можно переопределить в командной строке.</span><span class="sxs-lookup"><span data-stu-id="ba921-207">The default value is 16, but this can be overridden with a command-line define.</span></span> <span data-ttu-id="ba921-208">Все значения должны быть степенью числа 2.</span><span class="sxs-lookup"><span data-stu-id="ba921-208">All values must be a power of 2.</span></span>|
|<span data-ttu-id="ba921-209">FX_FAULT_TOLERANT</span><span class="sxs-lookup"><span data-stu-id="ba921-209">FX_FAULT_TOLERANT</span></span>    |<span data-ttu-id="ba921-210">Если этот параметр определен, FileX немедленно передает запросы на запись всех системных секторов (загрузочных секторов, секторов FAT и секторов каталогов) в драйвер носителя.</span><span class="sxs-lookup"><span data-stu-id="ba921-210">When defined, FileX immediately passes write requests of all system sectors (boot, FAT, and directory sectors) to the media's driver.</span></span> <span data-ttu-id="ba921-211">Это может снизить производительность, но помогает ограничить повреждения потерянными кластерами.</span><span class="sxs-lookup"><span data-stu-id="ba921-211">This potentially decreases performance, but helps limit corruption to lost clusters.</span></span> <span data-ttu-id="ba921-212">Обратите внимание, что включение этой функции не приводит к автоматическому включению модуля отказоустойчивости FileX, который включается с помощью определения</span><span class="sxs-lookup"><span data-stu-id="ba921-212">Note that enabling this feature does not automatically enable FileX Fault Tolerant Module, which is enabled by defining</span></span>|
|<span data-ttu-id="ba921-213">FX_FAULT_TOLERANT_DATA</span><span class="sxs-lookup"><span data-stu-id="ba921-213">FX_FAULT_TOLERANT_DATA</span></span>    |<span data-ttu-id="ba921-214">Если этот параметр определен, FileX немедленно передает запросы на запись файлов в драйвер носителя.</span><span class="sxs-lookup"><span data-stu-id="ba921-214">When defined, FileX immediately passes all file data write requests to the media's driver.</span></span> <span data-ttu-id="ba921-215">Это может снизить производительность, но помогает ограничить потерю данных файлов.</span><span class="sxs-lookup"><span data-stu-id="ba921-215">This potentially decreases performance, but helps limit lost file data.</span></span> <span data-ttu-id="ba921-216">Обратите внимание, что включение этой функции не приводит к автоматическому включению модуля отказоустойчивости FileX, который включается с помощью определения ***FX_ENABLE_FAULT_TOLERANT***.</span><span class="sxs-lookup"><span data-stu-id="ba921-216">Note that enabling this feature does not automatically enable FileX Fault Tolerant Module, which is enabled by defining ***FX_ENABLE_FAULT_TOLERANT***</span></span>|
|<span data-ttu-id="ba921-217">FX_NO_LOCAL_PATH</span><span class="sxs-lookup"><span data-stu-id="ba921-217">FX_NO_LOCAL_PATH</span></span>|<span data-ttu-id="ba921-218">Удаляет логику локального пути из FileX, что приводит к уменьшению размера кода.</span><span class="sxs-lookup"><span data-stu-id="ba921-218">Removes local path logic from FileX, resulting in smaller code size.</span></span>|
|<span data-ttu-id="ba921-219">FX_NO_TIMER</span><span class="sxs-lookup"><span data-stu-id="ba921-219">FX_NO_TIMER</span></span>|<span data-ttu-id="ba921-220">Отменяет настройку таймера ThreadX для обновления системных времени и даты FileX.</span><span class="sxs-lookup"><span data-stu-id="ba921-220">Eliminates the ThreadX timer setup to update the FileX system time and date.</span></span> <span data-ttu-id="ba921-221">Это приводит к тому, что для всех операций с файлами указываются время и дата по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="ba921-221">Doing so causes default time and date to be placed on all file operations.</span></span>|
|<span data-ttu-id="ba921-222">FX_UPDATE_RATE_IN_SECONDS</span><span class="sxs-lookup"><span data-stu-id="ba921-222">FX_UPDATE_RATE_IN_SECONDS</span></span>    |<span data-ttu-id="ba921-223">Указывает частоту, с которой корректируется системное время в FileX.</span><span class="sxs-lookup"><span data-stu-id="ba921-223">Specifies rate at which system time in FileX is adjusted.</span></span> <span data-ttu-id="ba921-224">По умолчанию значение равно 10, то есть системное время FileX обновляется каждые 10 секунд.</span><span class="sxs-lookup"><span data-stu-id="ba921-224">By default, value is 10, specifying that the FileX system time is updated every 10 seconds.</span></span>|
|<span data-ttu-id="ba921-225">FX_ENABLE_EXFAT</span><span class="sxs-lookup"><span data-stu-id="ba921-225">FX_ENABLE_EXFAT</span></span>| <span data-ttu-id="ba921-226">Если этот параметр определен, в FileX включена логика обработки файловой системы exFAT.</span><span class="sxs-lookup"><span data-stu-id="ba921-226">When defined, the logic for handling exFAT file system is enabled in FileX.</span></span> <span data-ttu-id="ba921-227">По умолчанию этот символ не определен.</span><span class="sxs-lookup"><span data-stu-id="ba921-227">By default this symbol is not defined.</span></span>| 
|<span data-ttu-id="ba921-228">FX_UPDATE_RATE_IN_TICKS</span><span class="sxs-lookup"><span data-stu-id="ba921-228">FX_UPDATE_RATE_IN_TICKS</span></span>| <span data-ttu-id="ba921-229">Задает ту же частоту, что и ***FX_UPDATE_RATE_IN_SECONDS*** (см. выше), только в виде базовой частоты таймера ThreadX.</span><span class="sxs-lookup"><span data-stu-id="ba921-229">Specifies the same rate as ***FX_UPDATE_RATE_IN_SECONDS*** (see above), except in terms of the underlying ThreadX timer frequency.</span></span> <span data-ttu-id="ba921-230">Значение по умолчанию — 1000, что подразумевает частоту таймера ThreadX 10 мс и 10-секундный интервал.</span><span class="sxs-lookup"><span data-stu-id="ba921-230">The default is 1000, which assumes a 10ms ThreadX timer rate and a 10 second interval.</span></span>|
|<span data-ttu-id="ba921-231">FX_SINGLE_THREAD</span><span class="sxs-lookup"><span data-stu-id="ba921-231">FX_SINGLE_THREAD</span></span>|<span data-ttu-id="ba921-232">Удаляет из источника FileX логику защиты ThreadX.</span><span class="sxs-lookup"><span data-stu-id="ba921-232">Eliminates ThreadX protection logic from the FileX source.</span></span> <span data-ttu-id="ba921-233">Этот параметр следует использовать, только если FileX используется из одного потока либо без ThreadX.</span><span class="sxs-lookup"><span data-stu-id="ba921-233">It should be used if FileX is being used only from one thread or if FileX is being used without ThreadX.</span></span>|
|<span data-ttu-id="ba921-234">FX_DRIVER_USE_64BIT_LBA</span><span class="sxs-lookup"><span data-stu-id="ba921-234">FX_DRIVER_USE_64BIT_LBA</span></span>|<span data-ttu-id="ba921-235">При определении этот параметр включает 64-битные адреса секторов, используемые в драйвере ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="ba921-235">When defined, enables 64-bit sector addresses used in I/O driver.</span></span> <span data-ttu-id="ba921-236">По умолчанию этот параметр не определен.</span><span class="sxs-lookup"><span data-stu-id="ba921-236">By default this option is not defined.</span></span>|
|<span data-ttu-id="ba921-237">FX_ENABLE_FAULT_TOLERANT</span><span class="sxs-lookup"><span data-stu-id="ba921-237">FX_ENABLE_FAULT_TOLERANT</span></span>| <span data-ttu-id="ba921-238">При определении этот параметр включает модуль отказоустойчивости FileX.</span><span class="sxs-lookup"><span data-stu-id="ba921-238">When defined, enables FileX Fault Tolerant Module.</span></span> <span data-ttu-id="ba921-239">При включении отказоустойчивости автоматически определяется символ ***FX_FAULT_TOLERANT** _ и_*_FX_FAULT_TOLERANT_DATA_\*\*.</span><span class="sxs-lookup"><span data-stu-id="ba921-239">Enabling Fault Tolerant automatically defines the symbol ***FX_FAULT_TOLERANT** _ and _*_FX_FAULT_TOLERANT_DATA_\*\*.</span></span> <span data-ttu-id="ba921-240">По умолчанию этот параметр не определен.</span><span class="sxs-lookup"><span data-stu-id="ba921-240">By default this option is not defined.</span></span>|
|<span data-ttu-id="ba921-241">FX_FAULT_TOLERANT_BOOT_INDEX</span><span class="sxs-lookup"><span data-stu-id="ba921-241">FX_FAULT_TOLERANT_BOOT_INDEX</span></span>|<span data-ttu-id="ba921-242">Определяет смещение в байтах в загрузочном секторе, где находится кластер для журнала отказоустойчивости.</span><span class="sxs-lookup"><span data-stu-id="ba921-242">Defines byte offset in the boot sector where the cluster for the fault tolerant log is.</span></span> <span data-ttu-id="ba921-243">По умолчанию используется значение 116.</span><span class="sxs-lookup"><span data-stu-id="ba921-243">By default this value is 116.</span></span> <span data-ttu-id="ba921-244">Это поле занимает 4 байта.</span><span class="sxs-lookup"><span data-stu-id="ba921-244">This field takes 4 bytes.</span></span> <span data-ttu-id="ba921-245">Выбраны байты с 116 по 119, так как они отмечены как зарезервированные в спецификации FAT 12/16/32/exFAT.</span><span class="sxs-lookup"><span data-stu-id="ba921-245">Bytes 116 through 119 are chosen because they are marked as reserved by FAT 12/16/32/exFAT specification.</span></span>|
|<span data-ttu-id="ba921-246">FX_FAULT_TOLERANT_MINIMAL_CLUSTER</span><span class="sxs-lookup"><span data-stu-id="ba921-246">FX_FAULT_TOLERANT_MINIMAL_CLUSTER</span></span>|<span data-ttu-id="ba921-247">Это нерекомендуемый символ.</span><span class="sxs-lookup"><span data-stu-id="ba921-247">This symbol is deprecated.</span></span> <span data-ttu-id="ba921-248">Он больше не используется модулем отказоустойчивости FileX.</span><span class="sxs-lookup"><span data-stu-id="ba921-248">It is no longer being used by FileX Fault Tolerant.</span></span>|
|<span data-ttu-id="ba921-249">FX_STANDALONE_ENABLE</span><span class="sxs-lookup"><span data-stu-id="ba921-249">FX_STANDALONE_ENABLE</span></span>|<span data-ttu-id="ba921-250">Если этот параметр определен, он позволяет использовать FileX в автономном режиме (без ОСРВ Azure).</span><span class="sxs-lookup"><span data-stu-id="ba921-250">Defined, enables FileX to be used in standalone mode (without Azure RTOS).</span></span> <span data-ttu-id="ba921-251">По умолчанию этот символ не определен.</span><span class="sxs-lookup"><span data-stu-id="ba921-251">By default this symbol is not defined.</span></span>|

> [!IMPORTANT]
> <span data-ttu-id="ba921-252">Если параметр **FX_STANDALONE_ENABLE** определен, логика локального пути и настройка таймера ThreadX отключаются.</span><span class="sxs-lookup"><span data-stu-id="ba921-252">When **FX_STANDALONE_ENABLE** is defined, Local path logic and ThreadX timer setup are disabled.</span></span>

## <a name="filex-version-id"></a><span data-ttu-id="ba921-253">Идентификатор версии FileX</span><span class="sxs-lookup"><span data-stu-id="ba921-253">FileX Version ID</span></span>

<span data-ttu-id="ba921-254">Сведения о текущей версии FileX доступны во время выполнения как пользователю, так и прикладному программному обеспечению.</span><span class="sxs-lookup"><span data-stu-id="ba921-254">The current version of FileX is available both to the user and the application software during run-time.</span></span> <span data-ttu-id="ba921-255">Программист может получить данные о версии FileX, изучив файл **fx_port.h**.</span><span class="sxs-lookup"><span data-stu-id="ba921-255">The programmer can obtain the FileX version from examination of the **fx_port.h** file.</span></span> <span data-ttu-id="ba921-256">Кроме того, этот файл содержит журнал версий для соответствующей платформы.</span><span class="sxs-lookup"><span data-stu-id="ba921-256">In addition, this file also contains a version history of the corresponding port.</span></span> <span data-ttu-id="ba921-257">Прикладное программное обеспечение может получить сведения о версии FileX из глобальной строки **_ _fx_version_id_**.</span><span class="sxs-lookup"><span data-stu-id="ba921-257">Application software can obtain the FileX version by examining the global string **_ _fx_version_id_**.</span></span>
