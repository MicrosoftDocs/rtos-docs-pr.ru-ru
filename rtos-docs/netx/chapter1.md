---
title: Глава 1. Знакомство с NetX для ОСРВ Azure
description: В этой главе содержатся общие сведения о протоколе NetX для ОСРВ Azure, в том числе описываются аспекты его прикладного применения и преимущества.
author: philmea
ms.author: philmea
ms.date: 05/19/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 48be6a7ecddc53b36b3cc1a9ecfb50a11e285881
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "104815315"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx"></a>Глава 1. Знакомство с NetX для ОСРВ Azure

NetX для ОСРВ Azure — это высокопроизводительная, работающая в реальном времени реализация стандартов TCP/IP, разработанная исключительно для встраиваемых приложений на основе ThreadX. В этой главе содержатся общие сведения о протоколе NetX, в том числе описываются аспекты его прикладного применения и преимущества.

## <a name="netx-unique-features"></a>Уникальные функции NetX

В отличие от других реализаций TCP/IP, NetX характерна гибкость. Его можно легко использовать как с компактными приложениями для микроконтроллеров, так и с приложениями для мощных процессоров RISC и DSP. Это резко контрастирует с общедоступными или другими коммерческими реализациями, которые изначально разрабатывались для сред рабочих станций, а затем адаптировались под встраиваемые системы.

### <a name="piconettrade-architecture"></a>Архитектура Piconet&trade;

В основе превосходной масштабируемости и производительности NetX лежит *Piconet* — программная архитектура, специально разработанная для встраиваемых систем. Архитектура Piconet обеспечивает отличную масштабируемость благодаря реализации служб NetX в виде библиотеки на C. Таким образом только те службы, которые фактически использует приложение, добавляются в финальный образ среды выполнения. Поэтому итоговый размер NetX полностью зависит от приложения. Для большинства приложений требования к размеру образа в NetX лежат в диапазоне от 5 до 30 КБ.

NetX обеспечивает сверхвысокую сетевую производительность, разбивая вызовы функций внутренних компонентов только в случае крайней необходимости. Кроме того, большинство операций обработки NetX выполняет непосредственно система. За счет этого достигается невероятная производительность по сравнению с сетевым ПО для рабочих станций, которое часто использовалось для встраиваемых архитектур в прошлом.</th>

### <a name="zero-copy-implementation"></a>Реализация без копирования

NetX предоставляет реализацию TCP/IP *без копирования* на основе пакетов. "Без копирования" означает, что данные в буфере пакетов приложения не копируются в пределах NetX. Это значительно повышает производительность и освобождает ценные ресурсы процессора для приложения, что очень важно для встраиваемых приложений.

### <a name="udp-fast-pathtrade-technology"></a>Технология UDP Fast Path&trade;

Технология *UDP Fast Path* в NetX обеспечивает максимальную скорость обработки UDP. На отправляющей стороне операции для обработки UDP (в том числе необязательная контрольная сумма UDP) целиком содержатся в службе ***nx_udp_socket_send***. Дополнительные вызовы функций не выполняются, пока пакет не будет готов к отправке через внутреннюю подпрограмму отправки IP в NetX. Эта подпрограмма также является плоской (т. е. с минимальным вложением вызовов функции), поэтому пакет быстро отправляется в сетевой драйвер приложения. Получив пакет UDP, система обработки получения пакетов NetX помещает пакет непосредственно в соответствующую очередь получения сокета UDP или передает его в первый поток, ожидающий получения пакета из очереди получения сокета UDP. Дополнительные переключения контекста ThreadX не требуются.

### <a name="ansi-c-source-code"></a>Исходный код ANSI C

Протокол NetX написан полностью на ANSI C, и его можно мгновенно перенести практически в любую процессорную архитектуру с поддержкой компилятора ANSI C и ThreadX.

### <a name="not-a-black-box"></a>Отсутствие проблемы "черного ящика"

Большинство дистрибутивов NetX включают полный исходный код на C. Это устраняет проблему "черного ящика", которая возникает со множеством коммерческих сетевых стеков. Используя NetX, разработчики приложений могут отслеживать все без исключения операции сетевого стека.
  
Доступность исходного кода также позволяет вносить изменения с учетом конкретного приложения. Хотя это и не рекомендуется, но возможность при необходимости изменить сетевой стек является плюсом.  

Эти функции особенно полезны разработчикам, которые привыкли работать с корпоративными или общедоступными сетевыми стеками. Они привыкли, что исходный код доступен и его можно изменить. NetX — это лучшее сетевое программное обеспечение для таких разработчиков.

### <a name="bsd-compatible-socket-api"></a>Совместимый с BSD API сокета

Для устаревших приложений NetX предоставляет совместимый с BSD интерфейс сокета, который выполняет вызовы к высокопроизводительному базовому API NetX. Это упрощает перенос кода существующих сетевых приложений в NetX.

## <a name="rfcs-supported-by-netx"></a>Стандарты RFC, поддерживаемые NetX

NetX поддерживает стандарты RFC, описывающие базовые сетевые протоколы, в том числе приведенные ниже. NetX соответствует всем общим рекомендациям и базовым требованиям с учетом ограничений операционной системы реального времени, обусловленных небольшим объемом занимаемой памяти и эффективным выполнением.

| RFC      | Описание                                            |
|----------|--------------------------------------------------------|
| RFC 1112 | Расширения узлов для многоадресной рассылки IP-адресов (IGMPv1)           |
| RFC 1122 | Требования к Интернет-узлам — уровни связи |
| RFC 2236 | Протокол управления группами Интернета (IGMP), версия 2          |
| RFC 768  | Протокол пользовательских датаграмм (UDP)                           |
| RFC 791  | Протокол Интернета (IP)                                 |
| RFC 792  | Протокол межсетевых управляющих сообщений (ICMP)               |
| RFC 793  | Управляющий протокол передачи (TCP)                    |
| RFC 826  | Протокол определения адреса в Ethernet (ARP)             |
| RFC 903  | Обратный протокол разрешения адресов (RARP)             |
|          |                                                        |

## <a name="embedded-network-applications"></a>Встраиваемые сетевые приложения

Встраиваемые сетевые приложения — это приложения, которым требуется доступ к сети и которые работают на микропроцессорах, установленных в таких продуктах, как сотовые телефоны, коммуникационное оборудование, автомобильные двигатели, лазерные принтеры, медицинские изделия и т. д. Такие приложения почти всегда имеют некоторые ограничения по объему памяти и производительности. Еще одно отличие встраиваемых сетевых приложений — это то, что их программные и аппаратные компоненты имеют определенные цели.

### <a name="real-time-network-software"></a>Сетевое программное обеспечение, работающее в реальном времени  

По сути, сетевое программное обеспечение, которое должно выполнять операции обработки за определенный период времени, называется *сетевым ПО*, работающим в *реальном времени*, и при наличии временных ограничений для сетевых приложений они считаются приложениями реального времени. Встраиваемые сетевые приложения практически всегда работают в реальном времени, так как они взаимодействуют с внешней средой.

## <a name="netx-benefits"></a>Преимущества NetX

Основные преимущества использования NetX для встраиваемых приложений — это высокая скорость подключения к Интернету и очень небольшие требования к памяти. Кроме того, протокол NetX полностью интегрирован с высокопроизводительной, многозадачной операционной системой ThreadX, работающей в реальном времени.

### <a name="improved-responsiveness"></a>Повышенная скорость реагирования  

Высокопроизводительный стек протоколов NetX позволяет встраиваемым сетевым приложениям реагировать максимально быстро. Это особенно важно для встраиваемых приложений, которые либо обрабатывают большие объемы трафика, либо имеют жесткие требования к обработке одного пакета.

### <a name="software-maintenance"></a>Обслуживание программного обеспечения

С NetX разработчики могут с легкостью секционировать сетевые аспекты собственных встраиваемых приложений. Такое секционирование упрощает весь процесс разработки и значительно расширяет возможности по будущему обслуживанию программного обеспечения.

### <a name="increased-throughput"></a>Повышение пропускной способности

NetX обеспечивает использование самых высокопроизводительных сетевых функций, что достигается минимальной нагрузкой при обработке пакетов. Это также позволяет увеличить пропускную способность.

### <a name="processor-isolation"></a>Изолированность от процессора

NetX предоставляет надежный, независимый от процессора интерфейс между приложением, базовым процессором и сетевым оборудованием. Это позволяет разработчикам уделять больше внимания сетевым аспектам приложения и не тратить лишнее время на решение проблем с оборудованием, которые влияют на качество сети.

### <a name="ease-of-use"></a>Удобство использования

NetX предназначается для разработчиков приложений. Архитектура и интерфейс вызовов служб NetX отличаются простотой. Поэтому разработчики NetX могут с легкостью использовать его расширенные функции.

### <a name="improve-time-to-market"></a>Сокращение времени выхода на рынок

Мощные функции NetX ускоряют разработку программного обеспечения. NetX абстрагирует большинство проблем с процессором и сетевым оборудованием, фактически устраняя их в большинстве сетевых областей приложения. В сочетании с простотой использования и набором расширенных функций это значительно ускоряет выход на рынок.

### <a name="protecting-the-software-investment"></a>Защита инвестиций в программное обеспечение

Для разработки NetX используется исключительно ANSI C. При этом протокол полностью интегрирован с операционной системой ThreadX, работающей в реальном времени. Это означает, что приложения NetX можно мгновенно перенести на все поддерживаемые ThreadX процессоры. Более того, поддержку новой процессорной архитектуры в ThreadX можно реализовать всего за несколько недель. В результате использование NetX обеспечивает беспроблемную миграцию приложения и защищает изначальные инвестиции в разработку.
