---
title: Глава 1. Общие сведения
author: philmea
description: В этой статье представлены общие сведения о решении "Модули ThreadX для ОСРВ Azure".
ms.author: philmea
ms.date: 07/15/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 0c9698086468d7bb41c33ebe9fa9d1ebb61b5f1f
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "104814384"
---
# <a name="chapter-1-overview"></a>Глава 1. Общие сведения

Компонент "Модули ThreadX" предоставляет инфраструктуру для приложений, позволяющую динамически загружать модули, созданные отдельно от резидентной части приложения. Это особенно полезно в ситуациях, когда размер кода приложения превышает объем доступной памяти. Решение также позволяет добавлять новые функции после развертывания образа ядра. Кроме того, можно частично обновлять встроенное ПО путем динамической загрузки модулей.

Защита памяти для загруженного модуля не является обязательной и определяется по свойствам в преамбуле модуля. Если защита памяти требуется, оборудование управления памятью процессора настраивается таким образом, что все потоки модуля получают доступ только к коду модуля и памяти данных. Любой доступ к внешней памяти или попытка выполнения внешнего кода приведет к ошибке операции с памятью и завершению потока модуля, вызвавшего эту ошибку. Если приложение зарегистрирует обратный вызов для уведомлений о сбое операций с памятью, этот вызов также позволит уведомить приложение о таком сбое.

Компонент "Модули ThreadX" рассчитывает, что приложение предоставит область памяти для загрузки модулей. Область инструкций для каждого модуля может выполняться на месте или копироваться для выполнения в область памяти модуля в ОЗУ. Во всех случаях требуемая для данных модуля память выделяется из области памяти модуля.

Количество одновременно загруженных модулей ничем не ограничено (помимо объема доступной памяти), но всегда есть только одна копия кода резидентного диспетчера модулей. На рис. 1 представлена связь между диспетчером модулей и модулями.

![Отношения между модулями и диспетчером модулей](media/image2.png)

**Рис. 1.** Модули и диспетчер модулей

Каждый модуль должен иметь собственную область памяти, которую выделяет приложение. Модуль и диспетчер модулей взаимодействуют через программную функцию диспетчеризации, используя заранее определенные идентификаторы запросов для служб ThreadX, запрошенных модулем. Кроме того, модуль обязан предоставить сведения о единой точке входа в поток, размере и приоритете требуемого стека, а также идентификатор модуля и сведения о размере и приоритете стека для потока обратного вызова. Вся эта информация определяется в преамбуле каждого модуля.

Диспетчер модулей отвечает за создание исходного потока модуля и инициализацию его выполнения. После выполнения начального потока модуля диспетчер модулей контролирует и направляет все запросы к API ThreadX, выполняемые модулем. Модуль получает полный доступ к API ThreadX, включая возможность создания дополнительных потоков в пределах модуля.  
  
Соглашения об именовании для исходного кода модуля достаточно просты: все исходные файлы диспетчера модулей имеют префикс имени ***txm_module_manager_\**** а файлы, предназначенные для конкретного модуля, не имеют сегмента имени **_manager_ *_. Главный файл включений с именем _* _txm_module.h_** является общим для диспетчера и исходного кода модуля.
